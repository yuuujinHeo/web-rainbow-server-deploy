{"version":3,"file":"apps/host/main.js","mappings":";;;;;;;AAAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,CAAQ;AAC7B,aAAa,mBAAO,CAAC,EAAe;AACpC,aAAa,mBAAO,CAAC,EAAO;;;;;;;AClBf;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,CAAe;;;;;;;AChBvB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,uBAAuB,GAAG,0BAA0B,GAAG,uBAAuB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,2BAA2B,GAAG,wBAAwB,GAAG,yBAAyB,GAAG,uBAAuB,GAAG,2BAA2B,GAAG,gCAAgC,GAAG,wBAAwB,GAAG,wBAAwB,GAAG,2BAA2B,GAAG,0BAA0B,GAAG,yBAAyB,GAAG,uBAAuB,GAAG,wBAAwB,GAAG,wBAAwB;AAC9iB,iDAAiD;AACjD,iDAAiD;AACjD,gDAA8C;AAC9C,mDAAoD;AACpD,oDAAuD;AACvD,qDAA0D;AAC1D,kDAAiD;AACjD,kDAAiD;AACjD,0DAAyE;AACzE,qDAA0D;AAC1D,iDAA8C;AAC9C,mDAAoD;AACpD,kDAAiD;AACjD,qDAA0D;AAC1D,mDAAoD;AACpD,mDAAoD;AACpD,iDAA8C;AAC9C,oDAAuD;AACvD,iDAA8C;AAC9C,kDAAiD;;;;;;;ACtBpC;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,yBAAyB,GAAG,uBAAuB;AACpF,wCAAwC;AACxC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;AC/BjB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,yBAAyB,GAAG,uBAAuB;AACpF,wCAAwC;AACxC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;ACrBjB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B,GAAG,wBAAwB,GAAG,uBAAuB;AAClF,uCAAuC;AACvC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;;;;;;ACrBhB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2CAA2C,GAAG,4CAA4C,GAAG,0BAA0B,GAAG,kBAAkB,GAAG,iBAAiB,GAAG,uBAAuB;AAC1L,oDAAoD;AACpD,mDAAmD;AACnD,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;;;;;;;AChE9B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,GAAG,2BAA2B,GAAG,uBAAuB;AACxF,0CAA0C;AAC1C,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;;;;;;;AC5BnB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC,GAAG,4BAA4B,GAAG,uBAAuB;AAC1F,2CAA2C;AAC3C,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;;;;;;;AChCpB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,yBAAyB,GAAG,uBAAuB;AACpF,wCAAwC;AACxC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;ACrBjB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,yBAAyB,GAAG,uBAAuB;AACpF,wCAAwC;AACxC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;AChCjB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sCAAsC,GAAG,iCAAiC,GAAG,uBAAuB;AACpG,gDAAgD;AAChD,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;;;;;;;ACrBzB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC,GAAG,4BAA4B,GAAG,uBAAuB;AAC1F,2CAA2C;AAC3C,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;;;;;;;AC/BpB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B,GAAG,wBAAwB,GAAG,uBAAuB;AAClF,uCAAuC;AACvC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;;;;;;ACpChB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,0BAA0B,GAAG,uBAAuB;AACjF,qCAAqC;AACrC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;;;;;;ACrBb;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,yBAAyB,GAAG,uBAAuB;AACpF,wCAAwC;AACxC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;AC7BjB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC,GAAG,4BAA4B,GAAG,uBAAuB;AAC1F,2CAA2C;AAC3C,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;;;;;;;ACjCpB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,0BAA0B,GAAG,uBAAuB;AACtF,yCAAyC;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;;;;;;;ACrBlB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,0BAA0B,GAAG,uBAAuB;AACtF,yCAAyC;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;;;;;;;ACpClB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC,GAAG,qCAAqC,GAAG,wBAAwB,GAAG,uBAAuB;AAC9H,8CAA8C;AAC9C,0CAA0C;AAC1C,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;;;;;;;ACpDpB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,GAAG,2BAA2B,GAAG,uBAAuB;AACxF,0CAA0C;AAC1C,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;;;;;;;AC9BnB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B,GAAG,wBAAwB,GAAG,uBAAuB;AAClF,uCAAuC;AACvC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;;;;;;ACrBhB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,yBAAyB,GAAG,uBAAuB;AACpF,wCAAwC;AACxC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,uBAAuB;AACvB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;AChCjB;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,EAAoB;;;;;;;AChB5B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,eAAe,mBAAO,CAAC,EAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc,GAAG,YAAY,GAAG,aAAa;AACrE,sBAAsB,YAAY,GAAG,cAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uCAAuC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB;;;;;;;AC1CvB;;;;;;ACAa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,EAAiB;;;;;;;AChBzB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,8BAA8B,mBAAO,CAAC,EAAqC;AAC3E,sBAAsB,mBAAO,CAAC,EAA2B;AACzD,+BAA+B,mBAAO,CAAC,EAAuC;AAC9E,8BAA8B,mBAAO,CAAC,EAAqC;AAC3E,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,aAAa,mBAAO,CAAC,EAAI;AACzB,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,8BAA8B,mBAAO,CAAC,EAAmC;AACzE,2BAA2B,mBAAO,CAAC,EAAmC;AACtE,qBAAqB,mBAAO,CAAC,EAA4B;AACzD,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,4BAA4B,mBAAO,CAAC,EAAoC;AACxE,2BAA2B,mBAAO,CAAC,EAA2B;AAC9D;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1GA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B;AAC9B,iBAAiB,mBAAO,CAAC,CAAa;AACtC,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,eAAe,mBAAO,CAAC,EAAM;AAC7B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,sBAAsB,mBAAO,CAAC,EAA+B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;;;;;;AClFa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,kBAAkB,mBAAO,CAAC,EAAS;AACnC,wBAAwB,mBAAO,CAAC,EAA2B;AAC3D,eAAe,mBAAO,CAAC,EAAkB;AACzC,gBAAgB,mBAAO,CAAC,EAAO;AAC/B,aAAa,mBAAO,CAAC,EAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA;AACA;AACA;AACA,4BAA4B,UAAU;AACtC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA,uBAAuB,aAAa,UAAU,iBAAiB;AAC/D;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2BAA2B;AAC3E;AACA;AACA;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA;AACA;AACA,kBAAkB,eAAe,UAAU,IAAI,MAAM,KAAK,EAAE,2DAA2D,EAAE,mBAAmB,EAAE,2BAA2B,SAAS,KAAK,EAAE,cAAc,QAAQ,GAAG;AAClN;AACA;AACA,CAAC;AACD,8CAA8C,2BAA2B;AACzE;AACA;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA;AACA,mBAAmB,UAAU,IAAI,MAAM,IAAI,0DAA0D,OAAO,SAAS,IAAI,QAAQ;AACjI;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,cAAc,GAAG,QAAQ;AACnD;AACA,gDAAgD,iBAAiB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA,kFAAkF,+BAA+B;AACjH;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,kFAAkF,+BAA+B;AACjH,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB;AACA;AACA;;;;;;;AC5JA;;;;;;ACAA;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB,GAAG,iBAAiB,GAAG,gBAAgB,GAAG,gBAAgB,GAAG,eAAe;AACvH,iBAAiB,mBAAO,CAAC,EAAY;AACrC,2CAA0C,EAAE,qCAAqC,8BAA8B,EAAC;AAChH,kBAAkB,mBAAO,CAAC,EAAa;AACvC,4CAA2C,EAAE,qCAAqC,gCAAgC,EAAC;AACnH,kBAAkB,mBAAO,CAAC,EAAkB;AAC5C,4CAA2C,EAAE,qCAAqC,gCAAgC,EAAC;AACnH,mBAAmB,mBAAO,CAAC,EAAc;AACzC,6CAA4C,EAAE,qCAAqC,kCAAkC,EAAC;AACtH,oBAAoB,mBAAO,CAAC,EAAe;AAC3C,8CAA6C,EAAE,qCAAqC,oCAAoC,EAAC;AACzH,wBAAwB,mBAAO,CAAC,EAAmB;AACnD,kDAAiD,EAAE,qCAAqC,4CAA4C,EAAC;;;;;;;ACdxH;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe;AACf,eAAe,mBAAO,CAAC,EAAM;AAC7B;AACA;AACA;AACA;AACA;AACA,eAAe;;;;;;;ACTf;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,mBAAmB,mBAAO,CAAC,EAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,mBAAmB,mBAAmB,GAAG,yBAAyB,GAAG,qBAAqB;AAC1F,eAAe,qBAAqB,GAAG,uBAAuB,GAAG,uBAAuB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,SAAS,GAAG,UAAU,GAAG,QAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,SAAS,GAAG,UAAU,GAAG,SAAS,EAAE,SAAS,GAAG,WAAW,GAAG,WAAW;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,SAAS,GAAG,WAAW,GAAG,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,WAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,aAAa;AACjE,kBAAkB,WAAW;AAC7B;AACA;AACA,gBAAgB;;;;;;;ACjLhB;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,WAAW,mBAAO,CAAC,EAAI;AACvB,aAAa,mBAAO,CAAC,EAAM;AAC3B,iBAAiB,mBAAO,CAAC,EAAU;AACnC,WAAW,mBAAO,CAAC,EAAY;AAC/B,eAAe,mBAAO,CAAC,EAAM;AAC7B,mBAAmB,mBAAO,CAAC,EAAU;AACrC,YAAY,mBAAO,CAAC,EAAK;AACzB,eAAe,mBAAO,CAAC,EAAM;AAC7B,iBAAiB,mBAAO,CAAC,CAAa;AACtC,6BAA6B,mBAAO,CAAC,EAAoC;AACzE,mBAAmB,mBAAO,CAAC,EAAqB;AAChD,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,eAAe,mBAAO,CAAC,EAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,aAAa;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB,EAAE,uBAAuB;AAC5E;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,WAAW;AACrF;AACA;AACA,wBAAwB,UAAU;AAClC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iBAAiB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,iBAAiB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,wDAAwD,iBAAiB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iBAAiB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,iCAAiC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,IAAI;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,KAAK;AAC5F;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iBAAiB;AACnE;AACA;AACA,sCAAsC,IAAI;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;;;;;;AChShB;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB;AACxB,wBAAwB,mBAAO,CAAC,CAAuB;AACvD;AACA;AACA,gBAAgB,oCAAoC;AACpD;AACA;AACA;AACA,wBAAwB;;;;;;;ACVX;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,EAAsB;;;;;;;AChB9B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,eAAe,gBAAgB,gBAAgB;;;;;;;ACvBnC;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;AClDJ;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB;AACA;AACA,kBAAkB;;;;;;;ACLL;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;;;;;;AC3BtB;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,iBAAiB,mBAAO,CAAC,CAAa;AACtC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,mCAAmC,mBAAO,CAAC,EAAkC;AAC7E,kCAAkC,mBAAO,CAAC,EAAiC;AAC3E,6BAA6B,mBAAO,CAAC,EAA8B;AACnE,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,aAAa,mBAAO,CAAC,EAAI;AACzB,eAAe,mBAAO,CAAC,EAAM;AAC7B,eAAe,mBAAO,CAAC,EAAkB;AACzC,iBAAiB,mBAAO,CAAC,EAAW;AACpC,mBAAmB,mBAAO,CAAC,EAAgC;AAC3D,gBAAgB,mBAAO,CAAC,EAAO;AAC/B,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,+BAA+B,mBAAO,CAAC,EAA8B;AACrE,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,qDAAqD;AACtH;AACA;AACA;AACA,mEAAmE;AACnE,sEAAsE,qBAAqB,GAAG,aAAa;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,oCAAoC;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB;AAC3E,iEAAiE,+DAA+D;AAChI;AACA;AACA;AACA;AACA,mFAAmF,gBAAgB,GAAG,iBAAiB;AACvH;AACA;AACA,gDAAgD,8BAA8B;AAC9E;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,oCAAoC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wBAAwB;AAC5E,iEAAiE,2GAA2G;AAC5K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,oCAAoC;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,wBAAwB;AAC/E;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,uBAAuB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,oCAAoC;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,wBAAwB;AAC9E;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,mFAAmF,cAAc,GAAG,eAAe;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,qBAAqB;AACrB;AACA;AACA,sDAAsD,oCAAoC;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wBAAwB;AAC5E,iEAAiE,gEAAgE;AACjI;AACA;AACA;AACA;AACA;AACA,yBAAyB,WAAW;AACpC;AACA,mEAAmE,iBAAiB,sBAAsB,QAAQ;AAClH;AACA;AACA,iEAAiE,QAAQ,IAAI,8BAA8B;AAC3G;AACA;AACA,iDAAiD,yCAAyC;AAC1F;AACA;AACA,8DAA8D,IAAI;AAClE;AACA,uEAAuE,8BAA8B;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kDAAkD;AAC1G;AACA;AACA,oDAAoD,kDAAkD;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,oEAAoE,IAAI,IAAI,gBAAgB;AAC5F;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,6BAA6B,WAAW;AACxC;AACA;AACA;AACA,4EAA4E,QAAQ;AACpF;AACA;AACA,4EAA4E,QAAQ;AACpF;AACA,+EAA+E,QAAQ;AACvF,kEAAkE,SAAS,KAAK,WAAW;AAC3F;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,kDAAkD;AAChH;AACA;AACA,0DAA0D,oCAAoC;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,QAAQ;AAC/F;AACA;AACA;AACA;AACA,6DAA6D,SAAS,KAAK,QAAQ;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kDAAkD;AAC/G;AACA;AACA,yDAAyD,oCAAoC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,0BAA0B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qDAAqD,wBAAwB;AAC7E,iEAAiE,4EAA4E;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,qBAAqB;AAC/E;AACA,2DAA2D,sBAAsB;AACjF;AACA;AACA;AACA,sDAAsD,iCAAiC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,wBAAwB;AAChF,iEAAiE,oDAAoD;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,qBAAqB;AAC/E;AACA,2DAA2D,sBAAsB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,SAAS,IAAI,aAAa;AACpF;AACA;AACA;AACA;AACA,qDAAqD,yBAAyB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,SAAS,IAAI,aAAa;AACnF;AACA;AACA;AACA;AACA;AACA,0DAA0D,qBAAqB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,qBAAqB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,uDAAuD,oCAAoC;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;;;;;;;AC/pBa;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB,GAAG,kBAAkB,GAAG,qBAAqB;AACpE,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,eAAe,mBAAO,CAAC,EAAM;AAC7B,aAAa,mBAAO,CAAC,EAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,cAAc;AACrH;AACA;AACA;AACA,gGAAgG,cAAc;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,cAAc;AACrH;AACA;AACA;AACA,gGAAgG,cAAc;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,cAAc;AACrH;AACA;AACA;AACA,gGAAgG,cAAc;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,cAAc;AACrH;AACA;AACA;AACA,gGAAgG,cAAc;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,cAAc;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;;;;;;;AC/OvB;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe;AACf,eAAe,mBAAO,CAAC,EAAS;AAChC,aAAa,mBAAO,CAAC,EAAI;AACzB,eAAe,mBAAO,CAAC,EAAM;AAC7B,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iBAAiB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;;;;;;AClDf;;;;;;ACAA;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,6BAA6B,mBAAO,CAAC,EAAiC;AACtE,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,8BAA8B,mBAAO,CAAC,EAAuC;AAC7E,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,wBAAwB;AAC1E;AACA;AACA;AACA,mDAAmD,qBAAqB;AACxE;AACA;AACA;AACA,kDAAkD,wBAAwB;AAC1E;AACA;AACA;AACA,mDAAmD,qBAAqB;AACxE;AACA;AACA;AACA,+CAA+C,mDAAmD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,IAAI,IAAI,UAAU;AAC5F;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,0BAA0B;AAC1B,0BAA0B;AAC1B;AACA;AACA;AACA;;;;;;;ACnFa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,mBAAmB;AACrC,aAAa,mBAAO,CAAC,EAAoB;AACzC,aAAa,mBAAO,CAAC,EAAQ;AAC7B,6CAA8C;AAC9C,yCAAsC;;;;;;;ACpBzB;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,2BAA2B,GAAG,sBAAsB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,oBAAoB,GAAG,qBAAqB,GAAG,sBAAsB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,uBAAuB,GAAG,4BAA4B,GAAG,oBAAoB,GAAG,uBAAuB,GAAG,uBAAuB,GAAG,sBAAsB,GAAG,oBAAoB,GAAG,qBAAqB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,oBAAoB,GAAG,0BAA0B,GAAG,oBAAoB,GAAG,oBAAoB;AACzkB,oBAAoB;AACpB,oBAAoB;AACpB,0BAA0B;AAC1B,oBAAoB;AACpB,qBAAqB;AACrB,mBAAmB;AACnB,qBAAqB;AACrB,oBAAoB;AACpB,sBAAsB;AACtB,uBAAuB;AACvB,uBAAuB;AACvB,oBAAoB;AACpB,4BAA4B;AAC5B,uBAAuB;AACvB,oBAAoB;AACpB,mBAAmB;AACnB,sBAAsB;AACtB,qBAAqB;AACrB,oBAAoB;AACpB,qBAAqB;AACrB,mBAAmB;AACnB,sBAAsB;AACtB,2BAA2B;AAC3B,mBAAmB;;;;;;;AC1BN;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,EAAmB;;;;;;;AChB3B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;;;;;;;ACjBa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,EAAoB;;;;;;;AChB5B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,qBAAqB;AAChD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;ACpDa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC;AACjC,uBAAuB,mBAAO,CAAC,EAAuC;AACtE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA,iCAAiC;AACjC,iCAAiC;AACjC;AACA;;;;;;;AChBa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;;;;;;;AClBa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B;AAC9B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,sBAAsB,mBAAO,CAAC,EAA+B;AAC7D,8BAA8B,mBAAO,CAAC,EAAuC;AAC7E,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,cAAc,mBAAO,CAAC,EAAiB;AACvC,sBAAsB,mBAAO,CAAC,EAA4C;AAC1E,mBAAmB,mBAAO,CAAC,EAAyC;AACpE,sBAAsB,mBAAO,CAAC,EAAgD;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,8BAA8B;AACxF;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,8BAA8B;AACxF;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;;;;;;;ACzHa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,8BAA8B,GAAG,6BAA6B,GAAG,0BAA0B,GAAG,yBAAyB,GAAG,6BAA6B,GAAG,mBAAmB;AAC1M,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,0BAA0B,mBAAO,CAAC,EAAiB;AACnD,4BAA4B,mBAAO,CAAC,EAAmB;AACvD,eAAe,mBAAO,CAAC,EAAkB;AACzC,mBAAmB,mBAAO,CAAC,EAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;AC1JA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB,GAAG,2BAA2B,GAAG,0BAA0B,GAAG,uBAAuB,GAAG,sBAAsB,GAAG,yBAAyB,GAAG,kBAAkB;AACtL,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,0BAA0B,mBAAO,CAAC,EAAiB;AACnD,eAAe,mBAAO,CAAC,EAAkB;AACzC,sBAAsB,mBAAO,CAAC,EAAmC;AACjE,4BAA4B,mBAAO,CAAC,EAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;AC5Ka;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;;;;;;;ACRrD;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,sBAAsB,GAAG,0BAA0B,GAAG,qBAAqB,GAAG,sBAAsB,GAAG,oBAAoB;AAC9N,oBAAoB,mBAAO,CAAC,EAA4B;AACxD,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,0BAA0B,mBAAO,CAAC,EAAiB;AACnD,qBAAqB,mBAAO,CAAC,EAAc;AAC3C,4BAA4B,mBAAO,CAAC,EAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC,+CAA+C;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iCAAiC,+CAA+C;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;ACpqBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,yBAAyB,GAAG,gBAAgB,GAAG,iBAAiB,GAAG,gBAAgB,GAAG,iBAAiB,GAAG,iBAAiB;AACjJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,eAAe,gBAAgB,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA,CAAC,eAAe,gBAAgB,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;;;;;;;ACtDzD;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,eAAe,mBAAO,CAAC,EAAkB;AACzC,cAAc,mBAAO,CAAC,EAAiB;AACvC,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,aAAa,mBAAO,CAAC,EAAI;AACzB,eAAe,mBAAO,CAAC,EAAM;AAC7B,aAAa,mBAAO,CAAC,EAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB;AAC3E;AACA;AACA,4CAA4C,iBAAiB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,8BAA8B;AAClF;AACA;AACA;AACA;AACA;AACA,kEAAkE,qBAAqB;AACvF;AACA;AACA;AACA;AACA;AACA,sEAAsE,qBAAqB;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,8BAA8B;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,SAAS;AACpF;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB;AACA;AACA;;;;;;;ACjIa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,0BAA0B,mBAAO,CAAC,EAAmB;AACrD,2BAA2B,mBAAO,CAAC,EAAoB;AACvD;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;ACtBa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,aAAa,mBAAO,CAAC,EAAM;AAC3B,aAAa,mBAAO,CAAC,EAAI;AACzB,eAAe,mBAAO,CAAC,EAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,cAAc,WAAW,iBAAiB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,qBAAqB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,WAAW,IAAI,mBAAmB;AACpF,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA,2CAA2C,UAAU,GAAG,UAAU;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;;;;;;AC3FA;;;;;;ACAA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,mBAAmB,mBAAO,CAAC,EAAU;AACrC,2BAA2B,mBAAO,CAAC,EAA+B;AAClE,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,eAAe,mBAAO,CAAC,EAAkB;AACzC,wBAAwB,mBAAO,CAAC,EAA+B;AAC/D,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,oCAAoC;AACzF;AACA;AACA;AACA;AACA,yDAAyD,cAAc,IAAI,6CAA6C;AACxH,qEAAqE,SAAS;AAC9E;AACA;AACA;AACA,wDAAwD,oCAAoC;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,IAAI,KAAK,wCAAwC;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uBAAuB,KAAK,wCAAwC;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,uBAAuB,KAAK,wCAAwC;AACxH;AACA;AACA;AACA;AACA,uBAAuB;AACvB,uBAAuB;AACvB;AACA;AACA;AACA;;;;;;;AC7FA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,WAAW;AAC/B,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA,WAAW;AACX;AACA;AACA,iBAAiB;AACjB;;;;;;;ACzEa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,+BAA+B,mBAAO,CAAC,EAAoC;AAC3E,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,kCAAkC,mBAAO,CAAC,EAAyC;AACnF,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,mCAAmC,mBAAO,CAAC,GAA2C;AACtF,mCAAmC,mBAAO,CAAC,GAA2C;AACtF,kCAAkC,mBAAO,CAAC,EAAuC;AACjF,qBAAqB,mBAAO,CAAC,EAA4B;AACzD,kCAAkC,mBAAO,CAAC,GAAuC;AACjF,kCAAkC,mBAAO,CAAC,GAAyC;AACnF;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;;;;;;;AC5Da;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,aAAa,mBAAO,CAAC,EAAM;AAC3B,WAAW,mBAAO,CAAC,EAAI;AACvB,iBAAiB,mBAAO,CAAC,CAAa;AACtC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,oBAAoB,mBAAO,CAAC,EAAiC;AAC7D,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,sDAAsD,iCAAiC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,aAAa;AAC1E,mEAAmE,aAAa;AAChF;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yDAAyD,iCAAiC;AAC1F;AACA;AACA;AACA;AACA;AACA,yDAAyD,wBAAwB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,aAAa;AAC3E;AACA;AACA;AACA;AACA;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,iCAAiC;AAC3F;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,MAAM;AAClE,mEAAmE,aAAa,GAAG,eAAe;AAClG;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,wDAAwD,iCAAiC;AACzF;AACA;AACA;AACA;AACA;AACA,0DAA0D,wBAAwB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,MAAM;AAClE,mEAAmE,aAAa,GAAG,eAAe;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iCAAiC;AACzF;AACA;AACA;AACA;AACA;AACA,0DAA0D,wBAAwB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,MAAM;AACrE,mEAAmE,aAAa,GAAG,eAAe;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,wDAAwD,iCAAiC;AACzF;AACA;AACA;AACA;AACA;AACA,wDAAwD,wBAAwB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,aAAa;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yDAAyD,iCAAiC;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,mEAAmE,aAAa;AAChF;AACA,4DAA4D,qBAAqB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2DAA2D;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,0BAA0B;AAC1B;AACA;AACA;;;;;;;AChca;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kCAAkC;AAClC,iBAAiB,mBAAO,CAAC,CAAa;AACtC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,+BAA+B,mBAAO,CAAC,EAAwC;AAC/E,kCAAkC,mBAAO,CAAC,EAA2C;AACrF,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;;;;;;AChEa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,sCAAsC,mBAAO,CAAC,EAAqC;AACnF,iBAAiB,mBAAO,CAAC,CAAa;AACtC,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,yBAAyB,mBAAO,CAAC,GAA0B;AAC3D,mBAAmB,mBAAO,CAAC,EAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,wDAAwD;AACzH;AACA;AACA;AACA;AACA,qEAAqE,qBAAqB;AAC1F;AACA;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,iGAAiG;AAClK;AACA;AACA;AACA;AACA,sEAAsE,qBAAqB;AAC3F;AACA;AACA;AACA;AACA;AACA,6DAA6D,iCAAiC;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B;AACA;AACA;;;;;;;AClFa;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B,GAAG,sBAAsB;AACpD,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,eAAe,mBAAO,CAAC,EAAkB;AACzC;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;;;;;;;AClCd;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;ACRjB;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B;AAC9B,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,kCAAkC,mBAAO,CAAC,GAA2C;AACrF,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,qBAAqB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,IAAI,IAAI,UAAU;AAChG;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA;AACA;;;;;;;ACxEa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qCAAqC;AACrC,uBAAuB,mBAAO,CAAC,EAAuC;AACtE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA,qCAAqC;AACrC,qCAAqC;AACrC;AACA;;;;;;;AChBa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,kBAAkB,mBAAO,CAAC,GAAiB;AAC3C,aAAa,mBAAO,CAAC,EAAI;AACzB,uBAAuB,mBAAO,CAAC,GAAuB;AACtD,gCAAgC,mBAAO,CAAC,GAAuC;AAC/E,wBAAwB,mBAAO,CAAC,GAA6B;AAC7D,mCAAmC,mBAAO,CAAC,GAA2C;AACtF,qBAAqB,mBAAO,CAAC,EAA4B;AACzD;AACA;AACA,mBAAmB;AACnB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC9EA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa;AACb,kBAAkB,mBAAO,CAAC,GAAS;AACnC;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;;;;;;ACnDA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,iBAAiB,mBAAO,CAAC,CAAa;AACtC,eAAe,mBAAO,CAAC,CAAkB;AACzC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,GAAiC;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;;;;;;AC9Ca;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB,iBAAiB,mBAAO,CAAC,CAAa;AACtC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,4BAA4B,mBAAO,CAAC,GAA2B;AAC/D,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,aAAa,mBAAO,CAAC,EAAI;AACzB,eAAe,mBAAO,CAAC,EAAM;AAC7B,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,iCAAiC;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG,eAAe;AAChH;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,KAAK;AAClF,sFAAsF,iBAAiB;AACvG;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iCAAiC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,qBAAqB;AAC7E;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yDAAyD,iCAAiC;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,kBAAkB;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA;;;;;;;AClJa;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,iBAAiB,mBAAO,CAAC,CAAa;AACtC,aAAa,mBAAO,CAAC,EAAI;AACzB,kBAAkB,mBAAO,CAAC,GAAY;AACtC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,wBAAwB,mBAAO,CAAC,GAAe;AAC/C,eAAe,mBAAO,CAAC,EAAM;AAC7B,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK;AACzD;AACA,2FAA2F,KAAK;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yBAAyB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,iCAAiC;AACrF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,iCAAiC;AACjF;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK,IAAI,OAAO;AACpE,uDAAuD,8CAA8C;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,+BAA+B;AAC3F;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,gEAAgE,iBAAiB;AACjF;AACA;AACA,gDAAgD,iCAAiC;AACjF;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B;AACA;AACA;;;;;;;AC9HA;;;;;;ACAA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,kBAAkB,mBAAO,CAAC,GAAiB;AAC3C,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,aAAa,mBAAO,CAAC,EAAI;AACzB,gCAAgC,mBAAO,CAAC,GAAgC;AACxE,iCAAiC,mBAAO,CAAC,GAAwC;AACjF,yBAAyB,mBAAO,CAAC,GAA8B;AAC/D,4BAA4B,mBAAO,CAAC,GAAoC;AACxE,kCAAkC,mBAAO,CAAC,GAA0C;AACpF,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,iCAAiC,mBAAO,CAAC,GAAsC;AAC/E,kCAAkC,mBAAO,CAAC,GAA0C;AACpF,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,gCAAgC,mBAAO,CAAC,GAAgC;AACxE,4BAA4B,mBAAO,CAAC,GAA4B;AAChE,qBAAqB,mBAAO,CAAC,EAA4B;AACzD;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7Ha;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B,GAAG,qBAAqB;AACnD,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,8CAA8C;AACzE;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA,qBAAqB;AACrB;AACA;AACA,2BAA2B;AAC3B;;;;;;;ACtEa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B;AAC5B,iBAAiB,mBAAO,CAAC,CAAa;AACtC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,yBAAyB,mBAAO,CAAC,GAAkC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;;;;;;;ACnDa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,iBAAiB,mBAAO,CAAC,CAAa;AACtC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,YAAY,mBAAO,CAAC,GAAK;AACzB,wBAAwB,mBAAO,CAAC,GAAe;AAC/C,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,eAAe,mBAAO,CAAC,GAAQ;AAC/B,aAAa,mBAAO,CAAC,EAAI;AACzB,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,aAAa,mBAAO,CAAC,GAAI;AACzB,eAAe,mBAAO,CAAC,EAAM;AAC7B,wBAAwB,mBAAO,CAAC,GAAyB;AACzD,qCAAqC,mBAAO,CAAC,GAAoC;AACjF,sCAAsC,mBAAO,CAAC,GAAqC;AACnF,6BAA6B,mBAAO,CAAC,EAAqC;AAC1E,gCAAgC,mBAAO,CAAC,GAA+B;AACvE,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,IAAI;AAC3E;AACA;AACA,wFAAwF,IAAI;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,IAAI,MAAM,kCAAkC;AACnH,kFAAkF,IAAI;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,eAAe;AACzF;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,kEAAkE,MAAM;AACxE,2FAA2F,eAAe;AAC1G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0DAA0D,wBAAwB;AAClF;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,+CAA+C,GAAG,aAAa,GAAG,eAAe;AACtH,+DAA+D,cAAc;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,mCAAmC;AACnG,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,MAAM;AACjE,gEAAgE,iBAAiB,IAAI,gBAAgB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,iBAAiB;AACjG;AACA;AACA,qFAAqF,iBAAiB;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,iCAAiC;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,aAAa;AACnF;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,kEAAkE,iCAAiC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,YAAY;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,iCAAiC;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,wEAAwE,IAAI;AAC5E;AACA;AACA;AACA,4CAA4C,+BAA+B;AAC3E,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,yEAAyE,qBAAqB;AAC9F,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,iCAAiC;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,qGAAqG,eAAe,OAAO,aAAa;AACxI,2EAA2E,IAAI;AAC/E;AACA;AACA;AACA,4CAA4C,+BAA+B;AAC3E,iBAAiB;AACjB;AACA,aAAa;AACb;AACA,mFAAmF,eAAe;AAClG,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,iCAAiC;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,iBAAiB;AACtG;AACA;AACA;AACA;AACA;AACA,2DAA2D,iCAAiC;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iCAAiC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,iCAAiC;AAC1F;AACA;AACA;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxYA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,oBAAoB,GAAG,qBAAqB;AAClE,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,kFAAkF,aAAa;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,SAAS;AACpF;AACA;AACA,mBAAmB;;;;;;;AC5IN;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,iBAAiB,mBAAO,CAAC,CAAa;AACtC,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,6BAA6B,mBAAO,CAAC,EAA8C;AACnF,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,GAAe;AAC/C,aAAa,mBAAO,CAAC,EAAI;AACzB,aAAa,mBAAO,CAAC,GAAI;AACzB,eAAe,mBAAO,CAAC,EAAM;AAC7B,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,cAAc;AACpE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,oDAAoD,cAAc,SAAS,0BAA0B,YAAY,iBAAiB;AAClI,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qDAAqD,gBAAgB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kDAAkD,eAAe,EAAE,0BAA0B,aAAa,OAAO,EAAE,oBAAoB,SAAS,QAAQ,EAAE,yBAAyB;AACnL,qBAAqB;AACrB;AACA;AACA;AACA;AACA,sDAAsD,iCAAiC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kDAAkD,mBAAmB,EAAE,yBAAyB;AAChG,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yDAAyD,iCAAiC;AAC1F;AACA;AACA;AACA;AACA,uBAAuB;AACvB,uBAAuB;AACvB;AACA;AACA;;;;;;;AC1Fa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,iBAAiB,mBAAO,CAAC,CAAa;AACtC,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,iCAAiC,mBAAO,CAAC,GAA0C;AACnF,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;AACnF;AACA;AACA;AACA,oEAAoE,qBAAqB;AACzF;AACA;AACA;AACA;AACA;AACA,2DAA2D,iCAAiC;AAC5F;AACA;AACA;AACA;AACA;AACA,wDAAwD,wBAAwB;AAChF;AACA;AACA;AACA,iEAAiE,qBAAqB;AACtF;AACA;AACA;AACA;AACA;AACA,wDAAwD,iCAAiC;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,IAAI,IAAI,UAAU;AAC/F;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B;AACA;AACA;AACA;;;;;;;AChGa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oCAAoC;AACpC,uBAAuB,mBAAO,CAAC,EAAuC;AACtE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA,oCAAoC;AACpC,oCAAoC;AACpC;AACA;;;;;;;AChBa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,mBAAmB,mBAAO,CAAC,EAAU;AACrC,kBAAkB,mBAAO,CAAC,GAAiB;AAC3C,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,kBAAkB,mBAAO,CAAC,GAAS;AACnC,eAAe,mBAAO,CAAC,EAAkB;AACzC,gCAAgC,mBAAO,CAAC,GAAoC;AAC5E,gCAAgC,mBAAO,CAAC,GAAoC;AAC5E,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,SAAS,oBAAoB;AACvF;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,+EAA+E;AACjL;AACA;AACA;AACA,kEAAkE,+BAA+B;AACjG,8DAA8D,SAAS,kBAAkB;AACzF;AACA;AACA;AACA,+DAA+D,0CAA0C;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,2EAA2E;AAC7K;AACA;AACA;AACA,kEAAkE,2BAA2B;AAC7F,8DAA8D,SAAS,kBAAkB;AACzF;AACA;AACA;AACA,2DAA2D,0CAA0C;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,eAAe;AACjE;AACA;AACA,kDAAkD,0CAA0C;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,0CAA0C;AAC9F;AACA;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;;;;;;AClHa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,kBAAkB,mBAAO,CAAC,GAAS;AACnC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;;;;;;AC/Ca;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB,GAAG,iBAAiB;AAC3C,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,iBAAiB;AACjB;AACA;AACA,uBAAuB;AACvB;;;;;;;ACxDa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,kCAAkC,mBAAO,CAAC,GAAyC;AACnF,0BAA0B,mBAAO,CAAC,GAA+B;AACjE,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,gCAAgC,mBAAO,CAAC,GAAwC;AAChF,gCAAgC,mBAAO,CAAC,GAAwC;AAChF,kCAAkC,mBAAO,CAAC,GAAyC;AACnF,iCAAiC,mBAAO,CAAC,GAAiC;AAC1E,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,qBAAqB,mBAAO,CAAC,EAA4B;AACzD;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;;;;;;;ACtEa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kCAAkC;AAClC,iBAAiB,mBAAO,CAAC,CAAa;AACtC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,0BAA0B,mBAAO,CAAC,GAAmC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;;;;;;ACtDa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,8BAA8B,mBAAO,CAAC,GAA6B;AACnE,uCAAuC,mBAAO,CAAC,GAAsC;AACrF,yBAAyB,mBAAO,CAAC,GAA0B;AAC3D,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,wDAAwD,qDAAqD;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,sDAAsD;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kDAAkD;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0CAA0C;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,uDAAuD;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,0CAA0C;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,oEAAoE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0CAA0C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iEAAiE;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kEAAkE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mDAAmD;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,0CAA0C;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,sDAAsD;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjRa;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,sBAAsB,GAAG,qBAAqB;AACrE,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;;;;;;;AC3GP;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,aAAa,mBAAO,CAAC,GAAW;AAChC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,wBAAwB,mBAAO,CAAC,GAAe;AAC/C,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,4BAA4B,wBAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,wBAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0CAA0C;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,0CAA0C;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wBAAwB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0CAA0C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,WAAW;AAC3D,kEAAkE,WAAW;AAC7E;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,YAAY,KAAK,IAAI,IAAI,sBAAsB;AACnH;AACA;AACA,+DAA+D,WAAW;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,SAAS,IAAI,sBAAsB;AAC7F;AACA;AACA;AACA;AACA,6DAA6D,0CAA0C;AACvG;AACA;AACA;AACA,kEAAkE,KAAK;AACvE;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,0CAA0C;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA,0BAA0B,oCAAoC;AAC9D,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,0CAA0C;AAClH;AACA;AACA;AACA,wEAAwE,yBAAyB;AACjG;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gEAAgE,0CAA0C;AAC1G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,SAAS;AACrD;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA,6CAA6C,SAAS;AACtD;AACA;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA,kFAAkF,KAAK;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;;;;;;;ACrcA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,mBAAmB,mBAAO,CAAC,EAAU;AACrC,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,eAAe,mBAAO,CAAC,EAAkB;AACzC,iCAAiC,mBAAO,CAAC,GAAqC;AAC9E,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,iBAAiB,mBAAO,CAAC,CAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA,yEAAyE,SAAS;AAClF,yDAAyD,cAAc,IAAI,6CAA6C;AACxH;AACA;AACA;AACA,4DAA4D,0CAA0C;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,0CAA0C;AACtG;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,eAAe;AACjE;AACA;AACA,qDAAqD,0CAA0C;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0CAA0C;AACjG;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA;;;;;;;ACrFa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B,GAAG,sBAAsB;AACrD,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,4BAA4B;AAC5B;;;;;;;ACpCa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,0BAA0B,mBAAO,CAAC,GAAmC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;;;;;;;ACxCa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,+BAA+B,mBAAO,CAAC,GAAsC;AAC7E,+BAA+B,mBAAO,CAAC,GAAoC;AAC3E,4BAA4B,mBAAO,CAAC,GAAiC;AACrE,8BAA8B,mBAAO,CAAC,GAAmC;AACzE,8BAA8B,mBAAO,CAAC,GAAmC;AACzE,iCAAiC,mBAAO,CAAC,GAAsC;AAC/E,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,iBAAiB,mBAAO,CAAC,CAAa;AACtC,eAAe,mBAAO,CAAC,EAAM;AAC7B,gCAAgC,mBAAO,CAAC,GAAuC;AAC/E,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,gCAAgC,mBAAO,CAAC,GAAqC;AAC7E,qBAAqB,mBAAO,CAAC,EAA4B;AACzD;AACA;AACA,mBAAmB;AACnB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;;;;;;;ACjFa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,eAAe,mBAAO,CAAC,GAAQ;AAC/B,kBAAkB,mBAAO,CAAC,GAAS;AACnC,8BAA8B,mBAAO,CAAC,GAAuC;AAC7E,+BAA+B,mBAAO,CAAC,GAAwC;AAC/E,aAAa,mBAAO,CAAC,EAAI;AACzB,4BAA4B,mBAAO,CAAC,GAAqC;AACzE,iCAAiC,mBAAO,CAAC,GAA0C;AACnF,8BAA8B,mBAAO,CAAC,GAAuC;AAC7E,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wFAAwF,qBAAqB,IAAI,wCAAwC;AACzJ;AACA;AACA;AACA;AACA,kEAAkE,WAAW,IAAI,uBAAuB;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,WAAW;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uFAAuF,qBAAqB,IAAI,wCAAwC;AACxJ;AACA;AACA;AACA;AACA,iEAAiE,WAAW,IAAI,uBAAuB;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,WAAW;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uFAAuF,qBAAqB,IAAI,wCAAwC;AACxJ;AACA;AACA;AACA;AACA,+DAA+D,WAAW,IAAI,uBAAuB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,MAAM,aAAa,EAAE,IAAI,EAAE;AAC/F;AACA;AACA;AACA,iEAAiE,MAAM,aAAa,SAAS;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,MAAM,YAAY,WAAW,GAAG,WAAW,UAAU,QAAQ,kBAAkB,eAAe,GAAG,eAAe,eAAe,YAAY;AAChN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,MAAM,YAAY,UAAU,GAAG,UAAU,UAAU,OAAO,kBAAkB,eAAe,GAAG,eAAe,eAAe,YAAY;AAC7M;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,MAAM,YAAY,QAAQ,UAAU,KAAK;AACtG;AACA;AACA;AACA;AACA,yEAAyE,MAAM;AAC/E;AACA;AACA;AACA,wEAAwE,MAAM;AAC9E;AACA;AACA;AACA;AACA,kEAAkE,MAAM,IAAI,KAAK;AACjF;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,WAAW;AACjF;AACA;AACA,SAAS;AACT;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,+CAA+C;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,+CAA+C;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,+CAA+C;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;;;;;;;AC1SA;;;;;;ACAA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,eAAe,mBAAO,CAAC,EAAM;AAC7B,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,mBAAmB,mBAAO,CAAC,GAAiC;AAC5D,oBAAoB,mBAAO,CAAC,GAA4B;AACxD,aAAa,mBAAO,CAAC,GAAI;AACzB,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,mBAAmB;AAClH,gGAAgG,oBAAoB;AACpH,iGAAiG,qBAAqB;AACtH,sDAAsD,4BAA4B;AAClF;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,0CAA0C;AAC9G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,0CAA0C;AAC7G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,0CAA0C;AAC9H;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,0CAA0C;AAClH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,0CAA0C;AACjH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,0CAA0C;AAC/G;AACA;AACA,SAAS;AACT;AACA;AACA,yBAAyB;AACzB,yBAAyB;AACzB;AACA;AACA;AACA;;;;;;;AC5Ja;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB,GAAG,iBAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxMa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,MAAM;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;;;;;;AC9DH;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,cAAc,mBAAO,CAAC,GAAO;AAC7B,eAAe,mBAAO,CAAC,GAAQ;AAC/B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,aAAa,mBAAO,CAAC,GAAI;AACzB,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,eAAe,mBAAO,CAAC,EAAM;AAC7B,oBAAoB,mBAAO,CAAC,EAA4B;AACxD,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,mBAAmB,mBAAO,CAAC,GAAkC;AAC7D,oBAAoB,mBAAO,CAAC,GAA4B;AACxD,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,mBAAmB;AAC9F;AACA;AACA;AACA,2CAA2C,EAAE;AAC7C;AACA;AACA;AACA;AACA;AACA,iGAAiG,qBAAqB;AACtH,uGAAuG,2BAA2B;AAClI,gGAAgG,oBAAoB;AACpH,kGAAkG,sBAAsB;AACxH,qGAAqG,0BAA0B;AAC/H,uDAAuD,4BAA4B;AACnF;AACA;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F;AAC7F;AACA;AACA;AACA,yDAAyD,0CAA0C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,+BAA+B;AAC9E;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,cAAc;AAClG;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,mBAAmB,cAAc,UAAU,YAAY,OAAO;AAClH;AACA;AACA,sDAAsD,wCAAwC;AAC9F;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,mBAAmB,eAAe,UAAU,eAAe,UAAU,YAAY,aAAa;AAC1J;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,0CAA0C;AACxH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,0CAA0C;AACnH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,0CAA0C;AACxH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,0CAA0C;AAC5G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,MAAM;AACvE;AACA;AACA;AACA,mEAAmE,0CAA0C;AAC7G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iCAAiC;AACrE,4CAA4C,MAAM,GAAG,wBAAwB,OAAO,MAAM;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,0CAA0C;AAC1G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,0CAA0C;AAC1G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,0CAA0C;AACrH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,0CAA0C;AACpH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,0CAA0C;AACvH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,0CAA0C;AAC/G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,0CAA0C;AAC/G;AACA;AACA,SAAS;AACT;AACA;AACA,0BAA0B;AAC1B,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;;;;;;;AC1YA;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B,GAAG,0BAA0B,GAAG,kBAAkB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClZa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,mBAAmB,mBAAO,CAAC,GAA+B;AAC1D,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,0CAA0C;AACjH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,0CAA0C;AAC1G;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB;AACvB,uBAAuB;AACvB;AACA;AACA;;;;;;;ACvDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB,GAAG,eAAe;AACzC;AACA;AACA;AACA;AACA,CAAC,cAAc,eAAe,eAAe;AAC7C,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B;AAC5B;AACA;AACA,4BAA4B;;;;;;;ACLf;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB;AACA;AACA,yBAAyB;;;;;;;ACLZ;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,+BAA+B,mBAAO,CAAC,GAAwC;AAC/E,mBAAmB,mBAAO,CAAC,EAAsB;AACjD;AACA;AACA;AACA;AACA,qDAAqD;AACrD,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;;;;;;;AClDa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,uBAAuB,mBAAO,CAAC,EAAuC;AACtE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;;;;;;;AChBA;;;;;;ACAA;;;;;;ACAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,uBAAuB,mBAAO,CAAC,GAA4B;AAC3D,qBAAqB,mBAAO,CAAC,EAA4B;AACzD,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,sBAAsB,mBAAO,CAAC,GAAsB;AACpD,6BAA6B,mBAAO,CAAC,GAAqC;AAC1E,+BAA+B,mBAAO,CAAC,GAAsC;AAC7E;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;;;;;;;ACvDa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,oCAAoC,mBAAO,CAAC,GAAmC;AAC/E,iBAAiB,mBAAO,CAAC,CAAa;AACtC,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,6BAA6B,mBAAO,CAAC,GAA8B;AACnE,sBAAsB,mBAAO,CAAC,GAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,iCAAiC;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,iCAAiC;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,oBAAoB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,0CAA0C;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,iCAAiC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,iCAAiC;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,+CAA+C;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+CAA+C;AAC/E;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,4DAA4D,iCAAiC;AAC7F;AACA;AACA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,iCAAiC;AACtF;AACA;AACA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,iCAAiC;AACrF;AACA;AACA;AACA;AACA,mBAAmB;AACnB,mBAAmB;AACnB;AACA;AACA;AACA;;;;;;;ACzVa;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,eAAe,mBAAO,CAAC,EAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;;;;;;;ACvBN;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,eAAe,mBAAO,CAAC,EAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;AClBJ;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,kBAAkB,GAAG,wBAAwB,GAAG,kBAAkB;AAC7F,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,2BAA2B,gCAAgC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB;AAClB;AACA;AACA,KAAK;AACL;AACA,wBAAwB;AACxB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,2BAA2B,+CAA+C;AAC1E;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB;AAClB;AACA;AACA,KAAK;AACL;AACA,wBAAwB;;;;;;;ACzFX;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB;AACxB,mBAAmB,mBAAO,CAAC,EAAkB;AAC7C,mBAAmB,mBAAO,CAAC,EAAU;AACrC,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,sBAAsB,mBAAO,CAAC,GAA0B;AACxD,sBAAsB,mBAAO,CAAC,GAA0B;AACxD,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wHAAwH;AAC5I;AACA,+DAA+D,oBAAoB;AACnF;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,0CAA0C;AACpG;AACA;AACA;AACA;AACA;AACA,uDAAuD,IAAI;AAC3D;AACA;AACA,yDAAyD,IAAI;AAC7D;AACA;AACA,2DAA2D,0CAA0C;AACrG;AACA;AACA;AACA;AACA;AACA,8DAA8D,eAAe;AAC7E;AACA;AACA,gEAAgE,eAAe;AAC/E;AACA;AACA,6DAA6D,0CAA0C;AACvG;AACA;AACA;AACA;AACA;AACA,uDAAuD,IAAI;AAC3D;AACA;AACA,yDAAyD,IAAI;AAC7D;AACA;AACA,2DAA2D,0CAA0C;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,gEAAgE,0CAA0C;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe,IAAI,kCAAkC;AACrF;AACA,SAAS;AACT;AACA,qDAAqD,eAAe;AACpE;AACA;AACA;AACA;AACA,oCAAoC,eAAe,IAAI,kCAAkC;AACzF;AACA,aAAa;AACb;AACA,yDAAyD,eAAe;AACxE;AACA;AACA,8DAA8D,0CAA0C;AACxG;AACA;AACA;AACA;AACA,wBAAwB;AACxB,wBAAwB;AACxB;AACA;AACA;AACA;AACA;;;;;;;ACrLa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B;AAC/B,iBAAiB,mBAAO,CAAC,CAAa;AACtC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,uBAAuB,mBAAO,CAAC,GAAgC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;;;;;;;ACzDa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kCAAkC;AAClC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,6BAA6B,mBAAO,CAAC,EAA0C;AAC/E,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,iBAAiB,mBAAO,CAAC,CAAa;AACtC,0BAA0B,mBAAO,CAAC,EAAiC;AACnE,kCAAkC,mBAAO,CAAC,EAA2C;AACrF,kCAAkC,mBAAO,CAAC,GAA2C;AACrF,kBAAkB,mBAAO,CAAC,GAAuC;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,iCAAiC;AACjG;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;;;;;;;ACrFa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B,GAAG,wBAAwB,GAAG,yBAAyB;AACpF,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,0BAA0B,mBAAO,CAAC,EAAiB;AACnD;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;UCnEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;ACtBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,mBAAO,CAAC,CAAc;AACrC,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,iBAAiB,mBAAO,CAAC,CAAa;AACtC,eAAe,mBAAO,CAAC,EAAM;AAC7B,qBAAqB,mBAAO,CAAC,EAAkB;AAC/C,yBAAyB,mBAAO,CAAC,EAA0B;AAC3D,uBAAuB,mBAAO,CAAC,GAAsB;AACrD,wBAAwB,mBAAO,CAAC,GAAwB;AACxD,yBAAyB,mBAAO,CAAC,GAA0B;AAC3D,uBAAuB,mBAAO,CAAC,GAA0B;AACzD,mBAAmB,mBAAO,CAAC,GAAa;AACxC,kBAAkB,mBAAO,CAAC,GAAwB;AAClD,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,mBAAmB,mBAAO,CAAC,EAAsB;AACjD,sBAAsB,mBAAO,CAAC,GAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,sCAAsC,eAAe;AACrD;AACA,4CAA4C,+BAA+B;AAC3E;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC","sources":["webpack://frs/external commonjs \"@nestjs/core\"","webpack://frs/external commonjs \"@nestjs/config\"","webpack://frs/external commonjs \"@nestjs/microservices\"","webpack://frs/./libs/common/src/index.ts","webpack://frs/./libs/common/src/grpc/index.ts","webpack://frs/./libs/common/src/grpc/proto/index.ts","webpack://frs/./libs/common/src/grpc/proto/user/user.ts","webpack://frs/./libs/common/src/grpc/proto/auth/auth.ts","webpack://frs/./libs/common/src/grpc/proto/amr/amr.ts","webpack://frs/./libs/common/src/grpc/proto/redis/redis.ts","webpack://frs/./libs/common/src/grpc/proto/config/config.ts","webpack://frs/./libs/common/src/grpc/proto/control/control.ts","webpack://frs/./libs/common/src/grpc/proto/code/code.ts","webpack://frs/./libs/common/src/grpc/proto/move/move.ts","webpack://frs/./libs/common/src/grpc/proto/localization/localization.ts","webpack://frs/./libs/common/src/grpc/proto/network/network.ts","webpack://frs/./libs/common/src/grpc/proto/map/map.ts","webpack://frs/./libs/common/src/grpc/proto/onvif/onvif.ts","webpack://frs/./libs/common/src/grpc/proto/task/task.ts","webpack://frs/./libs/common/src/grpc/proto/setting/setting.ts","webpack://frs/./libs/common/src/grpc/proto/sound/sound.ts","webpack://frs/./libs/common/src/grpc/proto/cobot/cobot.ts","webpack://frs/./libs/common/src/grpc/proto/log/log.ts","webpack://frs/./libs/common/src/grpc/proto/update/update.ts","webpack://frs/./libs/common/src/grpc/proto/tcp/tcp.ts","webpack://frs/./libs/common/src/grpc/proto/test/test.ts","webpack://frs/./libs/common/src/interceptor/index.ts","webpack://frs/./libs/common/src/interceptor/grpc.interceptor.ts","webpack://frs/external commonjs \"rxjs\"","webpack://frs/./libs/common/src/log/index.ts","webpack://frs/./libs/common/src/log/error-to-json.ts","webpack://frs/external node-commonjs \"path\"","webpack://frs/./apps/host/src/map/map.module.ts","webpack://frs/external commonjs \"@nestjs/common\"","webpack://frs/./apps/host/src/map/adapter/input/map.grpc.controller.ts","webpack://frs/./libs/common/src/log/saveLog.service.ts","webpack://frs/external commonjs \"winston\"","webpack://frs/external commonjs \"winston-daily-rotate-file\"","webpack://frs/./libs/common/src/util/index.ts","webpack://frs/./libs/common/src/util/url.util.ts","webpack://frs/external commonjs \"uuid\"","webpack://frs/./libs/common/src/util/date.util.ts","webpack://frs/external commonjs \"date-fns\"","webpack://frs/./libs/common/src/util/file/file.util.ts","webpack://frs/external node-commonjs \"fs\"","webpack://frs/external commonjs \"unzipper\"","webpack://frs/external commonjs \"iconv-lite\"","webpack://frs/external commonjs \"archiver\"","webpack://frs/external commonjs \"csv\"","webpack://frs/external node-commonjs \"zlib\"","webpack://frs/./libs/common/src/exception/rpc-code.exception.ts","webpack://frs/./libs/common/src/grpc/constant/index.ts","webpack://frs/./libs/common/src/grpc/constant/grpc-code.constant.ts","webpack://frs/./libs/common/src/util/parse.util.ts","webpack://frs/./libs/common/src/util/crypto.util.ts","webpack://frs/./libs/common/src/util/validation.util.ts","webpack://frs/external commonjs \"chalk\"","webpack://frs/./apps/host/src/map/application/map.service.ts","webpack://frs/./apps/host/src/map/port/map.database.output-port.ts","webpack://frs/./apps/host/src/map/port/map.slamnav.output-port.ts","webpack://frs/./apps/host/src/map/domain/map-command.domain.ts","webpack://frs/external commonjs \"form-data\"","webpack://frs/./libs/common/src/util/file/zip.util.ts","webpack://frs/external commonjs \"adm-zip\"","webpack://frs/external commonjs \"axios\"","webpack://frs/./apps/host/src/map/port/map.file.output-port.ts","webpack://frs/./apps/host/src/map/adapter/output/map.socketio.adapter.ts","webpack://frs/./libs/common/src/constant/index.ts","webpack://frs/./libs/common/src/constant/service.constant.ts","webpack://frs/./libs/common/src/constant/type.ts","webpack://frs/./libs/common/src/constant/environment/index.ts","webpack://frs/./libs/common/src/constant/environment/system.constant.ts","webpack://frs/./libs/common/src/constant/message/index.ts","webpack://frs/./libs/common/src/constant/message/message.constant.ts","webpack://frs/./apps/host/src/map/application/map.pending.service.ts","webpack://frs/./libs/common/src/util/pending/pending.util.ts","webpack://frs/./apps/host/src/map/adapter/input/map.mqtt.controller.ts","webpack://frs/./libs/common/src/model/dto/file/map/mapping.dto.ts","webpack://frs/external commonjs \"@nestjs/swagger\"","webpack://frs/external commonjs \"class-validator\"","webpack://frs/external commonjs \"class-transformer\"","webpack://frs/./libs/common/src/model/dto/file/map/load.dto.ts","webpack://frs/./libs/common/src/model/dto/description.ts","webpack://frs/./libs/common/src/model/dto/slamnav/type/status.type.ts","webpack://frs/./libs/common/src/model/dto/slamnav/type/state.type.ts","webpack://frs/external commonjs \"pg\"","webpack://frs/./apps/host/src/map/adapter/output/map.file.adapter.ts","webpack://frs/./libs/common/src/log/log.module.ts","webpack://frs/./libs/common/src/log/cleanLog.service.ts","webpack://frs/external commonjs \"@nestjs/schedule\"","webpack://frs/external commonjs \"@nestjs/mongoose\"","webpack://frs/./apps/host/src/map/adapter/output/map.mongo.adapter.ts","webpack://frs/external commonjs \"mongoose\"","webpack://frs/./apps/host/src/map/entity/map.mongo-entity.ts","webpack://frs/./apps/host/src/setting/setting.module.ts","webpack://frs/./apps/host/src/setting/application/setting-file.service.ts","webpack://frs/./apps/host/src/setting/adapter/input/setting.grpc.controller.ts","webpack://frs/./apps/host/src/setting/application/setting-slamnav.service.ts","webpack://frs/./apps/host/src/setting/port/setting.slamnav.output-port.ts","webpack://frs/./apps/host/src/setting/domain/setting.domain.ts","webpack://frs/./apps/host/src/setting/adapter/output/setting.postgres.adapter.ts","webpack://frs/./apps/host/src/setting/adapter/output/setting.socketio.adpater.ts","webpack://frs/./apps/host/src/setting/application/setting.pending.service.ts","webpack://frs/./apps/host/src/sound/sound.module.ts","webpack://frs/external commonjs \"@nestjs/typeorm\"","webpack://frs/./apps/host/src/sound/entity/sound.entity.ts","webpack://frs/external commonjs \"typeorm\"","webpack://frs/./apps/host/src/sound/adapter/input/sound.grpc.controller.ts","webpack://frs/./apps/host/src/sound/application/sound.service.ts","webpack://frs/./apps/host/src/sound/port/sound.output-port.ts","webpack://frs/./apps/host/src/sound/adapter/output/sound.play-sound.adapter.ts","webpack://frs/external commonjs \"play-sound\"","webpack://frs/external node-commonjs \"child_process\"","webpack://frs/./apps/host/src/update/update.module.ts","webpack://frs/./apps/host/src/update/entity/update-command.entity.ts","webpack://frs/./apps/host/src/update/adapter/input/update.grpc.controller.ts","webpack://frs/./apps/host/src/update/application/update.service.ts","webpack://frs/external node-commonjs \"net\"","webpack://frs/external node-commonjs \"crypto\"","webpack://frs/external node-commonjs \"os\"","webpack://frs/./apps/host/src/update/domain/update.domain.ts","webpack://frs/./apps/host/src/update/port/update.slamnav.output-port.ts","webpack://frs/./apps/host/src/update/port/update.database.output-port.ts","webpack://frs/./apps/host/src/update/port/update.sh.output-port.ts","webpack://frs/./apps/host/src/update/adapter/output/update.sh.adapter.ts","webpack://frs/./apps/host/src/update/adapter/output/update.socketio.adapter.ts","webpack://frs/./apps/host/src/update/application/update.pending.service.ts","webpack://frs/./apps/host/src/update/adapter/output/update.database.adapter.ts","webpack://frs/./apps/host/src/update/entity/update-version.entity.ts","webpack://frs/./apps/host/src/update/entity/update-log.entity.ts","webpack://frs/./apps/host/src/network/network.module.ts","webpack://frs/./apps/host/src/network/adapter/input/network.grpc.controller.ts","webpack://frs/./apps/host/src/network/application/network.service.ts","webpack://frs/./apps/host/src/network/port/network.output-port.ts","webpack://frs/./apps/host/src/network/port/network.database.output-port.ts","webpack://frs/./apps/host/src/network/domain/network.domain.ts","webpack://frs/./apps/host/src/network/adapter/output/network.nmcli.adapter.ts","webpack://frs/external commonjs \"node-wifi\"","webpack://frs/./apps/host/src/network/adapter/output/network.mongo.adapter.ts","webpack://frs/./apps/host/src/network/entity/network.command.entity.ts","webpack://frs/./apps/host/src/network/adapter/input/network.mqtt.controller.ts","webpack://frs/./apps/host/src/onvif/src/onvif.module.ts","webpack://frs/./apps/host/src/onvif/src/adapter/input/onvif.api.controller.ts","webpack://frs/external commonjs \"xml2js\"","webpack://frs/external commonjs \"express\"","webpack://frs/./apps/host/src/onvif/src/application/onvif.media.service.ts","webpack://frs/./libs/common/src/wsdl/media/template.ts","webpack://frs/./libs/common/src/util/wsdl.util.ts","webpack://frs/./apps/host/src/onvif/src/application/onvif.device.service.ts","webpack://frs/external node-commonjs \"dgram\"","webpack://frs/./libs/common/src/wsdl/device/template.ts","webpack://frs/./apps/host/src/onvif/src/application/onvif.ptz.service.ts","webpack://frs/./libs/common/src/wsdl/ptz/template.ts","webpack://frs/./apps/host/src/onvif/src/application/onvif.deviceio.service.ts","webpack://frs/./apps/host/src/onvif/src/application/onvif.event.service.ts","webpack://frs/./apps/host/src/onvif/src/adapter/input/onvif.mqtt.controller.ts","webpack://frs/./apps/host/src/onvif/src/application/onvif.pending.service.ts","webpack://frs/external commonjs \"body-parser\"","webpack://frs/external commonjs \"express-xml-bodyparser\"","webpack://frs/./apps/host/src/test/test.module.ts","webpack://frs/./apps/host/src/test/application/test.service.ts","webpack://frs/./apps/host/src/test/port/test.database.output-port.ts","webpack://frs/./apps/host/src/test/domain/test-record.domain.ts","webpack://frs/./apps/host/src/test/domain/test.domain.ts","webpack://frs/./apps/host/src/test/entity/test.entity.ts","webpack://frs/./apps/host/src/test/adapter/output/test.mongo.adapter.ts","webpack://frs/./apps/host/src/test/adapter/input/test.grpc.controller.ts","webpack://frs/./apps/host/src/setting/adapter/input/setting.mqtt.controller.ts","webpack://frs/./libs/common/src/model/dto/slamnav/cam.dto.ts","webpack://frs/webpack/bootstrap","webpack://frs/./apps/host/src/main.ts"],"sourcesContent":["module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/config\");","module.exports = require(\"@nestjs/microservices\");","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./grpc\"), exports);\n__exportStar(require(\"./interceptor\"), exports);\n__exportStar(require(\"./log\"), exports);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./proto/index\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestMicroservice = exports.TcpMicroservice = exports.UpdateMicroservice = exports.LogMicroservice = exports.CobotMicroservice = exports.SoundMicroservice = exports.SettingMicroservice = exports.TaskMicroservice = exports.OnvifMicroservice = exports.MapMicroservice = exports.NetworkMicroservice = exports.LocalizationMicroservice = exports.MoveMicroservice = exports.CodeMicroservice = exports.ControlMicroservice = exports.ConfigMicroservice = exports.RedisMicroservice = exports.AmrMicroservice = exports.AuthMicroservice = exports.UserMicroservice = void 0;\nexports.UserMicroservice = require(\"./user/user\");\nexports.AuthMicroservice = require(\"./auth/auth\");\nexports.AmrMicroservice = require(\"./amr/amr\");\nexports.RedisMicroservice = require(\"./redis/redis\");\nexports.ConfigMicroservice = require(\"./config/config\");\nexports.ControlMicroservice = require(\"./control/control\");\nexports.CodeMicroservice = require(\"./code/code\");\nexports.MoveMicroservice = require(\"./move/move\");\nexports.LocalizationMicroservice = require(\"./localization/localization\");\nexports.NetworkMicroservice = require(\"./network/network\");\nexports.MapMicroservice = require(\"./map/map\");\nexports.OnvifMicroservice = require(\"./onvif/onvif\");\nexports.TaskMicroservice = require(\"./task/task\");\nexports.SettingMicroservice = require(\"./setting/setting\");\nexports.SoundMicroservice = require(\"./sound/sound\");\nexports.CobotMicroservice = require(\"./cobot/cobot\");\nexports.LogMicroservice = require(\"./log/log\");\nexports.UpdateMicroservice = require(\"./update/update\");\nexports.TcpMicroservice = require(\"./tcp/tcp\");\nexports.TestMicroservice = require(\"./test/test\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.USER_GRPC_SERVICE_NAME = exports.USER_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.UserGrpcServiceControllerMethods = UserGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"user\";\nexports.USER_PACKAGE_NAME = \"user\";\nfunction UserGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"readUserList\",\n            \"readUser\",\n            \"readUserForLogin\",\n            \"createUser\",\n            \"updateUser\",\n            \"deleteUser\",\n            \"readUserToken\",\n            \"createUserToken\",\n            \"updateUserToken\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"UserGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"UserGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.USER_GRPC_SERVICE_NAME = \"UserGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AUTH_GRPC_SERVICE_NAME = exports.AUTH_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.AuthGrpcServiceControllerMethods = AuthGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"auth\";\nexports.AUTH_PACKAGE_NAME = \"auth\";\nfunction AuthGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\"join\", \"login\", \"refreshToken\"];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"AuthGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"AuthGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.AUTH_GRPC_SERVICE_NAME = \"AuthGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AMR_GRPC_SERVICE_NAME = exports.AMR_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.AmrGrpcServiceControllerMethods = AmrGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"amr\";\nexports.AMR_PACKAGE_NAME = \"amr\";\nfunction AmrGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\"readAmrList\", \"readAmr\", \"existsAmr\", \"createAmr\", \"updateAmr\", \"deleteAmr\"];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"AmrGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"AmrGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.AMR_GRPC_SERVICE_NAME = \"AmrGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.REDIS_ROBOT_CACHE_GRPC_SERVICE_NAME = exports.REDIS_SOCKET_CACHE_GRPC_SERVICE_NAME = exports.REDIS_PACKAGE_NAME = exports.SocketType = exports.RobotType = exports.protobufPackage = void 0;\nexports.RedisSocketCacheGrpcServiceControllerMethods = RedisSocketCacheGrpcServiceControllerMethods;\nexports.RedisRobotCacheGrpcServiceControllerMethods = RedisRobotCacheGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"redis\";\nvar RobotType;\n(function (RobotType) {\n    RobotType[RobotType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    RobotType[RobotType[\"MOBILE\"] = 1] = \"MOBILE\";\n    RobotType[RobotType[\"MANIPULATOR\"] = 2] = \"MANIPULATOR\";\n    RobotType[RobotType[\"SENSOR\"] = 3] = \"SENSOR\";\n    RobotType[RobotType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(RobotType || (exports.RobotType = RobotType = {}));\nvar SocketType;\n(function (SocketType) {\n    SocketType[SocketType[\"CLIENT\"] = 0] = \"CLIENT\";\n    SocketType[SocketType[\"AMR\"] = 1] = \"AMR\";\n    SocketType[SocketType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(SocketType || (exports.SocketType = SocketType = {}));\nexports.REDIS_PACKAGE_NAME = \"redis\";\nfunction RedisSocketCacheGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"readSocketCache\",\n            \"readSocketCacheList\",\n            \"createSocketCache\",\n            \"updateSocketCache\",\n            \"deleteSocketCache\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"RedisSocketCacheGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"RedisSocketCacheGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.REDIS_SOCKET_CACHE_GRPC_SERVICE_NAME = \"RedisSocketCacheGrpcService\";\nfunction RedisRobotCacheGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"readRobotCache\",\n            \"existsRobotCache\",\n            \"readRobotCacheList\",\n            \"createRobotCache\",\n            \"updateRobotCache\",\n            \"deleteRobotCache\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"RedisRobotCacheGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"RedisRobotCacheGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.REDIS_ROBOT_CACHE_GRPC_SERVICE_NAME = \"RedisRobotCacheGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONFIG_GRPC_SERVICE_NAME = exports.CONFIG_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.ConfigGrpcServiceControllerMethods = ConfigGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"config\";\nexports.CONFIG_PACKAGE_NAME = \"config\";\nfunction ConfigGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"getConfig\",\n            \"setConfig\",\n            \"getConfigAll\",\n            \"setConfigs\",\n            \"deleteConfig\",\n            \"deleteConfigs\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"ConfigGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"ConfigGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.CONFIG_GRPC_SERVICE_NAME = \"ConfigGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONTROL_GRPC_SERVICE_NAME = exports.CONTROL_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.ControlGrpcServiceControllerMethods = ControlGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"control\";\nexports.CONTROL_PACKAGE_NAME = \"control\";\nfunction ControlGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"onOffControl\",\n            \"workControl\",\n            \"ledControl\",\n            \"setSafetyField\",\n            \"getSafetyField\",\n            \"exAccessoryControl\",\n            \"safetyIoControl\",\n            \"setObsBox\",\n            \"getObsBox\",\n            \"detect\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"ControlGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"ControlGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.CONTROL_GRPC_SERVICE_NAME = \"ControlGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CODE_GRPC_SERVICE_NAME = exports.CODE_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.CodeGrpcServiceControllerMethods = CodeGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"code\";\nexports.CODE_PACKAGE_NAME = \"code\";\nfunction CodeGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\"readCodeList\", \"readCode\", \"createCode\", \"updateCode\", \"deleteCode\"];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"CodeGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"CodeGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.CODE_GRPC_SERVICE_NAME = \"CodeGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MOVE_GRPC_SERVICE_NAME = exports.MOVE_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.MoveGrpcServiceControllerMethods = MoveGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"move\";\nexports.MOVE_PACKAGE_NAME = \"move\";\nfunction MoveGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"moveCommand\",\n            \"moveGoal\",\n            \"moveTarget\",\n            \"moveJog\",\n            \"movePause\",\n            \"moveResume\",\n            \"moveStop\",\n            \"moveLastGoal\",\n            \"moveLogLast\",\n            \"moveLog\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"MoveGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"MoveGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.MOVE_GRPC_SERVICE_NAME = \"MoveGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LOCALIZATION_GRPC_SERVICE_NAME = exports.LOCALIZATION_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.LocalizationGrpcServiceControllerMethods = LocalizationGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"localization\";\nexports.LOCALIZATION_PACKAGE_NAME = \"localization\";\nfunction LocalizationGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\"init\", \"autoInit\", \"randomInit\", \"semiAutoInit\", \"start\", \"stop\"];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"LocalizationGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"LocalizationGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.LOCALIZATION_GRPC_SERVICE_NAME = \"LocalizationGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NETWORK_GRPC_SERVICE_NAME = exports.NETWORK_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.NetworkGrpcServiceControllerMethods = NetworkGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"network\";\nexports.NETWORK_PACKAGE_NAME = \"network\";\nfunction NetworkGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"getNetwork\",\n            \"getDevice\",\n            \"getEthernet\",\n            \"getWifi\",\n            \"getBluetooth\",\n            \"setNetwork\",\n            \"connectWifi\",\n            \"getWifiList\",\n            \"scanWifi\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"NetworkGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"NetworkGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.NETWORK_GRPC_SERVICE_NAME = \"NetworkGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MAP_GRPC_SERVICE_NAME = exports.MAP_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.MapGrpcServiceControllerMethods = MapGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"map\";\nexports.MAP_PACKAGE_NAME = \"map\";\nfunction MapGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"getMapList\",\n            \"getCurrentMap\",\n            \"getCloud\",\n            \"saveCloud\",\n            \"getTopology\",\n            \"saveTopology\",\n            \"load\",\n            \"mapping\",\n            \"uploadMap\",\n            \"downloadMap\",\n            \"publishMap\",\n            \"getMapTileExist\",\n            \"getMapTile\",\n            \"deleteMap\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"MapGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"MapGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.MAP_GRPC_SERVICE_NAME = \"MapGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ONVIF_SERVICE_NAME = exports.ONVIF_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.OnvifServiceControllerMethods = OnvifServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = 'onvif';\nexports.ONVIF_PACKAGE_NAME = 'onvif';\nfunction OnvifServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = ['deviceService', 'mediaService', 'snapshot', 'ptzService', 'deviceIoService', 'eventService'];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)('OnvifService', method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)('OnvifService', method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.ONVIF_SERVICE_NAME = 'OnvifService';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TASK_GRPC_SERVICE_NAME = exports.TASK_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.TaskGrpcServiceControllerMethods = TaskGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"task\";\nexports.TASK_PACKAGE_NAME = \"task\";\nfunction TaskGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"getTaskState\",\n            \"getTaskVariables\",\n            \"task\",\n            \"getList\",\n            \"getTask\",\n            \"saveTask\",\n            \"deleteTask\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"TaskGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"TaskGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.TASK_GRPC_SERVICE_NAME = \"TaskGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SETTING_GRPC_SERVICE_NAME = exports.SETTING_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.SettingGrpcServiceControllerMethods = SettingGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"setting\";\nexports.SETTING_PACKAGE_NAME = \"setting\";\nfunction SettingGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"getType\",\n            \"getSetting\",\n            \"saveSetting\",\n            \"saveSettingAll\",\n            \"getPresetList\",\n            \"getPreset\",\n            \"createPreset\",\n            \"deletePreset\",\n            \"savePreset\",\n            \"getCameraInfo\",\n            \"setCameraOrder\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"SettingGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"SettingGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.SETTING_GRPC_SERVICE_NAME = \"SettingGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SOUND_GRPC_SERVICE_NAME = exports.SOUND_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.SoundGrpcServiceControllerMethods = SoundGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"sound\";\nexports.SOUND_PACKAGE_NAME = \"sound\";\nfunction SoundGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\"play\", \"stop\", \"list\", \"delete\", \"getPlaying\", \"add\"];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"SoundGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"SoundGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.SOUND_GRPC_SERVICE_NAME = \"SoundGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.COBOT_GRPC_SERVICE_NAME = exports.COBOT_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.CobotGrpcServiceControllerMethods = CobotGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"cobot\";\nexports.COBOT_PACKAGE_NAME = \"cobot\";\nfunction CobotGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"cobotConnect\",\n            \"cobotDisconnect\",\n            \"cobotConnectCommand\",\n            \"cobotConnectData\",\n            \"cobotDisConnectCommand\",\n            \"cobotDisConnectData\",\n            \"getConnectState\",\n            \"cobotCommand\",\n            \"cobotProgram\",\n            \"getCobotData\",\n            \"cobotModeChange\",\n            \"cobotInit\",\n            \"cobotMove\",\n            \"cobotSpeed\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"CobotGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"CobotGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.COBOT_GRPC_SERVICE_NAME = \"CobotGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SEM_LOG_GRPC_SERVICE_NAME = exports.SERVICE_LOG_GRPC_SERVICE_NAME = exports.LOG_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.ServiceLogGrpcServiceControllerMethods = ServiceLogGrpcServiceControllerMethods;\nexports.SEMLogGrpcServiceControllerMethods = SEMLogGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"log\";\nexports.LOG_PACKAGE_NAME = \"log\";\nfunction ServiceLogGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\"getServiceLog\"];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"ServiceLogGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"ServiceLogGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.SERVICE_LOG_GRPC_SERVICE_NAME = \"ServiceLogGrpcService\";\nfunction SEMLogGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"getSemAlarmDefine\",\n            \"postSemAlarmDefine\",\n            \"deleteSemAlarmDefine\",\n            \"deleteSemAlarmDefineAll\",\n            \"getSemAlarmActive\",\n            \"semAlarm\",\n            \"deleteSemAlarm\",\n            \"deleteSemAlarmAll\",\n            \"getSemAlarmLog\",\n            \"postSemAlarmLog\",\n            \"deleteSemAlarmLog\",\n            \"getSemGeneralLog\",\n            \"deleteSemGeneralLog\",\n            \"postSemGeneralLog\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"SEMLogGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"SEMLogGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.SEM_LOG_GRPC_SERVICE_NAME = \"SEMLogGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UPDATE_GRPC_SERVICE_NAME = exports.UPDATE_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.UpdateGrpcServiceControllerMethods = UpdateGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"update\";\nexports.UPDATE_PACKAGE_NAME = \"update\";\nfunction UpdateGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"testPing\",\n            \"getNewVersion\",\n            \"getCurrentVersion\",\n            \"getReleaseBranch\",\n            \"getReleaseVersion\",\n            \"addWebUi\",\n            \"deleteWebUi\",\n            \"updateProgram\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"UpdateGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"UpdateGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.UPDATE_GRPC_SERVICE_NAME = \"UpdateGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TCP_GRPC_SERVICE_NAME = exports.TCP_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.TcpGrpcServiceControllerMethods = TcpGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"tcp\";\nexports.TCP_PACKAGE_NAME = \"tcp\";\nfunction TcpGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\"getServerState\", \"openServer\", \"closeServer\"];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"TcpGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"TcpGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.TCP_GRPC_SERVICE_NAME = \"TcpGrpcService\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TEST_GRPC_SERVICE_NAME = exports.TEST_PACKAGE_NAME = exports.protobufPackage = void 0;\nexports.TestGrpcServiceControllerMethods = TestGrpcServiceControllerMethods;\nconst microservices_1 = require(\"@nestjs/microservices\");\nexports.protobufPackage = \"test\";\nexports.TEST_PACKAGE_NAME = \"test\";\nfunction TestGrpcServiceControllerMethods() {\n    return function (constructor) {\n        const grpcMethods = [\n            \"getTestRecordAll\",\n            \"getTestRecord\",\n            \"getTestResultRecent\",\n            \"getTestResultbySubject\",\n            \"checkTestRunning\",\n            \"startTest\",\n            \"stopTest\",\n            \"createTestRecord\",\n            \"updateTestRecord\",\n            \"updateTestResult\",\n        ];\n        for (const method of grpcMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcMethod)(\"TestGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n        const grpcStreamMethods = [];\n        for (const method of grpcStreamMethods) {\n            const descriptor = Reflect.getOwnPropertyDescriptor(constructor.prototype, method);\n            (0, microservices_1.GrpcStreamMethod)(\"TestGrpcService\", method)(constructor.prototype[method], method, descriptor);\n        }\n    };\n}\nexports.TEST_GRPC_SERVICE_NAME = \"TestGrpcService\";\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./grpc.interceptor\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GrpcInterceptor = void 0;\nconst rxjs_1 = require(\"rxjs\");\nclass GrpcInterceptor {\n    intercept(context, next) {\n        const data = context.switchToRpc().getData();\n        const ctx = context.switchToRpc().getContext();\n        const meta = ctx.getMap();\n        const targetClass = context.getClass().name;\n        const targetHandler = context.getHandler().name;\n        const traceId = meta['trace-id'];\n        const clientService = meta['client-service'];\n        const clientClass = meta['client-class'];\n        const clientMethod = meta['client-method'];\n        const from = `${clientService}/${clientClass}/${clientMethod}`;\n        const to = `${targetClass}/${targetHandler}`;\n        const requestTimestamp = new Date();\n        const receivedRequestLog = {\n            type: 'RECEIVED_REQUEST',\n            traceId,\n            from,\n            to,\n            data,\n            timestamp: requestTimestamp.toUTCString(),\n        };\n        return next.handle().pipe((0, rxjs_1.map)((data) => {\n            const responseTimestamp = new Date();\n            const responseTime = `${+responseTimestamp - +requestTimestamp}ms`;\n            const responseLog = {\n                type: 'RETURN_RESPONSE',\n                traceId,\n                from,\n                to,\n                data,\n                responseTime,\n                timestamp: responseTimestamp.toUTCString(),\n            };\n            return data;\n        }));\n    }\n}\nexports.GrpcInterceptor = GrpcInterceptor;\n","module.exports = require(\"rxjs\");","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./error-to-json\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.errorToJson = errorToJson;\nfunction errorToJson(error) {\n    try {\n        if (error instanceof Error) {\n            const errorJson = {\n                name: error.name,\n                message: JSON.stringify(error.message),\n            };\n            if (error['error'] && error['error'].details) {\n                errorJson['details'] = error['error'].details;\n                errorJson['code'] = error['error'].code;\n            }\n            return JSON.stringify(errorJson);\n        }\n        else {\n            const json = JSON.parse(error);\n            return JSON.stringify(json);\n        }\n    }\n    catch (err) {\n        return JSON.stringify(error);\n    }\n}\n","module.exports = require(\"path\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst map_grpc_controller_1 = require(\"./adapter/input/map.grpc.controller\");\nconst map_service_1 = require(\"./application/map.service\");\nconst map_socketio_adapter_1 = require(\"./adapter/output/map.socketio.adapter\");\nconst map_mqtt_controller_1 = require(\"./adapter/input/map.mqtt.controller\");\nconst config_1 = require(\"@nestjs/config\");\nconst pg_1 = require(\"pg\");\nconst constant_1 = require(\"@app/common/constant\");\nconst map_pending_service_1 = require(\"./application/map.pending.service\");\nconst map_file_adapter_1 = require(\"./adapter/output/map.file.adapter\");\nconst log_module_1 = require(\"@app/common/log/log.module\");\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst map_mongo_adapter_1 = require(\"./adapter/output/map.mongo.adapter\");\nconst map_mongo_entity_1 = require(\"./entity/map.mongo-entity\");\nlet MapModule = class MapModule {\n};\nexports.MapModule = MapModule;\nexports.MapModule = MapModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            log_module_1.LogModule,\n            config_1.ConfigModule.forRoot({\n                isGlobal: true,\n                envFilePath: '.env',\n            }),\n            mongoose_1.MongooseModule.forFeature([\n                {\n                    name: map_mongo_entity_1.Map.name,\n                    schema: map_mongo_entity_1.MapSchema,\n                },\n            ]),\n            mongoose_1.MongooseModule.forRootAsync({\n                inject: [config_1.ConfigService],\n                useFactory: (configService) => ({\n                    uri: configService.get('MONGO_URL'),\n                }),\n            }),\n            microservices_1.ClientsModule.registerAsync({\n                clients: [\n                    {\n                        inject: [config_1.ConfigService],\n                        name: constant_1.MQTT_BROKER,\n                        useFactory: (configService) => ({\n                            transport: microservices_1.Transport.MQTT,\n                            options: {\n                                url: configService.get('MQTT_URL'),\n                            },\n                        }),\n                    },\n                ],\n            }),\n        ],\n        controllers: [map_grpc_controller_1.MapGrpcInputController, map_mqtt_controller_1.MapMqttInputController],\n        providers: [\n            map_service_1.MapService,\n            map_pending_service_1.MapPendingResponseService,\n            {\n                provide: 'DatabaseOutputPort',\n                useClass: map_mongo_adapter_1.MapMongoAdapter,\n            },\n            {\n                provide: 'SlamnavOutputPort',\n                useClass: map_socketio_adapter_1.MapSocketIOAdapter,\n            },\n            {\n                provide: 'MapFileOutputPort',\n                useClass: map_file_adapter_1.MapFileAdapter,\n            },\n        ],\n    })\n], MapModule);\nasync function ensureMapDatabase() {\n    const client = new pg_1.Client({\n        host: process.env.POSTGRES_HOST || 'localhost',\n        port: parseInt(process.env.POSTGRES_PORT || '7000'),\n        user: process.env.POSTGRES_USER || 'postgres',\n        password: process.env.POSTGRES_PASSWORD || 'postgres',\n        database: 'postgres',\n    });\n    try {\n        await client.connect();\n        const result = await client.query(\"SELECT 1 FROM pg_database WHERE datname = 'map'\");\n        if (result.rows.length === 0) {\n            await client.query('CREATE DATABASE map');\n            console.log(' map   ');\n        }\n        else {\n            console.log(' map   ');\n        }\n    }\n    catch (error) {\n        console.warn(' semlog DB  :', error.message);\n    }\n    finally {\n        await client.end();\n    }\n}\n","module.exports = require(\"@nestjs/common\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapGrpcInputController = void 0;\nconst common_1 = require(\"@app/common\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst rxjs_1 = require(\"rxjs\");\nconst common_2 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst map_service_1 = require(\"../../application/map.service\");\nlet MapGrpcInputController = class MapGrpcInputController {\n    constructor(mapService, saveLogService) {\n        this.mapService = mapService;\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('host');\n    }\n    getMapTileExist(request, metadata) {\n        return this.mapService.getMapTileExist(request);\n    }\n    getMapTile(request, metadata) {\n        try {\n            return (0, rxjs_1.from)(this.mapService.getMapTile(request));\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException) {\n                throw error;\n            }\n            throw new microservices_1.RpcException(error);\n        }\n    }\n    mapping(request) {\n        return this.mapService.mappingRequest(request);\n    }\n    getMapList() {\n        return this.mapService.getMapList();\n    }\n    getCloud(request) {\n        return this.mapService.getCloud(request);\n    }\n    saveCloud(request) {\n        return this.mapService.saveCloud(request);\n    }\n    getTopology(request) {\n        return this.mapService.getTopology(request);\n    }\n    saveTopology(request) {\n        return this.mapService.saveTopology(request);\n    }\n    uploadMap(request, metadata) {\n        return this.mapService.uploadMap(request);\n    }\n    downloadMap(request, metadata) {\n        return this.mapService.downloadMap(request);\n    }\n    publishMap(request, metadata) {\n        return this.mapService.publishMap(request);\n    }\n    deleteMap(request, metadata) {\n        return this.mapService.deleteMap(request);\n    }\n    getCurrentMap() {\n        return this.mapService.getCurrentMap();\n    }\n    load(request) {\n        return this.mapService.loadRequest(request);\n    }\n};\nexports.MapGrpcInputController = MapGrpcInputController;\nexports.MapGrpcInputController = MapGrpcInputController = __decorate([\n    (0, common_2.Controller)(),\n    common_1.MapMicroservice.MapGrpcServiceControllerMethods(),\n    (0, common_2.UseInterceptors)(common_1.GrpcInterceptor),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof map_service_1.MapService !== \"undefined\" && map_service_1.MapService) === \"function\" ? _a : Object, typeof (_b = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _b : Object])\n], MapGrpcInputController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SaveLogService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst winston_1 = require(\"winston\");\nconst DailyRotateFile = require(\"winston-daily-rotate-file\");\nconst util_1 = require(\"@app/common/util\");\nconst chalk_1 = require(\"chalk\");\nconst fs_1 = require(\"fs\");\nconst levelColorMap = {\n    error: chalk_1.default.red,\n    warn: chalk_1.default.magenta,\n    info: chalk_1.default.blue,\n    debug: chalk_1.default.white,\n};\nconst levelTextMap = {\n    error: 'Error',\n    warn: 'Warn',\n    info: 'Info',\n    debug: 'Debug',\n};\nfunction formatLogMessage(message) {\n    try {\n        if (message.includes('items:')) {\n            return message;\n        }\n        const jsonRegex = /:\\s*(\\[[\\s\\S]*?\\]|\\{[\\s\\S]*?\\})/g;\n        return message.replace(jsonRegex, (match, jsonStr) => {\n            try {\n                const data = JSON.parse(jsonStr);\n                const formatted = formatDataRecursive(data);\n                return `: ${formatted}`;\n            }\n            catch {\n                return match;\n            }\n        });\n    }\n    catch {\n        return message;\n    }\n}\nfunction formatDataRecursive(data) {\n    if (Array.isArray(data)) {\n        if (data.length <= 4) {\n            const items = data.map((item) => typeof item === 'object' && item !== null ? formatDataRecursive(item) : cleanJsonString(JSON.stringify(item)));\n            return `[${items.join(', ')}]`;\n        }\n        else {\n            const items = data\n                .slice(0, 4)\n                .map((item) => (typeof item === 'object' && item !== null ? formatDataRecursive(item) : cleanJsonString(JSON.stringify(item))));\n            return `[${data.length} items: [${items.join(', ')}]...]`;\n        }\n    }\n    if (typeof data === 'object' && data !== null) {\n        const formatted = { ...data };\n        for (const [key, value] of Object.entries(formatted)) {\n            if (Array.isArray(value)) {\n                formatted[key] = formatDataRecursive(value);\n            }\n            else if (typeof value === 'object' && value !== null) {\n                formatted[key] = formatDataRecursive(value);\n            }\n        }\n        return cleanJsonString(JSON.stringify(formatted));\n    }\n    return cleanJsonString(JSON.stringify(data));\n}\nfunction cleanJsonString(jsonStr) {\n    return jsonStr.replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\n}\nconst customFormat = winston_1.format.printf(({ timestamp, level, message }) => {\n    const pid = process.pid;\n    const levelColor = levelColorMap[level] || chalk_1.default.white;\n    const levelText = levelTextMap[level] || level;\n    if (typeof message === 'string') {\n        const contextTag = message ? chalk_1.default.yellow(`[${message}]`) : '';\n        const categoryMatch = message.match(/\\[(?!['\"])[A-Za-z0-9 _-]+\\]/);\n        const category = categoryMatch ? categoryMatch[0].slice(1, -1) : '';\n        let logtext = categoryMatch ? message.replace(categoryMatch[0], '').trim() : message;\n        logtext = formatLogMessage(logtext);\n        return `${levelColor(`[${levelText}] ${pid}  -`)} ${util_1.DateUtil.formatDateTimeKST(new Date(timestamp))}    ${levelColor(`LOG`)} ${chalk_1.default.yellow(`[${category}]`)} ${levelColor(`${logtext}`)}`;\n    }\n    return '';\n});\nconst fileFormat = winston_1.format.printf(({ timestamp, level, message }) => {\n    const pid = process.pid;\n    const levelText = levelTextMap[level] || level;\n    if (typeof message === 'string') {\n        const contextTag = message ? chalk_1.default.yellow(`[${message}]`) : '';\n        const categoryMatch = message.match(/\\[(?!['\"])[A-Za-z0-9 _-]+\\]/);\n        const category = categoryMatch ? categoryMatch[0].slice(1, -1) : '';\n        let logtext = categoryMatch ? message.replace(categoryMatch[0], '').trim() : message;\n        return `[${levelText}] ${pid}  - ${util_1.DateUtil.formatDateTimeKST(new Date(timestamp))}   LOG [${category}] ${logtext}`;\n    }\n});\nlet SaveLogService = class SaveLogService {\n    constructor() {\n        this.loggers = new Map();\n        this.rootPath = '/data/log';\n        this.logPath = this.rootPath;\n        chalk_1.default.level = 3;\n    }\n    get(service) {\n        let logger = this.loggers.get(service);\n        if (!logger) {\n            logger = this.createLogger(service);\n            this.loggers.set(service, logger);\n        }\n        return logger;\n    }\n    createLogger(service) {\n        this.logPath = `${this.rootPath}/${service}`;\n        if (!(0, fs_1.existsSync)(this.logPath)) {\n            (0, fs_1.mkdirSync)(this.logPath, { recursive: true });\n        }\n        try {\n            (0, fs_1.chownSync)(this.logPath, 1000, 1000);\n        }\n        catch (error) {\n            console.error('LoggerService chownSync Error : ', error);\n        }\n        return (0, winston_1.createLogger)({\n            level: 'debug',\n            transports: [\n                new DailyRotateFile({\n                    filename: `${this.logPath}/%DATE%.log`,\n                    datePattern: 'YYYY-MM-DD',\n                    level: 'debug',\n                    format: winston_1.format.combine(winston_1.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }), fileFormat),\n                    zippedArchive: true,\n                    maxSize: '10m',\n                    maxFiles: '14d',\n                }),\n                new winston_1.transports.Console({\n                    level: 'debug',\n                    format: winston_1.format.combine(winston_1.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }), customFormat),\n                }),\n            ],\n        });\n    }\n};\nexports.SaveLogService = SaveLogService;\nexports.SaveLogService = SaveLogService = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [])\n], SaveLogService);\n","module.exports = require(\"winston\");","module.exports = require(\"winston-daily-rotate-file\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationUtil = exports.CryptoUtil = exports.ParseUtil = exports.FileUtil = exports.DateUtil = exports.UrlUtil = void 0;\nvar url_util_1 = require(\"./url.util\");\nObject.defineProperty(exports, \"UrlUtil\", { enumerable: true, get: function () { return url_util_1.UrlUtil; } });\nvar date_util_1 = require(\"./date.util\");\nObject.defineProperty(exports, \"DateUtil\", { enumerable: true, get: function () { return date_util_1.DateUtil; } });\nvar file_util_1 = require(\"./file/file.util\");\nObject.defineProperty(exports, \"FileUtil\", { enumerable: true, get: function () { return file_util_1.FileUtil; } });\nvar parse_util_1 = require(\"./parse.util\");\nObject.defineProperty(exports, \"ParseUtil\", { enumerable: true, get: function () { return parse_util_1.ParseUtil; } });\nvar crypto_util_1 = require(\"./crypto.util\");\nObject.defineProperty(exports, \"CryptoUtil\", { enumerable: true, get: function () { return crypto_util_1.CryptoUtil; } });\nvar validation_util_1 = require(\"./validation.util\");\nObject.defineProperty(exports, \"ValidationUtil\", { enumerable: true, get: function () { return validation_util_1.ValidationUtil; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UrlUtil = void 0;\nconst uuid_1 = require(\"uuid\");\nclass UrlUtil {\n    static generateUUID() {\n        return (0, uuid_1.v4)();\n    }\n}\nexports.UrlUtil = UrlUtil;\n","module.exports = require(\"uuid\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DateUtil = void 0;\nconst date_fns_1 = require(\"date-fns\");\nclass DateUtil {\n    static nowKST() {\n        const now = new Date();\n        const formatter = new Intl.DateTimeFormat('en-CA', {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        });\n        const parts = formatter.formatToParts(now);\n        const get = (type) => parts.find((p) => p.type === type)?.value;\n        return new Date(Number(get('year')), Number(get('month')) - 1, Number(get('day')), Number(get('hour')), Number(get('minute')), Number(get('second')));\n    }\n    static toDatetimeString(date) {\n        return (0, date_fns_1.format)(date, 'yyyy-MM-dd HH:mm:ss');\n    }\n    static getTimeString() {\n        return new Date().getTime().toString();\n    }\n    static convertTargetsToDatetimeString(param, targets) {\n        const sParam = { ...param };\n        targets.forEach((target) => {\n            if (sParam[target]) {\n                sParam[target] = DateUtil.toDatetimeString(new Date(sParam[target]));\n            }\n        });\n        return sParam;\n    }\n    static formatDate(date) {\n        const pad = (n) => n.toString().padStart(2, '0');\n        return (`${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())} ` +\n            `${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(date.getSeconds())}`);\n    }\n    static formatDateKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.year}-${obj.month}-${obj.day}`;\n    }\n    static formatDateTimeKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.year}-${obj.month}-${obj.day} ${obj.hour}:${obj.minute}:${obj.second}`;\n    }\n    static formatTimeKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.hour}:${obj.minute}:${obj.second}`;\n    }\n    static formatTimeYearKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.year}`;\n    }\n    static formatTimeMonthKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.month}`;\n    }\n    static formatTimeDayKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.day}`;\n    }\n    static formatTimeHourKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.hour}`;\n    }\n    static formatTimeMinuteKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.minute}`;\n    }\n    static formatTimeSecondKST(date) {\n        const options = {\n            timeZone: 'Asia/Seoul',\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false,\n        };\n        const parts = new Intl.DateTimeFormat('ko-KR', options).formatToParts(date);\n        const obj = Object.fromEntries(parts.map(({ type, value }) => [type, value]));\n        return `${obj.second}`;\n    }\n}\nexports.DateUtil = DateUtil;\n","module.exports = require(\"date-fns\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileUtil = void 0;\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst unzipper = require(\"unzipper\");\nconst il = require(\"iconv-lite\");\nconst uuid_1 = require(\"uuid\");\nconst archiver_1 = require(\"archiver\");\nconst csv = require(\"csv\");\nconst zlib_1 = require(\"zlib\");\nconst common_1 = require(\"@app/common\");\nconst rpc_code_exception_1 = require(\"../../exception/rpc-code.exception\");\nconst constant_1 = require(\"../../grpc/constant\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst path_1 = require(\"path\");\nclass FileUtil {\n    static checkBasePath() {\n        this.basePath = '';\n    }\n    static async getFile(filename, filePath) {\n        try {\n            this.checkBasePath();\n            const fileFullPath = path.join(this.basePath, filePath, filename);\n            if (!fs.existsSync(fileFullPath)) {\n                throw new Error(`File not found: ${fileFullPath}`);\n            }\n            return await fs.promises.readFile(fileFullPath);\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    static async getFileAt(filename, filePath) {\n        try {\n            this.checkBasePath();\n            const fileFullPath = path.join(filePath, filename);\n            return fs.existsSync(fileFullPath);\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    static async uploadFile(fileBuffer, filename) {\n        try {\n            this.checkBasePath();\n            const uniqueName = `${(0, uuid_1.v4)()}${path.extname(filename)}`;\n            const filePath = path.join(this.basePath, uniqueName);\n            fs.writeFileSync(filePath, fileBuffer);\n            return { filePath: filePath, fileName: uniqueName };\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    static async downloadFile(filename, compress) {\n        try {\n            this.checkBasePath();\n            const filePath = path.join(this.basePath, filename);\n            const fileExtension = path.extname(filename);\n            if (!fs.existsSync(filePath)) {\n                throw new Error(`File not found: ${filePath}`);\n            }\n            if (compress && fileExtension.toUpperCase() !== '.ZIP') {\n                const outputPath = path.join(this.basePath, filename.substring(0, filename.lastIndexOf(fileExtension)));\n                await this.compressFile(filePath, outputPath);\n                const fileContent = await fs.promises.readFile(outputPath);\n                await fs.promises.unlink(outputPath);\n                return fileContent;\n            }\n            return await fs.promises.readFile(filePath);\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    static async deleteFile(filename) {\n        try {\n            this.checkBasePath();\n            const filePath = path.join(this.basePath, filename);\n            if (fs.existsSync(filePath)) {\n                fs.unlinkSync(filePath);\n            }\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    static async compressFile(filePath, outputPath, outputName) {\n        try {\n            this.checkBasePath();\n            const compressPath = outputName ? path.join(this.basePath, `${outputName}.zip`) : outputPath;\n            const output = fs.createWriteStream(compressPath);\n            const archive = (0, archiver_1.default)('zip', {\n                zlib: { level: 9 },\n            });\n            archive.pipe(output);\n            archive.directory(filePath, false);\n            await archive.finalize();\n            return compressPath;\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    static async decompressFile(filePath, outputPath) {\n        try {\n            this.checkBasePath();\n            if (!outputPath) {\n                outputPath = filePath.substring(0, filePath.indexOf(path.extname(filePath)));\n            }\n            if (!fs.existsSync(outputPath)) {\n                await fs.promises.mkdir(outputPath, { recursive: true });\n            }\n            const directory = await unzipper.Open.file(filePath);\n            for (const entry of directory.files) {\n                const entryPath = entry.isUnicode ? entry.path : il.decode(entry.pathBuffer, 'euc-kr');\n                const fullPath = path.join(outputPath, entryPath);\n                if (entry.type === 'File') {\n                    await fs.promises.mkdir(path.dirname(fullPath), { recursive: true });\n                    const readStream = entry.stream();\n                    const writeStream = fs.createWriteStream(fullPath);\n                    readStream.pipe(writeStream);\n                    await new Promise((resolve, reject) => {\n                        writeStream.on('finish', () => resolve);\n                        writeStream.on('error', reject);\n                    });\n                }\n                else {\n                    await fs.promises.mkdir(fullPath, { recursive: true });\n                }\n            }\n            return outputPath;\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    static async readCSV(path) {\n        return new Promise((resolve, reject) => {\n            try {\n                if (!fs.existsSync(path)) {\n                    reject(new rpc_code_exception_1.RpcCodeException('  ', constant_1.GrpcCode.NotFound));\n                }\n                fs.accessSync(path, fs.constants.R_OK);\n                const results = [];\n                fs.createReadStream(path)\n                    .pipe(csv.parse({\n                    skip_empty_lines: true,\n                    skip_records_with_error: true,\n                }))\n                    .on('data', (row) => {\n                    results.push(row);\n                })\n                    .on('error', (error) => {\n                    reject(new rpc_code_exception_1.RpcCodeException('CSV    .', constant_1.GrpcCode.InternalError));\n                })\n                    .on('end', () => {\n                    resolve(results);\n                });\n            }\n            catch (error) {\n                if (error instanceof microservices_1.RpcException)\n                    throw error;\n                reject(new rpc_code_exception_1.RpcCodeException('CSV    .', constant_1.GrpcCode.InternalError));\n            }\n        });\n    }\n    static async readCSVPipe(path, res) {\n        return new Promise((resolve, reject) => {\n            try {\n                fs.open(path, 'r', (err) => {\n                    if (err) {\n                        reject(new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.NotFound));\n                    }\n                    else {\n                        res.setHeader('Content-Type', 'text/csv');\n                        res.setHeader('Content-Encoding', 'gzip');\n                        res.setHeader('Content-Disposition', 'attachment; filename=\"cloud.csv\"');\n                        const fileStream = fs.createReadStream(path);\n                        const gzip = (0, zlib_1.createGzip)();\n                        fileStream\n                            .pipe(gzip)\n                            .pipe(res)\n                            .on('finish', () => {\n                            resolve();\n                        })\n                            .on('error', (error) => {\n                            reject(new rpc_code_exception_1.RpcCodeException('CSV    .', constant_1.GrpcCode.InternalError));\n                        });\n                    }\n                });\n            }\n            catch (error) {\n                if (error instanceof microservices_1.RpcException)\n                    throw error;\n                reject(new rpc_code_exception_1.RpcCodeException('CSV    .', constant_1.GrpcCode.InternalError));\n            }\n        });\n    }\n    static async saveCSV(path, data) {\n        try {\n            const csvData = data.map((row) => (Array.isArray(row) ? row.join(',') : row)).join('\\n');\n            if (data === undefined || data.length === 0) {\n                throw new rpc_code_exception_1.RpcCodeException('data  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            console.log('path : ', path);\n            console.log('dirname(path) : ', (0, path_1.dirname)(path));\n            fs.mkdirSync((0, path_1.dirname)(path), { recursive: true });\n            fs.writeFileSync(path, csvData);\n            return;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            console.error(`[File] saveCSV : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('CSV     .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    static async readJson(dir) {\n        try {\n            if (dir === undefined || dir === '') {\n                throw new rpc_code_exception_1.RpcCodeException('dir  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (!fs.openSync(dir, 'r')) {\n                throw new rpc_code_exception_1.RpcCodeException(`   . (${dir})`, constant_1.GrpcCode.NotFound);\n            }\n            const filecontent = fs.readFileSync(dir, 'utf-8');\n            return JSON.parse(filecontent);\n        }\n        catch (error) {\n            console.error(error);\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('JSON     .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    static async readJSONPipe(path, res) {\n        try {\n            if (path === undefined || path === '') {\n                throw new rpc_code_exception_1.RpcCodeException('path  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (!fs.openSync(path, 'r')) {\n                throw new rpc_code_exception_1.RpcCodeException(`   . (${path})`, constant_1.GrpcCode.NotFound);\n            }\n            res.setHeader('Content-Type', 'application/json');\n            res.setHeader('Content-Encoding', 'gzip');\n            res.setHeader('Content-Disposition', 'attachment; filename=\"topo.json\"');\n            const fileStream = fs.createReadStream(path);\n            const gzip = (0, zlib_1.createGzip)();\n            fileStream.pipe(gzip).pipe(res);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('JSON     .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    static async saveJson(dir, data) {\n        try {\n            if (dir === undefined || dir === '') {\n                throw new rpc_code_exception_1.RpcCodeException('dir  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (data === undefined || data === '' || JSON.stringify(data) === '') {\n                throw new rpc_code_exception_1.RpcCodeException('data  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            console.log('--------------------------------------');\n            console.log(dir);\n            if (!fs.existsSync(path.dirname(dir))) {\n                fs.mkdirSync(path.dirname(dir), { recursive: true });\n            }\n            if (fs.existsSync(dir)) {\n                fs.renameSync(dir, `${dir}.bak`);\n            }\n            if (typeof data === 'string') {\n                data = JSON.parse(data);\n            }\n            fs.writeFileSync(dir, JSON.stringify(data, null, 2));\n            return;\n        }\n        catch (error) {\n            console.error(error);\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('JSON     .', constant_1.GrpcCode.InternalError);\n        }\n    }\n}\nexports.FileUtil = FileUtil;\n","module.exports = require(\"fs\");","module.exports = require(\"unzipper\");","module.exports = require(\"iconv-lite\");","module.exports = require(\"archiver\");","module.exports = require(\"csv\");","module.exports = require(\"zlib\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RpcCodeException = void 0;\nconst microservices_1 = require(\"@nestjs/microservices\");\nclass RpcCodeException extends microservices_1.RpcException {\n    constructor(details, statusCode) {\n        super({ details: details, code: statusCode });\n        this.statusCode = statusCode;\n    }\n}\nexports.RpcCodeException = RpcCodeException;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./grpc-code.constant\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GrpcCode = void 0;\nvar GrpcCode;\n(function (GrpcCode) {\n    GrpcCode[GrpcCode[\"OK\"] = 0] = \"OK\";\n    GrpcCode[GrpcCode[\"Cancelled\"] = 1] = \"Cancelled\";\n    GrpcCode[GrpcCode[\"Unknown\"] = 2] = \"Unknown\";\n    GrpcCode[GrpcCode[\"InvalidArgument\"] = 3] = \"InvalidArgument\";\n    GrpcCode[GrpcCode[\"DeadlineExceeded\"] = 4] = \"DeadlineExceeded\";\n    GrpcCode[GrpcCode[\"NotFound\"] = 5] = \"NotFound\";\n    GrpcCode[GrpcCode[\"AlreadyExists\"] = 6] = \"AlreadyExists\";\n    GrpcCode[GrpcCode[\"PermissionDenied\"] = 7] = \"PermissionDenied\";\n    GrpcCode[GrpcCode[\"ResourceExhausted\"] = 8] = \"ResourceExhausted\";\n    GrpcCode[GrpcCode[\"FailedPrecondition\"] = 9] = \"FailedPrecondition\";\n    GrpcCode[GrpcCode[\"Aborted\"] = 10] = \"Aborted\";\n    GrpcCode[GrpcCode[\"OutOfRange\"] = 11] = \"OutOfRange\";\n    GrpcCode[GrpcCode[\"Unimplemented\"] = 12] = \"Unimplemented\";\n    GrpcCode[GrpcCode[\"InternalError\"] = 13] = \"InternalError\";\n    GrpcCode[GrpcCode[\"Unavailable\"] = 14] = \"Unavailable\";\n    GrpcCode[GrpcCode[\"DataLoss\"] = 15] = \"DataLoss\";\n    GrpcCode[GrpcCode[\"Unauthenticated\"] = 16] = \"Unauthenticated\";\n    GrpcCode[GrpcCode[\"DBError\"] = 17] = \"DBError\";\n})(GrpcCode || (exports.GrpcCode = GrpcCode = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParseUtil = void 0;\nclass ParseUtil {\n    static errorToJson(error) {\n        try {\n            if (error instanceof Error) {\n                const errorJson = {\n                    name: error.name,\n                    message: JSON.stringify(error.message),\n                };\n                if (error['error'] && error['error'].details) {\n                    errorJson['details'] = error['error'].details;\n                    errorJson['code'] = error['error'].code;\n                }\n                return JSON.stringify(errorJson);\n            }\n            else {\n                const json = JSON.parse(error);\n                return JSON.stringify(json);\n            }\n        }\n        catch (err) {\n            return JSON.stringify(err);\n        }\n    }\n    static stringToCamelCase(str) {\n        return str.toLowerCase().replace(/([-_][a-z])/gi, (group) => {\n            return group.toUpperCase().replace('-', '').replace('_', '');\n        });\n    }\n    static chunkArray(arr, size) {\n        const result = [];\n        for (let i = 0; i < arr.length; i += size) {\n            result.push(arr.slice(i, i + size));\n        }\n        return result;\n    }\n    static stringifyAllValues(obj) {\n        for (const key in obj) {\n            if (typeof obj[key] === 'object') {\n                this.stringifyAllValues(obj[key]);\n            }\n            else {\n                obj[key] = String(obj[key]);\n            }\n        }\n        return obj;\n    }\n}\nexports.ParseUtil = ParseUtil;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CryptoUtil = void 0;\nclass CryptoUtil {\n}\nexports.CryptoUtil = CryptoUtil;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationUtil = void 0;\nclass ValidationUtil {\n    static isEmpty(param) {\n        if (param === undefined || param === null) {\n            return true;\n        }\n        switch (true) {\n            case Array.isArray(param):\n                return param.length === 0 || param.every((item) => this.isEmpty(item));\n            case typeof param === 'object':\n                return Object.keys(param).length === 0;\n            case typeof param === 'string':\n                return param.trim().length === 0;\n            case typeof param === 'number':\n                return isNaN(param);\n            case typeof param === 'boolean':\n                return false;\n            default:\n                return true;\n        }\n    }\n    static isNotEmpty(param) {\n        return !this.isEmpty(param);\n    }\n}\nexports.ValidationUtil = ValidationUtil;\n","module.exports = require(\"chalk\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapService = void 0;\nconst common_1 = require(\"@app/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst map_database_output_port_1 = require(\"../port/map.database.output-port\");\nconst map_slamnav_output_port_1 = require(\"../port/map.slamnav.output-port\");\nconst map_command_domain_1 = require(\"../domain/map-command.domain\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst fs_1 = require(\"fs\");\nconst path_1 = require(\"path\");\nconst util_1 = require(\"@app/common/util\");\nconst FormData = require(\"form-data\");\nconst zip_util_1 = require(\"@app/common/util/file/zip.util\");\nconst axios_1 = require(\"axios\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst map_file_output_port_1 = require(\"../port/map.file.output-port\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet MapService = class MapService {\n    constructor(databaseOutput, slamnavOutput, mapFileOutput, saveLogService) {\n        this.databaseOutput = databaseOutput;\n        this.slamnavOutput = slamnavOutput;\n        this.mapFileOutput = mapFileOutput;\n        this.saveLogService = saveLogService;\n        this.slamnav_connection = false;\n        this.serviceName = 'MAP';\n        this.currentMap = '';\n        console.log(process.env.DATA_DIR);\n        this.logger = this.saveLogService.get('host');\n    }\n    setCurrentMap(mapName) {\n        this.currentMap = mapName;\n    }\n    async getMapList() {\n        let command = null;\n        try {\n            this.logger?.debug(`[APP] getMapList`);\n            command = new map_command_domain_1.MapCommandModel({ command: map_command_domain_1.MapCommand.getMapList });\n            const result = await this.databaseOutput.save(command);\n            command.assignId(result.id.toString());\n            command.checkVariables();\n            const entries = await this.mapFileOutput.readMapList({});\n            this.logger?.debug(`[APP] getMapList :   Map   = ${entries.list.length} (${command.path})`);\n            command.statusChange(map_command_domain_1.CommandStatus.success);\n            return entries;\n        }\n        catch (error) {\n            if (command) {\n                command.statusChange(map_command_domain_1.CommandStatus.fail);\n            }\n            this.logger?.error(`[APP] getMapList : ${util_1.ParseUtil.errorToJson(error)}`);\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n        finally {\n            if (command) {\n                await this.databaseOutput.update(command);\n            }\n        }\n    }\n    async getCloud(request) {\n        let command = null;\n        try {\n            this.logger?.debug(`[APP] getCloud : ${JSON.stringify(request)})`);\n            command = new map_command_domain_1.MapCommandModel({ command: map_command_domain_1.MapCommand.getCloud, ...request });\n            const result = await this.databaseOutput.save(command);\n            command.assignId(result.id.toString());\n            command.checkVariables();\n            if (!(0, fs_1.existsSync)(command.path)) {\n                throw new rpc_code_exception_1.RpcCodeException(`   . (${command.mapName}/${command.fileName})`, constant_1.GrpcCode.NotFound);\n            }\n            const csvData = await util_1.FileUtil.readCSV(command.path);\n            const cloud = csvData.map((e) => ({ row: e.map((e) => Number(e)) }));\n            command.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.databaseOutput.update(command);\n            return { ...request, cloud: cloud };\n        }\n        catch (error) {\n            if (command) {\n                command.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.databaseOutput.update(command);\n            }\n            this.logger?.error(`[Map] getCloud : ${util_1.ParseUtil.errorToJson(error)}`);\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('Cloud   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async saveCloud(request) {\n        let command = null;\n        try {\n            this.logger?.debug(`[Map] saveCloud : ${JSON.stringify(request)})`);\n            command = new map_command_domain_1.MapCommandModel({ command: map_command_domain_1.MapCommand.getCloud, ...request, cloud: request.cloud.map((row) => row.row) });\n            const result = await this.databaseOutput.save(command);\n            command.assignId(result.id.toString());\n            command.checkVariables();\n            const list = request.cloud.map((row) => row.row);\n            await util_1.FileUtil.saveCSV(command.path, list.map((row) => row.map((e) => e.toString())));\n            command.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.databaseOutput.update(command);\n            return request;\n        }\n        catch (error) {\n            if (command) {\n                command.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.databaseOutput.update(command);\n            }\n            this.logger?.error(`[Map] saveCloud : ${util_1.ParseUtil.errorToJson(error)}`);\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('Cloud   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async saveTopology(request) {\n        let command = null;\n        try {\n            this.logger?.debug(`[Map] saveTopology : ${JSON.stringify(request)})`);\n            command = new map_command_domain_1.MapCommandModel({\n                command: map_command_domain_1.MapCommand.saveTopo,\n                topo: request.data,\n                mapName: request.mapName,\n                fileName: request.fileName,\n            });\n            command.setTopology({\n                command: map_command_domain_1.MapCommand.saveTopo,\n                topo: request.data,\n                mapName: request.mapName,\n                fileName: request.fileName,\n            });\n            const result = await this.databaseOutput.save(command);\n            command.assignId(result.id.toString());\n            command.checkVariables();\n            const jsonData = JSON.parse(JSON.stringify(request.data));\n            jsonData.forEach((node) => {\n                if (node.pose.x != undefined) {\n                    node.pose = node.pose.x + ',' + node.pose.y + ',' + node.pose.z + ',' + node.pose.rx + ',' + node.pose.ry + ',' + node.pose.rz;\n                }\n                else {\n                    throw new rpc_code_exception_1.RpcCodeException('Topology    .', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (node.links) {\n                    if (request.fileName != 'node.json') {\n                        for (let i = 0; i < node.links.length; i++) {\n                            if (typeof node.links[i] !== 'string') {\n                                node.links[i] = node.links[i].id;\n                            }\n                        }\n                    }\n                    else {\n                        node.links = node.links.map((link) => this.setLinkDto(link));\n                    }\n                }\n                else {\n                    node.links = [];\n                }\n            });\n            await util_1.FileUtil.saveJson(command.path, jsonData);\n            command.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.databaseOutput.update(command);\n            await this.slamnavOutput.reloadTopology();\n            return request;\n        }\n        catch (error) {\n            this.logger?.error(`[Map] saveTopology : ${util_1.ParseUtil.errorToJson(error)}`);\n            if (command) {\n                command.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.databaseOutput.update(command);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('Topology   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    getLinkDto(link) {\n        if (typeof link === 'string') {\n            return {\n                id: link,\n            };\n        }\n        else {\n            return {\n                id: link.id,\n                info: link.info,\n                speed: link.speed,\n                method: link.method,\n                safetyField: link.safety_field,\n            };\n        }\n    }\n    setLinkDto(link) {\n        return {\n            id: link.id,\n            info: link.info,\n            speed: link.speed,\n            method: link.method,\n            safety_field: link.safetyField,\n            safetyField: undefined,\n        };\n    }\n    async getTopology(request) {\n        let model = null;\n        try {\n            this.logger?.debug(`[Map] getTopology : ${JSON.stringify(request)})`);\n            model = new map_command_domain_1.MapCommandModel({\n                command: map_command_domain_1.MapCommand.getTopo,\n                mapName: request.mapName,\n                fileName: request.fileName,\n            });\n            model.setTopology({\n                command: map_command_domain_1.MapCommand.getTopo,\n                mapName: request.mapName,\n                fileName: request.fileName,\n            });\n            const result = await this.databaseOutput.save(model);\n            model.assignId(result.id.toString());\n            model.checkVariables();\n            if (!(0, fs_1.existsSync)(model.path)) {\n                throw new rpc_code_exception_1.RpcCodeException(`   . (${model.mapName}/${model.fileName})`, constant_1.GrpcCode.NotFound);\n            }\n            let data = [];\n            const jsonData = await util_1.FileUtil.readJson(model.path);\n            data = JSON.parse(JSON.stringify(jsonData)).map((node) => {\n                console.log('node : ', node);\n                return {\n                    id: node.id,\n                    name: node.name,\n                    pose: {\n                        x: node.pose.split(',')[0],\n                        y: node.pose.split(',')[1],\n                        z: node.pose.split(',')[2],\n                        rx: node.pose.split(',')[3],\n                        ry: node.pose.split(',')[4],\n                        rz: node.pose.split(',')[5],\n                    },\n                    info: node.info,\n                    links: node.links?.map((link) => this.getLinkDto(link)),\n                    type: node.type,\n                };\n            });\n            model.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.databaseOutput.update(model);\n            return { ...request, fileName: model.fileName, data };\n        }\n        catch (error) {\n            this.logger?.error(`[Map] getTopology : ${util_1.ParseUtil.errorToJson(error)}`);\n            if (model) {\n                model.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.databaseOutput.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('Topology   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async uploadMap(request) {\n        let zipPath = '';\n        let command = null;\n        try {\n            this.logger?.debug(`[Map] uploadMap : ${JSON.stringify(request)})`);\n            command = new map_command_domain_1.MapCommandModel({ ...request, command: map_command_domain_1.MapCommand.uploadMap });\n            const result = await this.databaseOutput.save(command);\n            command.assignId(result.id.toString());\n            command.checkVariables();\n            const mapPath = command.path;\n            const newMapPath = command.newPath;\n            zipPath = `${newMapPath}.zip`;\n            if (!(0, fs_1.existsSync)(mapPath)) {\n                throw new rpc_code_exception_1.RpcCodeException(`${command.mapName}    . ${mapPath}`, constant_1.GrpcCode.NotFound);\n            }\n            await zip_util_1.ZipUtil.zipFolder(mapPath, zipPath);\n            this.logger?.debug(`[Map] uploadMap : zip success (${zipPath}, ${(0, path_1.basename)(zipPath)})`);\n            const zipStream = (0, fs_1.createReadStream)(zipPath);\n            const formData = new FormData();\n            formData.append('file', zipStream, { filename: (0, path_1.basename)(zipPath) });\n            formData.append('deleteZipAt', 'Y');\n            const url = process.env.FRS_URL + '/api/maps/frs-map/upload';\n            this.logger?.debug(`[Map] uploadMap : POST frs (${url})`);\n            const response = await axios_1.default.post(url, formData);\n            this.logger?.debug(`[Map] uploadMap : Response from FRS (${JSON.stringify(response.data)})`);\n            command.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.databaseOutput.update(command);\n            return {\n                mapName: command.mapName,\n                newMapName: command.newMapName,\n            };\n        }\n        catch (error) {\n            if (command) {\n                command.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.databaseOutput.update(command);\n            }\n            if (error instanceof microservices_1.RpcException) {\n                throw error;\n            }\n            if (error.response.data.message) {\n                this.logger?.error(`[Map] uploadMap : ${util_1.ParseUtil.errorToJson(error.response.data)}`);\n                throw new rpc_code_exception_1.RpcCodeException(error.response.data.message, constant_1.GrpcCode.InternalError);\n            }\n            this.logger?.error(`[Map] uploadMap : ${util_1.ParseUtil.errorToJson(error.response.data)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n        finally {\n            if (zipPath !== '' && (0, fs_1.existsSync)(zipPath)) {\n                (0, fs_1.unlinkSync)(zipPath);\n            }\n        }\n    }\n    async downloadMap(request) {\n        return new Promise(async (resolve, reject) => {\n            let zipPath = '';\n            let command = null;\n            try {\n                this.logger?.info(`[Map] downloadMap ================================`);\n                command = new map_command_domain_1.MapCommandModel({\n                    mapName: request.fileName,\n                    isForce: request.isForce,\n                    newMapName: request.newMapName,\n                    command: map_command_domain_1.MapCommand.downloadMap,\n                });\n                const result = await this.databaseOutput.save(command);\n                console.log('result : ', result);\n                command.assignId(result.id.toString());\n                command.checkVariables();\n                const url = process.env.FRS_URL + '/api/maps/frs-map/download';\n                this.logger?.debug(`[Map] downloadMap : POST frs (${url}, ${command.mapName})`);\n                const response = await axios_1.default.get(url, {\n                    responseType: 'stream',\n                    params: {\n                        fileDetailFlNm: command.mapName,\n                    },\n                });\n                const newMapPath = command.newPath;\n                zipPath = `${newMapPath}.zip`;\n                if (!command.isForce && (0, fs_1.existsSync)(newMapPath)) {\n                    throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.AlreadyExists);\n                }\n                this.logger?.info(`[Map] downloadMap: Download(Zip) Start ${zipPath}`);\n                const fileStream = (0, fs_1.createWriteStream)(zipPath);\n                response.data.pipe(fileStream);\n                this.logger?.info(`[Map] downloadMap: Download(Zip) Start ${zipPath}`);\n                fileStream.on('finish', async () => {\n                    this.logger?.info(`[Map] downloadMap: Download(Zip) Done ${zipPath}`);\n                    this.logger?.info(`[Map] downloadMap: UnZip ${zipPath} -> ${newMapPath}`);\n                    await zip_util_1.ZipUtil.unzipFolder(zipPath, newMapPath);\n                    this.logger?.debug(`[Map] downloadMap : Zip Done`);\n                });\n                command.statusChange(map_command_domain_1.CommandStatus.success);\n                await this.databaseOutput.update(command);\n                resolve({\n                    fileName: command.mapName,\n                    newMapName: command.newMapName,\n                    isForce: command.isForce,\n                });\n            }\n            catch (error) {\n                if (command) {\n                    command.statusChange(map_command_domain_1.CommandStatus.fail);\n                    await this.databaseOutput.update(command);\n                }\n                if (error instanceof microservices_1.RpcException) {\n                    reject(error);\n                }\n                if (error.response?.data?.message) {\n                    this.logger?.error(`[Map] downloadMap : ${util_1.ParseUtil.errorToJson(error.response.data)}`);\n                    reject(new rpc_code_exception_1.RpcCodeException(error.response.data.message, constant_1.GrpcCode.InternalError));\n                }\n                this.logger?.error(`[Map] downloadMap : ${util_1.ParseUtil.errorToJson(error)}`);\n                reject(new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError));\n            }\n            finally {\n                if (zipPath !== '' && (0, fs_1.existsSync)(zipPath)) {\n                    (0, fs_1.unlinkSync)(zipPath);\n                }\n            }\n        });\n    }\n    async getMapTileExist(request) {\n        return await this.mapFileOutput.getMapTileExist(request);\n    }\n    async getMapTile(request) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                if (request.mapName == undefined || request.mapName == null || request.mapName == '') {\n                    throw new rpc_code_exception_1.RpcCodeException('  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (request.z == undefined || request.z == null) {\n                    throw new rpc_code_exception_1.RpcCodeException('z  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (request.x == undefined || request.x == null) {\n                    throw new rpc_code_exception_1.RpcCodeException('x  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (request.y == undefined || request.y == null) {\n                    throw new rpc_code_exception_1.RpcCodeException('y  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                resolve(await this.mapFileOutput.getMapTile(request));\n            }\n            catch (error) {\n                if (error instanceof microservices_1.RpcException) {\n                    reject(error);\n                }\n                console.error(error);\n                reject(new rpc_code_exception_1.RpcCodeException('  ', constant_1.GrpcCode.InternalError));\n            }\n        });\n    }\n    async getCurrentMap() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                this.logger?.info(`[Map] getCurrentMap ================================`);\n                resolve({\n                    mapName: this.currentMap,\n                });\n            }\n            catch (error) {\n                reject(new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError));\n            }\n        });\n    }\n    async publishMap(request) {\n        return new Promise(async (resolve, reject) => {\n            let zipPath = '';\n            let command = null;\n            try {\n                this.logger?.info(`[Map] publishMap ================================`);\n                command = new map_command_domain_1.MapCommandModel({\n                    mapName: request.fileName,\n                    isForce: request.isForce,\n                    newMapName: request.newMapName,\n                    command: map_command_domain_1.MapCommand.publishMap,\n                });\n                const result = await this.databaseOutput.save(command);\n                command.assignId(result.id.toString());\n                command.checkVariables();\n                zipPath = (0, path_1.join)('/data/temp', request.fileName);\n                const mapPath = command.newPath;\n                if (!(0, fs_1.existsSync)(zipPath)) {\n                    throw new rpc_code_exception_1.RpcCodeException(`  . ${zipPath}`, constant_1.GrpcCode.NotFound);\n                }\n                if ((0, fs_1.existsSync)(mapPath) && !request.isForce) {\n                    throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.AlreadyExists);\n                }\n                this.logger?.info(`[Map] publishMap: UnZip ${zipPath} -> ${mapPath}`);\n                await zip_util_1.ZipUtil.unzipFolder(zipPath, mapPath);\n                this.logger?.debug(`[Map] publishMap : Zip Done`);\n                command.statusChange(map_command_domain_1.CommandStatus.success);\n                await this.databaseOutput.update(command);\n                resolve({\n                    fileName: command.mapName,\n                    newMapName: command.newMapName,\n                    isForce: command.isForce,\n                });\n            }\n            catch (error) {\n                console.error(error);\n                if (command) {\n                    command.statusChange(map_command_domain_1.CommandStatus.fail);\n                    await this.databaseOutput.update(command);\n                }\n                if (error instanceof microservices_1.RpcException) {\n                    reject(error);\n                }\n                if (error.response?.data?.message) {\n                    this.logger?.error(`[Map] publishMap : ${util_1.ParseUtil.errorToJson(error.response.data)}`);\n                    reject(new rpc_code_exception_1.RpcCodeException(error.response.data.message, constant_1.GrpcCode.InternalError));\n                }\n                this.logger?.error(`[Map] publishMap : ${util_1.ParseUtil.errorToJson(error)}`);\n                reject(new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError));\n            }\n            finally {\n                if (zipPath !== '' && (0, fs_1.existsSync)(zipPath)) {\n                    (0, fs_1.unlinkSync)(zipPath);\n                }\n            }\n        });\n    }\n    async deleteMap(request) {\n        return new Promise(async (resolve, reject) => {\n            let command = null;\n            try {\n                this.logger?.info(`[Map] deleteMap ================================`);\n                command = new map_command_domain_1.MapCommandModel({\n                    mapName: request.mapName,\n                    command: map_command_domain_1.MapCommand.deleteMap,\n                });\n                const result = await this.databaseOutput.save(command);\n                command.assignId(result.id.toString());\n                command.checkVariables();\n                await this.mapFileOutput.deleteMap(command);\n                command.statusChange(map_command_domain_1.CommandStatus.success);\n                await this.databaseOutput.update(command);\n                resolve({ mapName: command.mapName });\n            }\n            catch (error) {\n                console.error(error);\n                if (command) {\n                    command.statusChange(map_command_domain_1.CommandStatus.fail);\n                    await this.databaseOutput.update(command);\n                }\n                if (error instanceof microservices_1.RpcException) {\n                    reject(error);\n                }\n                reject(new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError));\n            }\n        });\n    }\n    async loadRequest(request) {\n        let command = null;\n        let resp = null;\n        try {\n            this.logger?.info(`[Map] loadRequest : ${JSON.stringify(command)}`);\n            command = new map_command_domain_1.MapCommandModel({ command: map_command_domain_1.MapCommand.loadMap, mapName: request.mapName });\n            const result = await this.databaseOutput.save(command);\n            command.assignId(result.id.toString());\n            command.checkVariables();\n            if (!this.slamnav_connection) {\n                throw new rpc_code_exception_1.RpcCodeException('SLAMNAV  ', constant_1.GrpcCode.FailedPrecondition);\n            }\n            resp = await this.slamnavOutput.loadRequest(command);\n            this.logger?.info(`[Map] LoadMap Response : ${JSON.stringify(resp)}`);\n            await command.checkResult(resp.result, resp.message);\n            this.logger?.info(`[Map] LoadMap DB Update : ${result?.id.toString()}`);\n            return resp;\n        }\n        catch (error) {\n            this.logger?.error(`[Map] loadRequest : ${(0, common_1.errorToJson)(error)}`);\n            if (command) {\n                command.statusChange(resp?.result ?? map_command_domain_1.CommandStatus.fail);\n            }\n            if (error instanceof microservices_1.RpcException) {\n                throw error;\n            }\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n        finally {\n            if (command) {\n                await this.databaseOutput.update(command);\n            }\n        }\n    }\n    async mappingRequest(request) {\n        let command = null;\n        let resp = null;\n        try {\n            this.logger?.info(`[Map] mappingRequest : ${JSON.stringify(command)}`);\n            command = new map_command_domain_1.MapCommandModel({ command: request.command, mapName: request.mapName });\n            const result = await this.databaseOutput.save(command);\n            command.assignId(result.id.toString());\n            command.checkVariables();\n            if (!this.slamnav_connection) {\n                throw new rpc_code_exception_1.RpcCodeException('SLAMNAV  ', constant_1.GrpcCode.FailedPrecondition);\n            }\n            resp = await this.slamnavOutput.mappingRequest(command);\n            this.logger?.info(`[Map] Mapping Response : ${JSON.stringify(resp)}`);\n            await command.checkResult(resp.result, resp.message);\n            this.logger?.info(`[Map] Mapping DB Update : ${result?.id.toString()}`);\n            return resp;\n        }\n        catch (error) {\n            if (command) {\n                command.statusChange(resp?.result ?? map_command_domain_1.CommandStatus.fail);\n            }\n            if (error instanceof microservices_1.RpcException) {\n                throw error;\n            }\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n        finally {\n            if (command) {\n                await this.databaseOutput.update(command);\n            }\n        }\n    }\n    async loadResponse(response) {\n        this.logger?.info(`[Map] loadResponse : ${JSON.stringify(response)}`);\n        if (response.id) {\n            const dbmodel = await this.databaseOutput.getNodebyId(response.id);\n            if (dbmodel) {\n                const model = new map_command_domain_1.MapCommandModel(dbmodel);\n                model.assignId(dbmodel.id);\n                model.statusChange(response.result);\n                await this.databaseOutput.update(model);\n                this.logger?.info(`[Map] loadResponse : ${model.id}, ${model.status}`);\n            }\n        }\n    }\n    async mappingResponse(response) {\n        this.logger?.info(`[Map] mappingResponse : ${JSON.stringify(response)}`);\n        const dbmodel = await this.databaseOutput.getNodebyId(response.id);\n        if (dbmodel) {\n            const model = new map_command_domain_1.MapCommandModel(dbmodel);\n            model.assignId(dbmodel.id);\n            model.statusChange(response.result);\n            await this.databaseOutput.update(model);\n            this.logger?.info(`[Map] mappingResponse : ${model.id}, ${model.status}`);\n        }\n    }\n    async parseMapList(path) {\n        try {\n            const list = [];\n            const entries = (0, fs_1.readdirSync)(path, { withFileTypes: true });\n            for (const entry of entries) {\n                if (entry.isDirectory()) {\n                    const fullPath = path + '/' + entry.name;\n                    const stats = (0, fs_1.statSync)(fullPath);\n                    const model = {\n                        fileName: entry.name,\n                        updateAt: util_1.DateUtil.formatDateTimeKST(stats.mtime),\n                        cloudFiles: [],\n                        topoFiles: [],\n                    };\n                    const files = (0, fs_1.readdirSync)(fullPath, { withFileTypes: true });\n                    for (const file of files) {\n                        if (file.name.split('.')[1] === 'csv' && file.name.includes('cloud')) {\n                            model.cloudFiles.push({\n                                fileName: file.name,\n                                createAt: util_1.DateUtil.formatDateTimeKST(stats.mtime),\n                                updateAt: util_1.DateUtil.formatDateTimeKST(stats.mtime),\n                                fileType: file.name.split('.')[1],\n                            });\n                        }\n                        else if (file.name.split('.')[1] === 'json' && file.name.includes('topo')) {\n                            model.topoFiles.push({\n                                fileName: file.name,\n                                createAt: util_1.DateUtil.formatDateTimeKST(stats.mtime),\n                                updateAt: util_1.DateUtil.formatDateTimeKST(stats.mtime),\n                                fileType: file.name.split('.')[1],\n                            });\n                        }\n                    }\n                    if (model.cloudFiles.length > 0 || model.topoFiles.length > 0) {\n                        list.push(model);\n                    }\n                }\n            }\n            return { list: list };\n        }\n        catch (error) {\n            this.logger?.error(`[Map] parseMapList : ${util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    slamConnect() {\n        this.logger?.debug(`[Map] Slamnav Connected`);\n        this.slamnav_connection = true;\n    }\n    slamDisconnect() {\n        this.logger?.debug(`[Map] Slamnav Disonnected`);\n        this.slamnav_connection = false;\n    }\n};\nexports.MapService = MapService;\nexports.MapService = MapService = __decorate([\n    __param(0, (0, common_2.Inject)('DatabaseOutputPort')),\n    __param(1, (0, common_2.Inject)('SlamnavOutputPort')),\n    __param(2, (0, common_2.Inject)('MapFileOutputPort')),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof map_database_output_port_1.MapDatabaseOutputPort !== \"undefined\" && map_database_output_port_1.MapDatabaseOutputPort) === \"function\" ? _a : Object, typeof (_b = typeof map_slamnav_output_port_1.MapSlamnavOutputPort !== \"undefined\" && map_slamnav_output_port_1.MapSlamnavOutputPort) === \"function\" ? _b : Object, typeof (_c = typeof map_file_output_port_1.MapFileOutputPort !== \"undefined\" && map_file_output_port_1.MapFileOutputPort) === \"function\" ? _c : Object, typeof (_d = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _d : Object])\n], MapService);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapCommandModel = exports.MapCommand = exports.CommandStatus = void 0;\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst path_1 = require(\"path\");\nconst fs_1 = require(\"fs\");\nvar CommandStatus;\n(function (CommandStatus) {\n    CommandStatus[\"pending\"] = \"pending\";\n    CommandStatus[\"accept\"] = \"accept\";\n    CommandStatus[\"reject\"] = \"reject\";\n    CommandStatus[\"fail\"] = \"fail\";\n    CommandStatus[\"success\"] = \"success\";\n    CommandStatus[\"canceled\"] = \"canceled\";\n    CommandStatus[\"unknown\"] = \"unknown\";\n})(CommandStatus || (exports.CommandStatus = CommandStatus = {}));\nvar MapCommand;\n(function (MapCommand) {\n    MapCommand[\"uploadMap\"] = \"upload\";\n    MapCommand[\"downloadMap\"] = \"download\";\n    MapCommand[\"publishMap\"] = \"publish\";\n    MapCommand[\"getMapList\"] = \"list\";\n    MapCommand[\"getCloud\"] = \"getCloud\";\n    MapCommand[\"saveCloud\"] = \"saveCloud\";\n    MapCommand[\"getTopo\"] = \"getTopo\";\n    MapCommand[\"saveTopo\"] = \"saveTopo\";\n    MapCommand[\"loadMap\"] = \"loadMap\";\n    MapCommand[\"loadTopo\"] = \"loadTopo\";\n    MapCommand[\"deleteMap\"] = \"deleteMap\";\n    MapCommand[\"mappingStart\"] = \"mappingStart\";\n    MapCommand[\"mappingStop\"] = \"mappingStop\";\n    MapCommand[\"mappingSave\"] = \"mappingSave\";\n    MapCommand[\"mappingReload\"] = \"mappingReload\";\n})(MapCommand || (exports.MapCommand = MapCommand = {}));\nclass MapCommandModel {\n    constructor(param) {\n        this.command = param.command;\n        this.mapName = param.mapName;\n        this.fileName = param.fileName;\n        this.newMapName = param.newMapName;\n        this.isForce = param.isForce;\n        this.status = CommandStatus.pending;\n        this.path = this.getMapsDir();\n        this.cloud = param.cloud;\n        this.topo = param.topo;\n    }\n    setTopology(param) {\n        this.command = param.command;\n        this.mapName = param.mapName;\n        this.fileName = this.getFileName(param.fileName);\n        this.newMapName = param.newMapName;\n        this.isForce = param.isForce;\n        this.status = CommandStatus.pending;\n        this.path = this.getMapsDir();\n        this.cloud = param.cloud;\n        this.topo = param.topo;\n    }\n    assignId(id) {\n        this.id = id;\n    }\n    getFileName(fileName) {\n        const paths = this.getMapsDir(this.mapName);\n        if ((0, fs_1.existsSync)((0, path_1.join)(paths, 'node.json'))) {\n            console.log('getFileName1 : node.json');\n            return 'node.json';\n        }\n        else {\n            console.log('getFileName2 : ', fileName);\n            return fileName;\n        }\n    }\n    async checkResult(result, message) {\n        this.statusChange(result);\n        if (result === 'reject' || result === 'fail') {\n            throw new rpc_code_exception_1.RpcCodeException(message ?? '  ', constant_1.GrpcCode.Aborted);\n        }\n    }\n    getMapsDir(mapName, fileName) {\n        const paths = ['/data/maps'];\n        if (mapName)\n            paths.push(mapName);\n        if (fileName)\n            paths.push(fileName);\n        return (0, path_1.join)(...paths);\n    }\n    statusChange(status) {\n        if (!this.id) {\n            throw new rpc_code_exception_1.RpcCodeException('ID ', constant_1.GrpcCode.InvalidArgument);\n        }\n        const parseStatus = this.parseStatus(status);\n        this.status = parseStatus;\n    }\n    checkVariables() {\n        switch (this.command) {\n            case MapCommand.uploadMap:\n            case MapCommand.downloadMap:\n            case MapCommand.publishMap: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.newMapName === undefined || this.newMapName === '') {\n                    this.newMapName = this.mapName;\n                }\n                this.path = this.getMapsDir(this.mapName);\n                this.newPath = this.getMapsDir(this.newMapName);\n                break;\n            }\n            case MapCommand.deleteMap: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName);\n                break;\n            }\n            case MapCommand.getMapList: {\n                this.path = this.getMapsDir();\n                break;\n            }\n            case MapCommand.getTopo: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName === undefined || this.fileName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('fileName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName.split('.').length === 2) {\n                    if (this.fileName.split('.')[1] !== 'json') {\n                        throw new rpc_code_exception_1.RpcCodeException(`   . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                    }\n                }\n                else {\n                    throw new rpc_code_exception_1.RpcCodeException(` . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName, this.fileName);\n                break;\n            }\n            case MapCommand.getCloud: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName === undefined || this.fileName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('fileName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName.split('.').length === 2) {\n                    if (this.fileName.split('.')[1] !== 'csv') {\n                        throw new rpc_code_exception_1.RpcCodeException(`   . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                    }\n                }\n                else {\n                    throw new rpc_code_exception_1.RpcCodeException(` . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName, this.fileName);\n                break;\n            }\n            case MapCommand.saveCloud: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException(`mapName  .`, constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName === undefined || this.fileName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException(`fileName  .`, constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName.split('.').length === 2) {\n                    if (this.fileName.split('.')[1] !== 'csv') {\n                        throw new rpc_code_exception_1.RpcCodeException(`   . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                    }\n                }\n                else {\n                    throw new rpc_code_exception_1.RpcCodeException(` . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                }\n                if (!this.cloud || this.cloud.length === 0) {\n                    throw new rpc_code_exception_1.RpcCodeException(`cloud  .`, constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName, this.fileName);\n                break;\n            }\n            case MapCommand.saveTopo: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName === undefined || this.fileName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('fileName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fileName.split('.').length === 2) {\n                    if (this.fileName.split('.')[1] !== 'json') {\n                        throw new rpc_code_exception_1.RpcCodeException(`   . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                    }\n                }\n                else {\n                    throw new rpc_code_exception_1.RpcCodeException(` . (fileName = ${this.fileName})`, constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.topo === undefined || this.topo.length === 0) {\n                    throw new rpc_code_exception_1.RpcCodeException(`topo  .`, constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName, this.fileName);\n                break;\n            }\n            case MapCommand.loadMap: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName);\n                break;\n            }\n            case MapCommand.loadTopo: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName, this.fileName);\n                break;\n            }\n            case MapCommand.mappingStart: {\n                break;\n            }\n            case MapCommand.mappingStop: {\n                break;\n            }\n            case MapCommand.mappingSave: {\n                if (this.mapName === undefined || this.mapName === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mapName  ', constant_1.GrpcCode.InvalidArgument);\n                }\n                this.path = this.getMapsDir(this.mapName);\n                if ((0, fs_1.existsSync)(this.path)) {\n                    throw new rpc_code_exception_1.RpcCodeException(`${this.mapName}   .`, constant_1.GrpcCode.AlreadyExists);\n                }\n                break;\n            }\n            case MapCommand.mappingReload: {\n                break;\n            }\n        }\n    }\n    parseStatus(value) {\n        if (Object.values(CommandStatus).includes(value)) {\n            return value;\n        }\n        return CommandStatus.unknown;\n    }\n}\nexports.MapCommandModel = MapCommandModel;\n","module.exports = require(\"form-data\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ZipUtil = void 0;\nconst AdmZip = require(\"adm-zip\");\nconst fs_1 = require(\"fs\");\nconst path_1 = require(\"path\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nclass ZipUtil {\n    static async zipFolder(sourcePath, zipPath) {\n        try {\n            const zip = new AdmZip();\n            const addFilesRecursively = async (folderPath, zipFolderPath = '') => {\n                const files = (0, fs_1.readdirSync)(folderPath);\n                files.forEach((file) => {\n                    const filePath = (0, path_1.join)(folderPath, file);\n                    const stat = (0, fs_1.statSync)(filePath);\n                    if (stat.isDirectory()) {\n                        addFilesRecursively(filePath, (0, path_1.join)(zipFolderPath, file));\n                    }\n                    else {\n                        zip.addLocalFile(filePath, zipFolderPath);\n                    }\n                });\n            };\n            addFilesRecursively(sourcePath);\n            zip.writeZip(zipPath);\n            return true;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    static async unzipFolder(zipPath, targetPath) {\n        try {\n            const zip = new AdmZip(zipPath);\n            if (!(0, fs_1.existsSync)(targetPath)) {\n                (0, fs_1.mkdirSync)(targetPath, { recursive: true });\n            }\n            zip.extractAllTo(targetPath, true);\n            return true;\n        }\n        catch (error) {\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n}\nexports.ZipUtil = ZipUtil;\n","module.exports = require(\"adm-zip\");","module.exports = require(\"axios\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapSocketIOAdapter = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst map_command_domain_1 = require(\"../../domain/map-command.domain\");\nconst constant_1 = require(\"@app/common/constant\");\nconst map_pending_service_1 = require(\"../../application/map.pending.service\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_2 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet MapSocketIOAdapter = class MapSocketIOAdapter {\n    constructor(saveLogService, mqttService, pendingService) {\n        this.saveLogService = saveLogService;\n        this.mqttService = mqttService;\n        this.pendingService = pendingService;\n        this.logger = this.saveLogService.get('host');\n    }\n    async mappingRequest(request) {\n        this.logger?.debug(`[Map] moveRequest : ${JSON.stringify(request)}`);\n        const response = this.waitForResponse(request.id, 5000);\n        this.mqttService.emit('mappingRequest', request);\n        const resp = await response;\n        this.logger?.debug(`[Map] moveResponse : ${JSON.stringify(resp)}`);\n        return resp;\n    }\n    async loadRequest(request) {\n        this.logger?.debug(`[Map] loadRequest : ${JSON.stringify(request)}`);\n        const response = this.waitForResponse(request.id, 5000);\n        this.mqttService.emit('loadRequest', request);\n        const resp = await response;\n        this.logger?.debug(`[Map] loadResponse : ${JSON.stringify(resp)}`);\n        return resp;\n    }\n    async reloadTopology() {\n        this.mqttService.emit('loadRequest', { command: map_command_domain_1.MapCommand.loadTopo });\n    }\n    async waitForResponse(id, timeoutMs) {\n        return new Promise((resolve, reject) => {\n            let timeout;\n            if (timeoutMs) {\n                timeout = setTimeout(() => {\n                    this.pendingService.pendingResponses.delete(id);\n                    this.logger?.error(`[Map] waitForResponse Timeout : ${id} , ${timeoutMs}`);\n                    reject(new rpc_code_exception_1.RpcCodeException(`  .`, constant_2.GrpcCode.DeadlineExceeded));\n                }, timeoutMs);\n            }\n            this.pendingService.pendingResponses.set(id, {\n                resolve: (value) => {\n                    if (timeoutMs) {\n                        clearTimeout(timeout);\n                    }\n                    resolve(value);\n                },\n                reject: (error) => {\n                    if (timeoutMs) {\n                        clearTimeout(timeout);\n                    }\n                    reject(error);\n                },\n                received: [],\n            });\n        });\n    }\n};\nexports.MapSocketIOAdapter = MapSocketIOAdapter;\nexports.MapSocketIOAdapter = MapSocketIOAdapter = __decorate([\n    (0, common_1.Injectable)(),\n    __param(1, (0, common_1.Inject)(constant_1.MQTT_BROKER)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object, typeof (_b = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _b : Object, typeof (_c = typeof map_pending_service_1.MapPendingResponseService !== \"undefined\" && map_pending_service_1.MapPendingResponseService) === \"function\" ? _c : Object])\n], MapSocketIOAdapter);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.message = exports.environment = void 0;\n__exportStar(require(\"./service.constant\"), exports);\n__exportStar(require(\"./type\"), exports);\nexports.environment = require(\"./environment\");\nexports.message = require(\"./message\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MQTT_BROKER = exports.SERVICE_LOG_SERVICE = exports.SEMLOG_SERVICE = exports.TCP_SERVICE = exports.COBOT_SERVICE = exports.TASK_SERVICE = exports.SOUND_SERVICE = exports.UPDATE_SERVICE = exports.MAP_SERVICE = exports.TEST_SERVICE = exports.NETWORK_SERVICE = exports.LOCALIZATION_SERVICE = exports.MOVE_SERVICE = exports.CONTROL_SERVICE = exports.SETTING_SERVICE = exports.CONFIG_SERVICE = exports.CODE_SERVICE = exports.REDIS_SERVICE = exports.AMR_SERVICE = exports.GROUP_SERVICE = exports.ROLE_SERVICE = exports.PERMISSION_SERVICE = exports.USER_SERVICE = exports.AUTH_SERVICE = void 0;\nexports.AUTH_SERVICE = 'AUTH_SERVICE';\nexports.USER_SERVICE = 'USER_SERVICE';\nexports.PERMISSION_SERVICE = 'PERMISSION_SERVICE';\nexports.ROLE_SERVICE = 'ROLE_SERVICE';\nexports.GROUP_SERVICE = 'GROUP_SERVICE';\nexports.AMR_SERVICE = 'AMR_SERVICE';\nexports.REDIS_SERVICE = 'REDIS_SERVICE';\nexports.CODE_SERVICE = 'CODE_SERVICE';\nexports.CONFIG_SERVICE = 'CONFIG_SERVICE';\nexports.SETTING_SERVICE = 'SETTING_SERVICE';\nexports.CONTROL_SERVICE = 'CONTROL_SERVICE';\nexports.MOVE_SERVICE = 'MOVE_SERVICE';\nexports.LOCALIZATION_SERVICE = 'LOCALIZATION_SERVICE';\nexports.NETWORK_SERVICE = 'NETWORK_SERVICE';\nexports.TEST_SERVICE = 'TEST_SERVICE';\nexports.MAP_SERVICE = 'MAP_SERVICE';\nexports.UPDATE_SERVICE = 'UPDATE_SERVICE';\nexports.SOUND_SERVICE = 'SOUND_SERVICE';\nexports.TASK_SERVICE = 'TASK_SERVICE';\nexports.COBOT_SERVICE = 'COBOT_SERVICE';\nexports.TCP_SERVICE = 'TCP_SERVICE';\nexports.SEMLOG_SERVICE = 'SEMLOG_SERVICE';\nexports.SERVICE_LOG_SERVICE = 'SERVICE_LOG_SERVICE';\nexports.MQTT_BROKER = 'MQTT_BROKER';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./system.constant\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SYSTEM = void 0;\nexports.SYSTEM = {\n    INTERACTIVE: {\n        FMS: 'FMS',\n        FRS: 'FRS',\n        ACS: 'ACS',\n        IMS: 'IMS',\n    },\n    CONTROL: {\n        RRS: 'RRS',\n    },\n    CONNECTION: {\n        CLIENT: 'CLIENT',\n        AMR: 'AMR',\n    },\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./message.constant\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SUCCESS_MESSAGES = exports.ERROR_MESSAGE = void 0;\nexports.ERROR_MESSAGE = {\n    USER: {\n        ID_REQUIRED: '  .',\n        NOT_FOUND: '   .',\n        ALREADY_EXISTS: '  .',\n        INVALID_PASSWORD: '  .',\n    },\n    ROBOT: {\n        SERIAL_REQUIRED: '  .',\n        NOT_FOUND: '   .',\n        ALREADY_EXISTS: '  .',\n    },\n    AUTH: {\n        TOKEN_REQUIRED: '  .',\n        TOKEN_INVALID: '  .',\n        TOKEN_EXPIRED: ' .',\n        UNAUTHORIZED: ' .',\n        ALREADY_EXISTS: '  .',\n    },\n    CODE: {\n        NOT_FOUND: '   .',\n        ALREADY_EXISTS: '  .',\n    },\n    SOCKET: {\n        NOT_FOUND: 'Socket   .',\n    },\n    MAP: {\n        NOT_FOUND: '   .',\n        INVALID_FORMAT: '   .',\n        SAVE_FAILED: '  .',\n    },\n    COMMON: {\n        BAD_REQUEST: ' .',\n        INTERNAL_SERVER_ERROR: '   .',\n        VALIDATION_FAILED: '  .',\n        FORBIDDEN: ' .',\n    },\n};\nexports.SUCCESS_MESSAGES = {\n    USER: {\n        CREATED: '  .',\n        UPDATED: '   .',\n        DELETED: '  .',\n    },\n    MAP: {\n        SAVED: '  .',\n        LOADED: '  .',\n        UPDATED: '  .',\n    },\n};\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapPendingResponseService = void 0;\nconst pending_util_1 = require(\"@app/common/util/pending/pending.util\");\nconst common_1 = require(\"@nestjs/common\");\nlet MapPendingResponseService = class MapPendingResponseService extends pending_util_1.PendingResponseUtil {\n};\nexports.MapPendingResponseService = MapPendingResponseService;\nexports.MapPendingResponseService = MapPendingResponseService = __decorate([\n    (0, common_1.Injectable)()\n], MapPendingResponseService);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PendingResponseUtil = void 0;\nconst common_1 = require(\"@nestjs/common\");\nlet PendingResponseUtil = class PendingResponseUtil {\n    constructor() {\n        this.pendingResponses = new Map();\n    }\n};\nexports.PendingResponseUtil = PendingResponseUtil;\nexports.PendingResponseUtil = PendingResponseUtil = __decorate([\n    (0, common_1.Injectable)()\n], PendingResponseUtil);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c, _d, _e, _f;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapMqttInputController = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst map_service_1 = require(\"../../application/map.service\");\nconst map_pending_service_1 = require(\"../../application/map.pending.service\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst log_1 = require(\"@app/common/log\");\nconst mapping_dto_1 = require(\"@app/common/model/dto/file/map/mapping.dto\");\nconst load_dto_1 = require(\"@app/common/model/dto/file/map/load.dto\");\nconst status_type_1 = require(\"@app/common/model/dto/slamnav/type/status.type\");\nlet MapMqttInputController = class MapMqttInputController {\n    constructor(saveLogService, mapService, pendingService) {\n        this.saveLogService = saveLogService;\n        this.mapService = mapService;\n        this.pendingService = pendingService;\n        this.logger = this.saveLogService.get('host');\n    }\n    getConnect() {\n        this.logger?.info(`[Map] slam Connected`);\n        this.mapService.slamConnect();\n    }\n    getDisconnect() {\n        this.logger?.warn(`[Map] slam Disconnected`);\n        this.mapService.slamDisconnect();\n        this.pendingService.pendingResponses.forEach((resp) => {\n            resp.reject(new rpc_code_exception_1.RpcCodeException('SLAMNAV  ', constant_1.GrpcCode.InternalError));\n        });\n        this.pendingService.pendingResponses.clear();\n    }\n    getStatus(data) {\n        this.mapService.setCurrentMap(data.map.map_name);\n    }\n    getMoveResponse(data) {\n        try {\n            const { id } = data;\n            const listener = this.pendingService.pendingResponses.get(id);\n            if (listener) {\n                listener.received.push(data);\n                listener.resolve(data);\n                this.pendingService.pendingResponses.delete(id);\n            }\n            else {\n                this.mapService.mappingResponse(data);\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Map] getMoveResponse : ${(0, log_1.errorToJson)(error)}`);\n        }\n    }\n    getLoadResponse(data) {\n        try {\n            const { id } = data;\n            const listener = this.pendingService.pendingResponses.get(id);\n            if (listener) {\n                listener.received.push(data);\n                listener.resolve(data);\n                this.pendingService.pendingResponses.delete(id);\n            }\n            else {\n                this.mapService.loadResponse(data);\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Map] getLoadResponse : ${(0, log_1.errorToJson)(error)}`);\n        }\n    }\n};\nexports.MapMqttInputController = MapMqttInputController;\n__decorate([\n    (0, microservices_1.EventPattern)('con:slamnav'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], MapMqttInputController.prototype, \"getConnect\", null);\n__decorate([\n    (0, microservices_1.EventPattern)('discon:slamnav'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], MapMqttInputController.prototype, \"getDisconnect\", null);\n__decorate([\n    (0, microservices_1.EventPattern)('status'),\n    __param(0, (0, microservices_1.Payload)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_d = typeof status_type_1.StatusSlamnav !== \"undefined\" && status_type_1.StatusSlamnav) === \"function\" ? _d : Object]),\n    __metadata(\"design:returntype\", void 0)\n], MapMqttInputController.prototype, \"getStatus\", null);\n__decorate([\n    (0, microservices_1.EventPattern)('mappingResponse'),\n    __param(0, (0, microservices_1.Payload)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_e = typeof mapping_dto_1.MappingResponseSlamnav !== \"undefined\" && mapping_dto_1.MappingResponseSlamnav) === \"function\" ? _e : Object]),\n    __metadata(\"design:returntype\", void 0)\n], MapMqttInputController.prototype, \"getMoveResponse\", null);\n__decorate([\n    (0, microservices_1.EventPattern)('loadResponse'),\n    __param(0, (0, microservices_1.Payload)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_f = typeof load_dto_1.LoadResponseSlamnav !== \"undefined\" && load_dto_1.LoadResponseSlamnav) === \"function\" ? _f : Object]),\n    __metadata(\"design:returntype\", void 0)\n], MapMqttInputController.prototype, \"getLoadResponse\", null);\nexports.MapMqttInputController = MapMqttInputController = __decorate([\n    (0, common_1.Controller)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object, typeof (_b = typeof map_service_1.MapService !== \"undefined\" && map_service_1.MapService) === \"function\" ? _b : Object, typeof (_c = typeof map_pending_service_1.MapPendingResponseService !== \"undefined\" && map_pending_service_1.MapPendingResponseService) === \"function\" ? _c : Object])\n], MapMqttInputController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MappingResponseFrs = exports.MappingResponseSlamnav = exports.MappingRequestSlamnav = exports.MappingResponseDto = exports.MappingRequestDto = exports.SaveMappingRequestDto = exports.Description = void 0;\nconst swagger_1 = require(\"@nestjs/swagger\");\nconst class_validator_1 = require(\"class-validator\");\nconst class_transformer_1 = require(\"class-transformer\");\nconst util_1 = require(\"@app/common/util\");\nconst load_dto_1 = require(\"./load.dto\");\nvar Description;\n(function (Description) {\n    Description[\"ID\"] = \"\\uC694\\uCCAD\\uD55C \\uBA85\\uB839\\uC758 ID\\uAC12\\uC785\\uB2C8\\uB2E4. request\\uC2DC \\uC790\\uB3D9 \\uC0DD\\uC131\\uB429\\uB2C8\\uB2E4.\";\n    Description[\"COMMAND\"] = \"\\uC2E4\\uD589\\uD560 \\uBA85\\uB839\";\n    Description[\"MAPNAME\"] = \"\\uB85C\\uB4DC(\\uC800\\uC7A5)\\uD560 \\uB9F5 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n    Description[\"FILE\"] = \"\\uC800\\uC7A5\\uD560 \\uD30C\\uC77C\\uC758 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694. \\uD655\\uC7A5\\uC790\\uB97C \\uD3EC\\uD568\\uD558\\uC5EC \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n    Description[\"EXTENSION\"] = \"\\uB85C\\uB4DC(\\uC800\\uC7A5)\\uD560 \\uD30C\\uC77C\\uC758 \\uD655\\uC7A5\\uC790\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694. cloud\\uC758 \\uACBD\\uC6B0 \\uD604\\uC7AC csv\\uB9CC \\uC9C0\\uC6D0\\uD558\\uBA70 topology\\uB294 \\uD604\\uC7AC json \\uD615\\uC2DD\\uB9CC \\uC9C0\\uC6D0\\uD569\\uB2C8\\uB2E4.\";\n    Description[\"MAPPING_NAME\"] = \"\\uC0C8\\uB85C \\uC0DD\\uC131\\uD55C \\uB9F5\\uC758 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n    Description[\"RESULT\"] = \"\\uC694\\uCCAD\\uD55C \\uBA85\\uB839\\uC5D0 \\uB300\\uD55C \\uACB0\\uACFC\\uC785\\uB2C8\\uB2E4. accept, reject, success, fail \\uB4F1 \\uBA85\\uB839\\uC5D0 \\uB300\\uD574 \\uB2E4\\uC591\\uD55C \\uAC12\\uC774 \\uC874\\uC7AC\\uD569\\uB2C8\\uB2E4.\";\n    Description[\"MESSAGE\"] = \"result\\uAC12\\uC774 reject, fail \\uC778 \\uACBD\\uC6B0 SLAMNAV\\uC5D0\\uC11C \\uBCF4\\uB0B4\\uB294 \\uBA54\\uC2DC\\uC9C0 \\uC785\\uB2C8\\uB2E4.\";\n    Description[\"TIME\"] = \"\\uBA54\\uC2DC\\uC9C0 \\uBC1C\\uC1A1 \\uC2DC\\uAC04. ms \\uB2E8\\uC704\";\n    Description[\"TOPO\"] = \"\\uC800\\uC7A5\\uD560 \\uD1A0\\uD3F4\\uB85C\\uC9C0 \\uD615\\uC2DD\\uC744 \\uB9DE\\uCDB0 \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n})(Description || (exports.Description = Description = {}));\nclass SaveMappingRequestDto {\n}\nexports.SaveMappingRequestDto = SaveMappingRequestDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MAPNAME,\n        example: 'Test',\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], SaveMappingRequestDto.prototype, \"mapName\", void 0);\nclass MappingRequestDto {\n}\nexports.MappingRequestDto = MappingRequestDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.COMMAND,\n        example: load_dto_1.MapCommand.mappingSave,\n        enum: [load_dto_1.MapCommand.mappingSave, load_dto_1.MapCommand.mappingReload, load_dto_1.MapCommand.mappingStart, load_dto_1.MapCommand.mappingStop],\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], MappingRequestDto.prototype, \"command\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MAPNAME,\n        example: 'Test',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], MappingRequestDto.prototype, \"mapName\", void 0);\nclass MappingResponseDto extends MappingRequestDto {\n}\nexports.MappingResponseDto = MappingResponseDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.RESULT,\n        example: 'accept',\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    (0, class_transformer_1.Expose)(),\n    __metadata(\"design:type\", String)\n], MappingResponseDto.prototype, \"result\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MESSAGE,\n        example: '',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_validator_1.Length)(1, 50),\n    (0, class_transformer_1.Expose)(),\n    __metadata(\"design:type\", String)\n], MappingResponseDto.prototype, \"message\", void 0);\nclass MappingRequestSlamnav extends MappingRequestDto {\n}\nexports.MappingRequestSlamnav = MappingRequestSlamnav;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.ID,\n        example: util_1.UrlUtil.generateUUID(),\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    (0, class_transformer_1.Expose)(),\n    __metadata(\"design:type\", String)\n], MappingRequestSlamnav.prototype, \"id\", void 0);\nclass MappingResponseSlamnav extends MappingResponseDto {\n}\nexports.MappingResponseSlamnav = MappingResponseSlamnav;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.ID,\n        example: 'Test',\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], MappingResponseSlamnav.prototype, \"id\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.RESULT,\n        example: 'accept',\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], MappingResponseSlamnav.prototype, \"result\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MESSAGE,\n        example: '',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], MappingResponseSlamnav.prototype, \"message\", void 0);\nclass MappingResponseFrs {\n}\nexports.MappingResponseFrs = MappingResponseFrs;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: 'FRS      ',\n        example: util_1.UrlUtil.generateUUID(),\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], MappingResponseFrs.prototype, \"robotSerial\", void 0);\n","module.exports = require(\"@nestjs/swagger\");","module.exports = require(\"class-validator\");","module.exports = require(\"class-transformer\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LoadResponseFrs = exports.LoadResponseSlamnav = exports.LoadRequestSlamnav = exports.LoadResponseDto = exports.LoadRequestDto = exports.MapLoadRequestDto = exports.MapCommand = void 0;\nconst swagger_1 = require(\"@nestjs/swagger\");\nconst class_validator_1 = require(\"class-validator\");\nconst util_1 = require(\"@app/common/util\");\nconst description_1 = require(\"@app/common/model/dto/description\");\nconst class_transformer_1 = require(\"class-transformer\");\nvar Description;\n(function (Description) {\n    Description[\"ID\"] = \"\\uC694\\uCCAD\\uD55C \\uBA85\\uB839\\uC758 ID\\uAC12\\uC785\\uB2C8\\uB2E4. request\\uC2DC \\uC790\\uB3D9 \\uC0DD\\uC131\\uB429\\uB2C8\\uB2E4.\";\n    Description[\"COMMAND\"] = \"\\uC2E4\\uD589\\uD560 \\uBA85\\uB839\";\n    Description[\"MAPNAME\"] = \"\\uB85C\\uB4DC(\\uC800\\uC7A5)\\uD560 \\uB9F5 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n    Description[\"FILE\"] = \"\\uC800\\uC7A5\\uD560 \\uD30C\\uC77C\\uC758 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694. \\uD655\\uC7A5\\uC790\\uB97C \\uD3EC\\uD568\\uD558\\uC5EC \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n    Description[\"EXTENSION\"] = \"\\uB85C\\uB4DC(\\uC800\\uC7A5)\\uD560 \\uD30C\\uC77C\\uC758 \\uD655\\uC7A5\\uC790\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694. cloud\\uC758 \\uACBD\\uC6B0 \\uD604\\uC7AC csv\\uB9CC \\uC9C0\\uC6D0\\uD558\\uBA70 topology\\uB294 \\uD604\\uC7AC json \\uD615\\uC2DD\\uB9CC \\uC9C0\\uC6D0\\uD569\\uB2C8\\uB2E4.\";\n    Description[\"MAPPING_NAME\"] = \"\\uC0C8\\uB85C \\uC0DD\\uC131\\uD55C \\uB9F5\\uC758 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n    Description[\"RESULT\"] = \"\\uC694\\uCCAD\\uD55C \\uBA85\\uB839\\uC5D0 \\uB300\\uD55C \\uACB0\\uACFC\\uC785\\uB2C8\\uB2E4. accept, reject, success, fail \\uB4F1 \\uBA85\\uB839\\uC5D0 \\uB300\\uD574 \\uB2E4\\uC591\\uD55C \\uAC12\\uC774 \\uC874\\uC7AC\\uD569\\uB2C8\\uB2E4.\";\n    Description[\"MESSAGE\"] = \"result\\uAC12\\uC774 reject, fail \\uC778 \\uACBD\\uC6B0 SLAMNAV\\uC5D0\\uC11C \\uBCF4\\uB0B4\\uB294 \\uBA54\\uC2DC\\uC9C0 \\uC785\\uB2C8\\uB2E4.\";\n    Description[\"TIME\"] = \"\\uBA54\\uC2DC\\uC9C0 \\uBC1C\\uC1A1 \\uC2DC\\uAC04. ms \\uB2E8\\uC704\";\n    Description[\"TOPO\"] = \"\\uC800\\uC7A5\\uD560 \\uD1A0\\uD3F4\\uB85C\\uC9C0 \\uD615\\uC2DD\\uC744 \\uB9DE\\uCDB0 \\uC785\\uB825\\uD558\\uC138\\uC694.\";\n})(Description || (Description = {}));\nvar MapCommand;\n(function (MapCommand) {\n    MapCommand[\"uploadMap\"] = \"upload\";\n    MapCommand[\"downloadMap\"] = \"download\";\n    MapCommand[\"publishMap\"] = \"publish\";\n    MapCommand[\"getMapList\"] = \"list\";\n    MapCommand[\"getCloud\"] = \"getCloud\";\n    MapCommand[\"saveCloud\"] = \"saveCloud\";\n    MapCommand[\"getTopo\"] = \"getTopo\";\n    MapCommand[\"saveTopo\"] = \"saveTopo\";\n    MapCommand[\"loadMap\"] = \"loadMap\";\n    MapCommand[\"loadTopo\"] = \"loadTopo\";\n    MapCommand[\"mappingStart\"] = \"mappingStart\";\n    MapCommand[\"mappingStop\"] = \"mappingStop\";\n    MapCommand[\"mappingSave\"] = \"mappingSave\";\n    MapCommand[\"mappingReload\"] = \"mappingReload\";\n})(MapCommand || (exports.MapCommand = MapCommand = {}));\nclass MapLoadRequestDto {\n}\nexports.MapLoadRequestDto = MapLoadRequestDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MAPNAME,\n        example: 'Large',\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], MapLoadRequestDto.prototype, \"mapName\", void 0);\nclass LoadRequestDto {\n}\nexports.LoadRequestDto = LoadRequestDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.COMMAND,\n        example: MapCommand.loadMap,\n        enum: MapCommand,\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], LoadRequestDto.prototype, \"command\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MAPNAME,\n        example: 'Large',\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], LoadRequestDto.prototype, \"mapName\", void 0);\nclass LoadResponseDto extends LoadRequestDto {\n}\nexports.LoadResponseDto = LoadResponseDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.RESULT,\n        example: 'accept',\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    (0, class_transformer_1.Expose)(),\n    __metadata(\"design:type\", String)\n], LoadResponseDto.prototype, \"result\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MESSAGE,\n        example: '',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_validator_1.Length)(1, 50),\n    (0, class_transformer_1.Expose)(),\n    __metadata(\"design:type\", String)\n], LoadResponseDto.prototype, \"message\", void 0);\nclass LoadRequestSlamnav extends LoadRequestDto {\n}\nexports.LoadRequestSlamnav = LoadRequestSlamnav;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.ID,\n        example: util_1.UrlUtil.generateUUID(),\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    (0, class_transformer_1.Expose)(),\n    __metadata(\"design:type\", String)\n], LoadRequestSlamnav.prototype, \"id\", void 0);\nclass LoadResponseSlamnav extends LoadResponseDto {\n}\nexports.LoadResponseSlamnav = LoadResponseSlamnav;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.ID,\n        example: util_1.UrlUtil.generateUUID(),\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], LoadResponseSlamnav.prototype, \"id\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.RESULT,\n        example: 'accept',\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], LoadResponseSlamnav.prototype, \"result\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MESSAGE,\n        example: '',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], LoadResponseSlamnav.prototype, \"message\", void 0);\nclass LoadResponseFrs {\n}\nexports.LoadResponseFrs = LoadResponseFrs;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: description_1.FrsDescription.ROBOT_SERIAL,\n        example: util_1.UrlUtil.generateUUID(),\n        required: true,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], LoadResponseFrs.prototype, \"robotSerial\", void 0);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FrsDescription = void 0;\nvar FrsDescription;\n(function (FrsDescription) {\n    FrsDescription[\"COMMAND\"] = \"\";\n    FrsDescription[\"ROBOT_SERIAL\"] = \"\\uB85C\\uBD07\\uC2DC\\uB9AC\\uC5BC uuid. \\uB85C\\uBD07\\uC5D0 \\uC800\\uC7A5\\uB41C \\uACE0\\uC720\\uD55C \\uBC88\\uD638\\uB85C FRS\\uC5D0 \\uB4F1\\uB85D \\uC2DC \\uC0AC\\uC6A9\\uB428.\";\n    FrsDescription[\"ROBOT_NAME\"] = \"\\uB85C\\uBD07 \\uC774\\uB984. \\uCD08\\uAE30\\uC5D0 robotSerial\\uACFC \\uB3D9\\uC77C\\uD55C \\uAC12\\uC73C\\uB85C \\uC124\\uC815\\uB418\\uBA70 \\uBCC0\\uACBD \\uAC00\\uB2A5\";\n})(FrsDescription || (exports.FrsDescription = FrsDescription = {}));\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StatusSlamnav = exports.StatusMapDto = exports.StatusSettingDto = exports.StatusPowerDto = exports.StatusStateDto = exports.StatusConditionDto = exports.StatuMotorDto = exports.StatusLidarDto = exports.StatusIMUDto = void 0;\nconst date_util_1 = require(\"@app/common/util/date.util\");\nconst swagger_1 = require(\"@nestjs/swagger\");\nconst class_validator_1 = require(\"class-validator\");\nconst state_type_1 = require(\"./state.type\");\nconst class_transformer_1 = require(\"class-transformer\");\nvar Description;\n(function (Description) {\n    Description[\"IMU\"] = \"IMU, Gyro \\uC13C\\uC11C \\uB370\\uC774\\uD130\";\n    Description[\"IMU_ACC\"] = \"Gyro \\uC18D\\uB3C4\";\n    Description[\"IMU_GYR\"] = \"IMU \\uAC00\\uC18D\\uB3C4\";\n    Description[\"IMU_IMU\"] = \"IMU \\uC18D\\uB3C4\";\n    Description[\"LIDAR\"] = \"Lidar \\uC5F0\\uACB0 \\uC0C1\\uD0DC \\uBC0F \\uB370\\uC774\\uD130\";\n    Description[\"LIDAR_CONNECTION\"] = \"Lidar \\uC5F0\\uACB0 \\uC0C1\\uD0DC\";\n    Description[\"LIDAR_PORT\"] = \"Lidar \\uC5F0\\uACB0 \\uD3EC\\uD2B8\";\n    Description[\"LIDAR_SERIAL_NUMBER\"] = \"Lidar \\uC2DC\\uB9AC\\uC5BC \\uB118\\uBC84\";\n    Description[\"MOTOR\"] = \"\\uBAA8\\uD130 \\uC5F0\\uACB0 \\uC0C1\\uD0DC \\uBC0F \\uB370\\uC774\\uD130\";\n    Description[\"MOTOR_CONNECTION\"] = \"\\uBAA8\\uD130 \\uC5F0\\uACB0 \\uC0C1\\uD0DC\";\n    Description[\"MOTOR_CURRENT\"] = \"\\uBAA8\\uD130 \\uC804\\uB958\";\n    Description[\"MOTOR_STATUS\"] = \"\\uBAA8\\uD130 \\uC0C1\\uD0DC 8\\uAC00\\uC9C0\\uB97C 8bit \\uD615\\uD0DC\\uB85C \\uCABC\\uAC1C\\uC5B4 \\uAC01 \\uBE44\\uD2B8\\uC790\\uB9AC\\uC218\\uAC00 0 \\uD639\\uC740 1\\uC77C\\uB54C\\uC5D0 \\uB530\\uB77C\\uC11C \\uC0C1\\uD0DC\\uAC00 \\uBCC0\\uD568. \\uB0AE\\uC740\\uBE44\\uD2B8 \\uC21C\\uC11C\\uB85C (READY, MODE ERROR, JAM ERROR, CURRENT ERROR, BIG ERROR, INPUT ERROR, POSITION ERROR, COLLISTION ERROR)\\uB97C \\uB098\\uD0C0\\uB0B4\\uBA70, status \\uAC12\\uC774 0\\uC77C\\uB54C\\uB294 Motor Not ready, 1\\uC77C\\uB54C\\uB294 Motor Ready, 16\\uC77C\\uB54C\\uB294 Motor Big Error, 20\\uC77C\\uB54C\\uB294 Motor Big Error + Motor Jam Error \\uB4F1\\uC73C\\uB85C \\uD310\\uB2E8\\uD55C\\uB2E4.\";\n    Description[\"MOTOR_TEMP\"] = \"\\uBAA8\\uD130 \\uC628\\uB3C4\";\n    Description[\"CONDITION\"] = \"\\uB85C\\uBD07 \\uC704\\uCE58\\uCD94\\uC815 \\uC0C1\\uD0DC\";\n    Description[\"CONDITION_INLIER_ERROR\"] = \"\\uC704\\uCE58\\uCD94\\uC815 \\uC5D0\\uB7EC\\uC728\";\n    Description[\"CONDITION_INLIER_RATIO\"] = \"\\uC704\\uCE58\\uCD94\\uC815 \\uC815\\uD655\\uB3C4\";\n    Description[\"CONDITION_MAPPING_ERROR\"] = \"\\uB9E4\\uD551 \\uC5D0\\uB7EC\\uC728\";\n    Description[\"CONDITION_MAPPING_RATIO\"] = \"\\uB9E4\\uD551 \\uC815\\uD655\\uB3C4\";\n    Description[\"STATE\"] = \"\\uB85C\\uBD07 \\uC0C1\\uD0DC (\\uCDA9\\uC804, \\uB3C4\\uD0B9, \\uC804\\uC6D0, \\uCD08\\uAE30\\uD654)\";\n    Description[\"STATE_CHARGE\"] = \"\\uCDA9\\uC804 \\uC0C1\\uD0DC. \\uB85C\\uBD07\\uC774 SRV \\uD0C0\\uC785\\uC778 \\uACBD\\uC6B0, none, ready(\\uCDA9\\uC804 \\uC911) \\uC0C1\\uD0DC\\uB9CC \\uC874\\uC7AC\\uD568\";\n    Description[\"STATE_DOCK\"] = \"\\uB3C4\\uD0B9 \\uC0C1\\uD0DC\";\n    Description[\"STATE_EMO\"] = \"\\uBE44\\uC0C1\\uC804\\uC6D0\\uC2A4\\uC704\\uCE58 \\uC0C1\\uD0DC. \\uC2A4\\uC704\\uCE58\\uAC00 \\uB20C\\uB9B0\\uACBD\\uC6B0(\\uC804\\uC6D0 \\uCC28\\uB2E8) \\uAC12\\uC774 true\";\n    Description[\"STATE_LOCALIZATION\"] = \"\\uC704\\uCE58\\uCD08\\uAE30\\uD654 \\uC0C1\\uD0DC. \\uC704\\uCE58\\uCD08\\uAE30\\uD654\\uAC00 \\uB418\\uC9C0 \\uC54A\\uC740 \\uC0C1\\uD0DC\\uC5D0\\uC11C\\uB294 none, \\uC704\\uCE58\\uCD08\\uAE30\\uD654\\uAC00 \\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uB418\\uC5C8\\uC744 \\uACBD\\uC6B0 good, \\uC704\\uCE58\\uCD08\\uAE30\\uD654\\uC5D0 \\uC2E4\\uD328\\uD558\\uAC70\\uB098 \\uB3C4\\uC911\\uC5D0 \\uC704\\uCE58\\uB97C \\uC783\\uC5B4\\uBC84\\uB838\\uC744 \\uACBD\\uC6B0 fail \\uAC12\\uC744 \\uAC00\\uC9C4\\uB2E4\";\n    Description[\"STATE_POWER\"] = \"\\uC804\\uC6D0 \\uC0C1\\uD0DC. \\uB85C\\uBD07 \\uBAA8\\uD130\\uB2E8\\uC73C\\uB85C \\uC804\\uC6D0\\uC774 \\uC778\\uAC00\\uB418\\uB294 \\uC0C1\\uD0DC\\uC778 \\uACBD\\uC6B0 true\";\n    Description[\"POWER\"] = \"\\uB85C\\uBD07 \\uC804\\uC6D0 \\uC0C1\\uD0DC\";\n    Description[\"POWER_BATTERY_CURRENT\"] = \"\\uBC30\\uD130\\uB9AC \\uC804\\uB958\";\n    Description[\"POWER_BATTERY_IN\"] = \"\\uBC30\\uD130\\uB9AC \\uC785\\uB825\\uC804\\uC6D0\";\n    Description[\"POWER_BATTERY_OUT\"] = \"\\uBC30\\uD130\\uB9AC \\uCD9C\\uB825\\uC804\\uC6D0\";\n    Description[\"POWER_BATTERY_PERCENT\"] = \"\\uBC30\\uD130\\uB9AC \\uCD9C\\uB825\\uC804\\uC6D0(\\uD37C\\uC13C\\uD2B8)\";\n    Description[\"POWER_CHARGE_CURRENT\"] = \"\\uCDA9\\uC804 \\uC804\\uB958\";\n    Description[\"POWER_CONTACT_VOLTAGE\"] = \"\\uCDA9\\uC804 \\uC804\\uC555\";\n    Description[\"POWER_POWER\"] = \"\\uC804\\uB825\";\n    Description[\"POWER_TOTAL_POWER\"] = \"\\uB204\\uC801 \\uC804\\uB825\";\n    Description[\"SETTING\"] = \"\\uB85C\\uBD07\\uC758 \\uC138\\uD305 \\uAC12\";\n    Description[\"SETTING_PLATFORM_TYPE\"] = \"\\uB85C\\uBD07 \\uD0C0\\uC785\";\n    Description[\"MAP\"] = \"\\uB85C\\uBD07 \\uB9F5 \\uC0C1\\uD0DC\";\n    Description[\"MAP_NAME\"] = \"\\uB85C\\uBD07 \\uB9F5 \\uC774\\uB984\";\n    Description[\"MAP_STATUS\"] = \"\\uB85C\\uBD07 \\uB9F5 \\uB85C\\uB529 \\uC0C1\\uD0DC. \\uB9F5\\uC774 \\uB85C\\uB529\\uB418\\uC9C0 \\uC54A\\uC740 \\uACBD\\uC6B0 none, \\uB9F5\\uC774 \\uB85C\\uB529\\uC911\\uC77C\\uB54C(\\uD30C\\uC77C\\uC774 \\uD074 \\uC218\\uB85D \\uAE38\\uC5B4\\uC9D0) loading, \\uB85C\\uB529\\uC774 \\uC644\\uB8CC\\uB418\\uC5C8\\uC744 \\uB584 loaded \\uAC12\\uC744 \\uC9C0\\uB2CC\\uB2E4\";\n    Description[\"MOVE\"] = \"\\uC774\\uB3D9 \\uD604 \\uC0C1\\uD0DC\";\n    Description[\"MOVE_AUTO\"] = \"\\uC790\\uC728\\uC8FC\\uD589 \\uC774\\uB3D9 \\uC0C1\\uD0DC\";\n    Description[\"MOVE_DOCK\"] = \"\\uB3C4\\uD0B9 \\uC774\\uB3D9 \\uC0C1\\uD0DC(\\uBBF8\\uC0AC\\uC6A9)\";\n    Description[\"MOVE_JOG\"] = \"\\uC870\\uC774\\uC2A4\\uD2F1 \\uC774\\uB3D9 \\uC0C1\\uD0DC(\\uBBF8\\uC0AC\\uC6A9)\";\n    Description[\"MOVE_OBS\"] = \"\\uC8FC\\uD589 \\uC911 \\uC7A5\\uC560\\uBB3C \\uC0C1\\uD0DC\";\n    Description[\"MOVE_PATH\"] = \"\\uC8FC\\uD589 \\uACBD\\uB85C\\uC694\\uCCAD \\uC0C1\\uD0DC\";\n    Description[\"POSE\"] = \"\\uB85C\\uBD07 \\uAE00\\uB85C\\uBC8C\\uC88C\\uD45C. \\uC704\\uCE58\\uCD08\\uAE30\\uD654\\uAC00 good\\uC778 \\uC0C1\\uD0DC\\uC77C\\uB54C \\uC720\\uC758\\uBBF8\";\n    Description[\"VELOCITY\"] = \"\\uB85C\\uBD07 \\uC8FC\\uD589 \\uC18D\\uB3C4\";\n    Description[\"GOAL_NODE\"] = \"\\uC8FC\\uD589 \\uBAA9\\uD45C\\uC9C0\\uC810 \\uC815\\uBCF4 \\uBC0F \\uC0C1\\uD0DC\";\n    Description[\"GOAL_ID\"] = \"\\uC8FC\\uD589 \\uBAA9\\uD45C\\uC9C0\\uC810 \\uB178\\uB4DC ID\";\n    Description[\"GOAL_NAME\"] = \"\\uC8FC\\uD589 \\uBAA9\\uD45C\\uC9C0\\uC810 \\uB178\\uB4DC \\uC774\\uB984\";\n    Description[\"GOAL_STATE\"] = \"\\uC8FC\\uD589 \\uBAA9\\uD45C\\uC9C0\\uC810 \\uC774\\uB3D9 \\uC0C1\\uD0DC\";\n    Description[\"GOAL_XYZ\"] = \"\\uC8FC\\uD589 \\uBAA9\\uD45C\\uC9C0\\uC810 \\uAE00\\uB85C\\uBC8C \\uC88C\\uD45C\";\n    Description[\"CUR_NODE\"] = \"\\uC8FC\\uD589 \\uD604\\uC7AC\\uC9C0\\uC810 \\uC815\\uBCF4 \\uBC0F \\uC0C1\\uD0DC\";\n    Description[\"CUR_ID\"] = \"\\uC8FC\\uD589 \\uD604\\uC7AC\\uC9C0\\uC810 \\uB178\\uB4DC ID\";\n    Description[\"CUR_NAME\"] = \"\\uC8FC\\uD589 \\uD604\\uC7AC\\uC9C0\\uC810 \\uB178\\uB4DC \\uC774\\uB984\";\n    Description[\"CUR_STATE\"] = \"\\uC8FC\\uD589 \\uD604\\uC7AC\\uC9C0\\uC810 \\uC774\\uB3D9 \\uC0C1\\uD0DC\";\n    Description[\"CUR_XYZ\"] = \"\\uC8FC\\uD589 \\uD604\\uC7AC\\uC9C0\\uC810 \\uAE00\\uB85C\\uBC8C \\uC88C\\uD45C\";\n    Description[\"PATH_XYZ\"] = \"\\uC8FC\\uD589 \\uC911 \\uC0DD\\uC131\\uD55C \\uACBD\\uB85C \\uD3EC\\uC778\\uD2B8\\uC758 \\uAE00\\uB85C\\uBC8C\\uC88C\\uD45C\";\n    Description[\"TIME\"] = \"\\uBA54\\uC2DC\\uC9C0 \\uBC1C\\uC1A1 \\uC2DC\\uAC04. ms \\uB2E8\\uC704\";\n    Description[\"POWER_TABOS_AE\"] = \"TABOS \\uC804\\uC555 \\uC624\\uCC28\";\n    Description[\"POWER_TABOS_CURRENT\"] = \"TABOS \\uC804\\uB958\";\n    Description[\"POWER_TABOS_RC\"] = \"TABOS \\uC804\\uC555 \\uC624\\uCC28\";\n    Description[\"POWER_TABOS_SOC\"] = \"TABOS \\uCDA9\\uC804 \\uC0C1\\uD0DC\";\n    Description[\"POWER_TABOS_SOH\"] = \"TABOS \\uC140 \\uC0C1\\uD0DC\";\n    Description[\"POWER_TABOS_STATUS\"] = \"TABOS \\uC0C1\\uD0DC\";\n    Description[\"POWER_TABOS_TEMP\"] = \"TABOS \\uC628\\uB3C4\";\n    Description[\"POWER_TABOS_TTE\"] = \"TABOS \\uC140 \\uC624\\uCC28\";\n    Description[\"POWER_TABOS_TTF\"] = \"TABOS \\uC140 \\uC624\\uCC28\";\n    Description[\"POWER_TABOS_VOLTAGE\"] = \"TABOS \\uC804\\uC555\";\n})(Description || (Description = {}));\nclass StatusIMUDto {\n}\nexports.StatusIMUDto = StatusIMUDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_IMU,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"imu_rx\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_IMU,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"imu_ry\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_IMU,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"imu_rz\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_ACC,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"acc_x\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_ACC,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"acc_y\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_ACC,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"acc_z\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_GYR,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"gyr_x\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_GYR,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"gyr_y\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.IMU_GYR,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusIMUDto.prototype, \"gyr_z\", void 0);\nclass StatusLidarDto {\n}\nexports.StatusLidarDto = StatusLidarDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.LIDAR_CONNECTION,\n        example: false,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusLidarDto.prototype, \"connection\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.LIDAR_PORT,\n        example: '',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], StatusLidarDto.prototype, \"port\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.LIDAR_SERIAL_NUMBER,\n        example: '',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.Length)(1, 50),\n    __metadata(\"design:type\", String)\n], StatusLidarDto.prototype, \"serialnumber\", void 0);\nclass StatuMotorDto {\n}\nexports.StatuMotorDto = StatuMotorDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MOTOR_CONNECTION,\n        example: false,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatuMotorDto.prototype, \"connection\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MOTOR_CURRENT,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatuMotorDto.prototype, \"current\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MOTOR_STATUS,\n        example: 0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatuMotorDto.prototype, \"status\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MOTOR_TEMP,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatuMotorDto.prototype, \"temp\", void 0);\nclass StatusConditionDto {\n}\nexports.StatusConditionDto = StatusConditionDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.CONDITION_INLIER_RATIO,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusConditionDto.prototype, \"inlier_ratio\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.CONDITION_INLIER_ERROR,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusConditionDto.prototype, \"inlier_error\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.CONDITION_MAPPING_RATIO,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusConditionDto.prototype, \"mapping_ratio\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.CONDITION_MAPPING_ERROR,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusConditionDto.prototype, \"mapping_error\", void 0);\nclass StatusStateDto {\n}\nexports.StatusStateDto = StatusStateDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.STATE_CHARGE,\n        example: 'none',\n        enum: state_type_1.ChargeState,\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    __metadata(\"design:type\", String)\n], StatusStateDto.prototype, \"charge\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.STATE_DOCK,\n        example: false,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusStateDto.prototype, \"dock\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.STATE_EMO,\n        example: false,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusStateDto.prototype, \"emo\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.STATE_LOCALIZATION,\n        example: 'none',\n        enum: state_type_1.LocalizationState,\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    __metadata(\"design:type\", String)\n], StatusStateDto.prototype, \"localization\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.STATE_POWER,\n        example: false,\n        required: false,\n    }),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusStateDto.prototype, \"power\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: 'Soft Safeguard Stop.  (, EMO )   (AMR, Cobot)    true,        false',\n        example: true,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusStateDto.prototype, \"sss_recovery\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: 'Reset()   . true ',\n        example: true,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusStateDto.prototype, \"sw_reset\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: 'Stop   . true ',\n        example: true,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusStateDto.prototype, \"sw_stop\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: 'Start   . true ',\n        example: true,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Boolean),\n    __metadata(\"design:type\", Boolean)\n], StatusStateDto.prototype, \"sw_start\", void 0);\nclass StatusPowerDto {\n}\nexports.StatusPowerDto = StatusPowerDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_BATTERY_CURRENT,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"bat_current\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_BATTERY_IN,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"bat_in\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_BATTERY_OUT,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"bat_out\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_BATTERY_PERCENT,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"bat_percent\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_CHARGE_CURRENT,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"charge_current\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_CONTACT_VOLTAGE,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"contact_voltage\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_POWER,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"power\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TOTAL_POWER,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"total_power\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_AE,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_ae\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_CURRENT,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_current\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_RC,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_rc\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_SOC,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_soc\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_SOH,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_soh\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_STATUS,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_status\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_TEMP,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_temp\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_TTE,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_tte\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_TTF,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_ttf\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER_TABOS_VOLTAGE,\n        example: 0.0,\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    (0, class_transformer_1.Type)(() => Number),\n    __metadata(\"design:type\", Number)\n], StatusPowerDto.prototype, \"tabos_voltage\", void 0);\nclass StatusSettingDto {\n}\nexports.StatusSettingDto = StatusSettingDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.SETTING_PLATFORM_TYPE,\n        example: 'SRV',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    __metadata(\"design:type\", String)\n], StatusSettingDto.prototype, \"platform_type\", void 0);\nclass StatusMapDto {\n}\nexports.StatusMapDto = StatusMapDto;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MAP_NAME,\n        example: 'Test',\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    __metadata(\"design:type\", String)\n], StatusMapDto.prototype, \"map_name\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MAP_STATUS,\n        example: 'none',\n        enum: state_type_1.MapState,\n        required: false,\n    }),\n    (0, class_validator_1.IsString)(),\n    __metadata(\"design:type\", String)\n], StatusMapDto.prototype, \"map_status\", void 0);\nclass StatusSlamnav {\n}\nexports.StatusSlamnav = StatusSlamnav;\n__decorate([\n    (0, swagger_1.ApiProperty)({ description: Description.IMU, required: false }),\n    __metadata(\"design:type\", StatusIMUDto)\n], StatusSlamnav.prototype, \"imu\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.LIDAR,\n        example: [\n            {\n                connection: 'false',\n                port: '/dev/ttyUSB0',\n                serialnumber: 'ABC123',\n            },\n            {\n                connection: 'true',\n                port: '/dev/ttyUSB1',\n                serialnumber: 'DEF456',\n            },\n        ],\n        required: false,\n    }),\n    __metadata(\"design:type\", Array)\n], StatusSlamnav.prototype, \"lidar\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.MOTOR,\n        example: [\n            {\n                connection: false,\n                current: 0.0,\n                status: 0,\n                temp: 0.0,\n            },\n            {\n                connection: true,\n                current: 1.54,\n                status: 1,\n                temp: 32.0,\n            },\n        ],\n        required: false,\n    }),\n    __metadata(\"design:type\", Array)\n], StatusSlamnav.prototype, \"motor\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.CONDITION,\n        required: false,\n    }),\n    __metadata(\"design:type\", StatusConditionDto)\n], StatusSlamnav.prototype, \"condition\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.STATE,\n        required: false,\n    }),\n    __metadata(\"design:type\", StatusStateDto)\n], StatusSlamnav.prototype, \"robot_state\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.POWER,\n        required: false,\n    }),\n    __metadata(\"design:type\", StatusPowerDto)\n], StatusSlamnav.prototype, \"power\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.SETTING,\n        required: false,\n    }),\n    __metadata(\"design:type\", StatusSettingDto)\n], StatusSlamnav.prototype, \"setting\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({ description: Description.MAP, required: false }),\n    __metadata(\"design:type\", StatusMapDto)\n], StatusSlamnav.prototype, \"map\", void 0);\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: Description.TIME,\n        example: date_util_1.DateUtil.getTimeString(),\n        required: false,\n    }),\n    (0, class_validator_1.IsOptional)(),\n    __metadata(\"design:type\", String)\n], StatusSlamnav.prototype, \"time\", void 0);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChargeState = exports.LocalizationState = exports.MapState = exports.PathState = exports.ObsState = exports.MoveState = exports.GoalState = void 0;\nvar GoalState;\n(function (GoalState) {\n    GoalState[\"none\"] = \"none\";\n    GoalState[\"move\"] = \"move\";\n    GoalState[\"complete\"] = \"complete\";\n    GoalState[\"fail\"] = \"fail\";\n    GoalState[\"obstacle\"] = \"obstacle\";\n    GoalState[\"cancel\"] = \"cancel\";\n})(GoalState || (exports.GoalState = GoalState = {}));\nvar MoveState;\n(function (MoveState) {\n    MoveState[\"move\"] = \"move\";\n    MoveState[\"error\"] = \"error\";\n    MoveState[\"pause\"] = \"pause\";\n    MoveState[\"stop\"] = \"stop\";\n    MoveState[\"notReady\"] = \"not ready\";\n    MoveState[\"vir\"] = \"vir\";\n})(MoveState || (exports.MoveState = MoveState = {}));\nvar ObsState;\n(function (ObsState) {\n    ObsState[\"none\"] = \"none\";\n    ObsState[\"far\"] = \"far\";\n    ObsState[\"near\"] = \"near\";\n    ObsState[\"vir\"] = \"vir\";\n})(ObsState || (exports.ObsState = ObsState = {}));\nvar PathState;\n(function (PathState) {\n    PathState[\"none\"] = \"none\";\n    PathState[\"reqPath\"] = \"req_path\";\n    PathState[\"recevPath\"] = \"recv_path\";\n})(PathState || (exports.PathState = PathState = {}));\nvar MapState;\n(function (MapState) {\n    MapState[\"none\"] = \"none\";\n    MapState[\"loading\"] = \"loading\";\n    MapState[\"loaded\"] = \"loaded\";\n})(MapState || (exports.MapState = MapState = {}));\nvar LocalizationState;\n(function (LocalizationState) {\n    LocalizationState[\"none\"] = \"none\";\n    LocalizationState[\"good\"] = \"good\";\n    LocalizationState[\"fail\"] = \"fail\";\n})(LocalizationState || (exports.LocalizationState = LocalizationState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"none\"] = \"none\";\n    ChargeState[\"ready\"] = \"ready\";\n    ChargeState[\"battery_on\"] = \"battery_on\";\n    ChargeState[\"charging\"] = \"charging\";\n    ChargeState[\"finish\"] = \"finish\";\n    ChargeState[\"fail\"] = \"fail\";\n})(ChargeState || (exports.ChargeState = ChargeState = {}));\n","module.exports = require(\"pg\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapFileAdapter = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst util_1 = require(\"@app/common/util\");\nconst log_1 = require(\"@app/common/log\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst fs_1 = require(\"fs\");\nconst path_1 = require(\"path\");\nconst fs_2 = require(\"fs\");\nlet MapFileAdapter = class MapFileAdapter {\n    constructor(saveLogService) {\n        this.saveLogService = saveLogService;\n        console.log(saveLogService);\n        this.logger = this.saveLogService.get('host');\n    }\n    async deleteMap(request) {\n        try {\n            this.logger?.info(`[Map] deleteMap : ${JSON.stringify(request)}`);\n            const mapPath = (0, path_1.join)(this.mapPath, request.mapName);\n            if ((0, fs_1.existsSync)(mapPath)) {\n                (0, fs_1.rmSync)(mapPath, { recursive: true });\n            }\n        }\n        catch (error) {\n            console.error(error);\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[Map] deleteMap : ${(0, log_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async readMapList(request) {\n        try {\n            const mapList = (0, fs_1.readdirSync)(this.mapPath, { withFileTypes: true });\n            const list = [];\n            mapList.map((file) => {\n                const mapPath = (0, path_1.join)(this.mapPath, file.name);\n                const stat = (0, fs_1.statSync)(mapPath);\n                if (file.isDirectory()) {\n                    const fileList = (0, fs_1.readdirSync)(mapPath, { withFileTypes: true });\n                    const cloudFiles = [];\n                    const topoFiles = [];\n                    fileList.map((file) => {\n                        if (file.isFile()) {\n                            const filePath = (0, path_1.join)(mapPath, file.name);\n                            const fileStat = (0, fs_1.statSync)(filePath);\n                            console.log(file.name, fileStat.size);\n                            if (file.name.startsWith('cloud')) {\n                                cloudFiles.push({\n                                    fileName: file.name,\n                                    fileType: file.isFile() ? 'file' : 'directory',\n                                    fileSize: fileStat.size,\n                                    createAt: util_1.DateUtil.formatDateTimeKST(fileStat.birthtime),\n                                    updateAt: util_1.DateUtil.formatDateTimeKST(fileStat.mtime),\n                                });\n                            }\n                            else if (file.name.startsWith('topo')) {\n                                topoFiles.push({\n                                    fileName: file.name,\n                                    fileType: file.isFile() ? 'file' : 'directory',\n                                    fileSize: fileStat.size,\n                                    createAt: util_1.DateUtil.formatDateTimeKST(fileStat.birthtime),\n                                    updateAt: util_1.DateUtil.formatDateTimeKST(fileStat.mtime),\n                                });\n                            }\n                        }\n                    });\n                    list.push({\n                        fileName: file.name,\n                        fileType: file.isFile() ? 'file' : 'directory',\n                        createAt: util_1.DateUtil.formatDateTimeKST(stat.birthtime),\n                        updateAt: util_1.DateUtil.formatDateTimeKST(stat.mtime),\n                        cloudFiles: cloudFiles,\n                        topoFiles: topoFiles,\n                    });\n                }\n            });\n            return {\n                list: list,\n            };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[File] readFileList : ${(0, log_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getMapTileExist(request) {\n        const mapPath = (0, path_1.join)(this.mapPath, request.mapName);\n        const tilePath = (0, path_1.join)(mapPath, 'tiles');\n        return { exist: (0, fs_1.existsSync)(tilePath) };\n    }\n    async getMapTile(request) {\n        const mapPath = (0, path_1.join)(this.mapPath, request.mapName);\n        const tilePath = (0, path_1.join)(mapPath, 'tiles');\n        const tileFile = (0, path_1.join)(tilePath, request.z.toString(), request.x.toString(), request.y.toString() + '.png');\n        if (!(0, fs_1.existsSync)(tileFile)) {\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.NotFound);\n        }\n        const st = await fs_2.promises.lstat(tileFile);\n        if (!st.isFile()) {\n            throw new rpc_code_exception_1.RpcCodeException(`  : ${tileFile}`, constant_1.GrpcCode.InternalError);\n        }\n        const data = await fs_2.promises.readFile(tileFile);\n        return { data: data };\n    }\n    onModuleInit() {\n        this.mapPath = '/data/maps';\n    }\n};\nexports.MapFileAdapter = MapFileAdapter;\nexports.MapFileAdapter = MapFileAdapter = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object])\n], MapFileAdapter);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst saveLog_service_1 = require(\"./saveLog.service\");\nconst cleanLog_service_1 = require(\"./cleanLog.service\");\nlet LogModule = class LogModule {\n};\nexports.LogModule = LogModule;\nexports.LogModule = LogModule = __decorate([\n    (0, common_1.Module)({\n        imports: [],\n        controllers: [],\n        providers: [saveLog_service_1.SaveLogService, cleanLog_service_1.CleanLogService],\n        exports: [saveLog_service_1.SaveLogService, cleanLog_service_1.CleanLogService],\n    })\n], LogModule);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CleanLogService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst schedule_1 = require(\"@nestjs/schedule\");\nconst path = require(\"path\");\nconst fs_1 = require(\"fs\");\nconst util_1 = require(\"../util\");\nlet CleanLogService = class CleanLogService {\n    constructor() {\n        this.LOG_ROOT = process.env.LOG_ROOT ?? '/data/log';\n        this.RETAIN_DAYS = Number(process.env.LOG_RETAIN_DAYS ?? '10');\n        this.runClean = false;\n    }\n    setLogger(logger, path, retainDays) {\n        this.logger = logger;\n        this.LOG_ROOT = path;\n        this.RETAIN_DAYS = retainDays;\n        this.runClean = true;\n    }\n    async handleCron() {\n        if (!this.runClean)\n            return;\n        this.logger?.info(`[Log]     (root=${this.LOG_ROOT}, retain=${this.RETAIN_DAYS}d)`);\n        try {\n            await this.cleanDir(this.LOG_ROOT);\n            this.logger?.info('[Log]    ');\n        }\n        catch (e) {\n            this.logger?.error('[Log]     ', e);\n        }\n    }\n    async cleanDir(dir) {\n        let entries;\n        try {\n            entries = await fs_1.promises.readdir(dir, { withFileTypes: true });\n        }\n        catch {\n            return;\n        }\n        const now = new Date();\n        const cutoff_date = new Date(now.getTime() - this.RETAIN_DAYS * 24 * 60 * 60 * 1000);\n        const cutoff_date_string = util_1.DateUtil.formatDateKST(cutoff_date);\n        for (const entry of entries) {\n            const fullPath = path.join(dir, entry.name);\n            if (entry.isDirectory()) {\n                await this.cleanDir(fullPath);\n                continue;\n            }\n            if (!entry.name.endsWith('.log') && !entry.name.endsWith('.log.gz')) {\n                continue;\n            }\n            const file_name = entry.name.split('.')[0];\n            if (file_name < cutoff_date_string) {\n                this.logger?.info(`[Log]  : ${file_name} < ${cutoff_date_string}`);\n                this.logger?.info(`[Log]  delete: ${fullPath}`);\n                try {\n                    await fs_1.promises.unlink(fullPath);\n                }\n                catch (e) {\n                    console.warn(` : ${fullPath} (${e.message})`);\n                }\n            }\n        }\n    }\n    isOlderThan(mtime, days) {\n        const now = Date.now();\n        const diffMs = now - mtime.getTime();\n        const diffDays = diffMs / (1000 * 60 * 60 * 24);\n        return diffDays > days;\n    }\n};\nexports.CleanLogService = CleanLogService;\n__decorate([\n    (0, schedule_1.Cron)(schedule_1.CronExpression.EVERY_HOUR),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], CleanLogService.prototype, \"handleCron\", null);\nexports.CleanLogService = CleanLogService = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [])\n], CleanLogService);\n","module.exports = require(\"@nestjs/schedule\");","module.exports = require(\"@nestjs/mongoose\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapMongoAdapter = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst mongoose_2 = require(\"mongoose\");\nconst map_mongo_entity_1 = require(\"../../entity/map.mongo-entity\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst util_1 = require(\"@app/common/util\");\nconst error_to_json_1 = require(\"@app/common/log/error-to-json\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nlet MapMongoAdapter = class MapMongoAdapter {\n    constructor(Repository, saveLogService, configService) {\n        this.Repository = Repository;\n        this.saveLogService = saveLogService;\n        this.configService = configService;\n        this.logger = this.saveLogService.get('map');\n        this.setIndex(this.configService);\n    }\n    async setIndex(configService) {\n        try {\n            await this.Repository.collection.dropIndex('createdAt_1');\n        }\n        catch (error) {\n            this.logger?.warn(`[Map] DB dropIndex: ${util_1.ParseUtil.errorToJson(error)}`);\n        }\n        try {\n            if (configService.get('DB_TTL_ENABLE') === 'true') {\n                const TTL_DAYS = Number(configService.get('DB_TTL_DAYS') ?? '100');\n                this.Repository.collection.createIndex({ createdAt: 1 }, { expireAfterSeconds: TTL_DAYS * 24 * 60 * 60 });\n                this.logger?.info(`[Map] setIndex EnabledTTL_DAYS: ${TTL_DAYS}`);\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Map] DB createIndex: ${util_1.ParseUtil.errorToJson(error)}`);\n        }\n    }\n    async getNodebyId(id) {\n        try {\n            return await this.Repository.findById(id);\n        }\n        catch (error) {\n            this.logger?.error(`[Map] DB getNodebyId : ${id} => ${(0, error_to_json_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async save(model) {\n        try {\n            const result = await this.Repository.create(model);\n            return {\n                ...result,\n                id: result._id.toString(),\n            };\n        }\n        catch (error) {\n            this.logger?.error(`[Map] DB save : ${JSON.stringify(model)} => ${(0, error_to_json_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async update(model) {\n        try {\n            const result = await this.Repository.findByIdAndUpdate(model.id, model);\n            return {\n                ...result,\n                id: result._id.toString(),\n            };\n        }\n        catch (error) {\n            this.logger?.error(`[Map] DB update : ${JSON.stringify(model)} => ${(0, error_to_json_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n};\nexports.MapMongoAdapter = MapMongoAdapter;\nexports.MapMongoAdapter = MapMongoAdapter = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, mongoose_1.InjectModel)(map_mongo_entity_1.Map.name)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof mongoose_2.Model !== \"undefined\" && mongoose_2.Model) === \"function\" ? _a : Object, typeof (_b = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _b : Object, typeof (_c = typeof config_1.ConfigService !== \"undefined\" && config_1.ConfigService) === \"function\" ? _c : Object])\n], MapMongoAdapter);\n","module.exports = require(\"mongoose\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapSchema = exports.Map = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nlet Map = class Map {\n};\nexports.Map = Map;\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"command\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"status\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"mapName\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"newMapName\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"newPath\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"path\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"fileName\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", Boolean)\n], Map.prototype, \"isForce\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Map.prototype, \"message\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", typeof (_a = typeof Date !== \"undefined\" && Date) === \"function\" ? _a : Object)\n], Map.prototype, \"createAt\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", typeof (_b = typeof Date !== \"undefined\" && Date) === \"function\" ? _b : Object)\n], Map.prototype, \"updateAt\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", Number)\n], Map.prototype, \"version\", void 0);\nexports.Map = Map = __decorate([\n    (0, mongoose_1.Schema)()\n], Map);\nexports.MapSchema = mongoose_1.SchemaFactory.createForClass(Map);\nexports.MapSchema.set('timestamps', true);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst setting_file_service_1 = require(\"./application/setting-file.service\");\nconst config_1 = require(\"@nestjs/config\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst setting_grpc_controller_1 = require(\"./adapter/input/setting.grpc.controller\");\nconst constant_1 = require(\"@app/common/constant\");\nconst setting_postgres_adapter_1 = require(\"./adapter/output/setting.postgres.adapter\");\nconst setting_socketio_adpater_1 = require(\"./adapter/output/setting.socketio.adpater\");\nconst setting_slamnav_service_1 = require(\"./application/setting-slamnav.service\");\nconst log_module_1 = require(\"@app/common/log/log.module\");\nconst setting_pending_service_1 = require(\"./application/setting.pending.service\");\nconst setting_mqtt_controller_1 = require(\"./adapter/input/setting.mqtt.controller\");\nlet SettingModule = class SettingModule {\n};\nexports.SettingModule = SettingModule;\nexports.SettingModule = SettingModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            log_module_1.LogModule,\n            config_1.ConfigModule.forRoot({\n                isGlobal: true,\n                envFilePath: '.env',\n            }),\n            microservices_1.ClientsModule.registerAsync([\n                {\n                    name: constant_1.MQTT_BROKER,\n                    inject: [config_1.ConfigService],\n                    useFactory: (configService) => ({\n                        transport: microservices_1.Transport.MQTT,\n                        options: {\n                            url: configService.get('MQTT_URL'),\n                        },\n                    }),\n                },\n            ]),\n        ],\n        controllers: [setting_grpc_controller_1.SettingGrpcInputController, setting_mqtt_controller_1.SettingMqttInputController],\n        providers: [\n            setting_file_service_1.SettingFileService,\n            setting_slamnav_service_1.SettingSlamnavService,\n            setting_pending_service_1.SettingPendingResponseService,\n            {\n                provide: 'databaseOutputPort',\n                useClass: setting_postgres_adapter_1.SettingPostgresAdapter,\n            },\n            {\n                provide: 'SlamnavOutputPort',\n                useClass: setting_socketio_adpater_1.SettingSocketioAdapter,\n            },\n        ],\n    })\n], SettingModule);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingFileService = void 0;\nconst Path = require(\"path\");\nconst fs = require(\"fs\");\nconst common_1 = require(\"@app/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst file_util_1 = require(\"@app/common/util/file/file.util\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_2 = require(\"@nestjs/common\");\nlet SettingFileService = class SettingFileService {\n    constructor(saveLogService) {\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('host');\n    }\n    getCommonConfigPath() {\n        return Path.join(process.env.HOME, 'slamnav2', 'config', 'common.json');\n    }\n    getDiretoryPath(type) {\n        return Path.join(process.env.HOME, 'slamnav2', 'config', type);\n    }\n    getSettingPath(type) {\n        return Path.join(process.env.HOME, 'slamnav2', 'config', type, 'config.json');\n    }\n    getPresetPath(type, name) {\n        if (name.split('.').length === 1) {\n            name = name + '.json';\n        }\n        if (!name.startsWith('preset_')) {\n            name = 'preset_' + name;\n        }\n        return Path.join(process.env.HOME, 'slamnav2', 'config', type, name);\n    }\n    async getType() {\n        try {\n            const path = this.getCommonConfigPath();\n            if (!fs.existsSync(path)) {\n                this.logger?.error(`[SETTING] getType : common.json  .`);\n                throw new rpc_code_exception_1.RpcCodeException(`common.json  .`, constant_1.GrpcCode.NotFound);\n            }\n            const data = await file_util_1.FileUtil.readJson(path);\n            return { model: data.ROBOT_MODEL, type: data.ROBOT_TYPE };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[SETTING] getType : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getSetting(request) {\n        try {\n            if (request.type === undefined || request.type === '') {\n                this.logger?.error(`[SETTING] getSetting : type  .`);\n                throw new rpc_code_exception_1.RpcCodeException('type  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const path = this.getSettingPath(request.type);\n            console.log(path);\n            if (!fs.existsSync(path)) {\n                this.logger?.error(`[SETTING] getSetting : ${request.type}   .`);\n                throw new rpc_code_exception_1.RpcCodeException(`${request.type}   .`, constant_1.GrpcCode.NotFound);\n            }\n            const data = await file_util_1.FileUtil.readJson(path);\n            const parsedData = data;\n            return { ...request, data: JSON.stringify(parsedData) };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[SETTING] getSetting : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async saveSetting(request) {\n        try {\n            this.logger?.info(`[Setting] saveSetting : ${JSON.stringify(request)}`);\n            if (request.type === undefined || request.type === '') {\n                this.logger?.error(`[SETTING] saveSetting : type  .`);\n                throw new rpc_code_exception_1.RpcCodeException('type  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.data === undefined || request.data === '') {\n                this.logger?.error(`[SETTING] saveSetting : data  .`);\n                throw new rpc_code_exception_1.RpcCodeException('data  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const jsonData = JSON.parse(request.data);\n            if (typeof jsonData !== 'object' || jsonData === null) {\n                this.logger?.error(`[SETTING] saveSetting : ${request.data} JSON  .`);\n                throw new rpc_code_exception_1.RpcCodeException('data    .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const newData = await this.convertNumbersToStrings(jsonData);\n            const path = this.getSettingPath(request.type);\n            if (!fs.existsSync(Path.dirname(path))) {\n                fs.mkdirSync(Path.dirname(path), { recursive: true });\n            }\n            const orinData = await file_util_1.FileUtil.readJson(path);\n            const mergeData = await this.deepMerge(orinData, newData);\n            const finalData = mergeData;\n            await file_util_1.FileUtil.saveJson(path, finalData);\n            return {\n                type: request.type,\n                data: JSON.stringify(mergeData),\n            };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[SETTING] saveSetting : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getPreset(request) {\n        this.logger?.info(`[Setting] getPreset : ${JSON.stringify(request)}`);\n        try {\n            if (request.type === undefined || request.type === '') {\n                this.logger?.error(`[SETTING] getPreset : type  .`);\n                throw new rpc_code_exception_1.RpcCodeException('type  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.preset === undefined || request.preset === '') {\n                this.logger?.error(`[SETTING] getPreset : preset  .`);\n                throw new rpc_code_exception_1.RpcCodeException('preset  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const path = this.getPresetPath(request.type, request.preset);\n            if (!fs.existsSync(path)) {\n                this.logger?.error(`[SETTING] getPreset : ${path} is not exists`);\n                throw new rpc_code_exception_1.RpcCodeException(`${request.type}/${request.preset}   .`, constant_1.GrpcCode.NotFound);\n            }\n            const data = await file_util_1.FileUtil.readJson(path);\n            return { ...request, data: JSON.stringify(data) };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[SETTING] getPreset : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async deletePreset(request) {\n        try {\n            this.logger?.info(`[Setting] deletePreset : ${JSON.stringify(request)}`);\n            if (request.type === undefined || request.type === '') {\n                this.logger?.error(`[SETTING] deletePreset : type  .`);\n                throw new rpc_code_exception_1.RpcCodeException('type  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.preset === undefined || request.preset === '') {\n                this.logger?.error(`[SETTING] deletePreset : preset  .`);\n                throw new rpc_code_exception_1.RpcCodeException('preset  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const path = this.getPresetPath(request.type, request.preset);\n            if (!fs.existsSync(path)) {\n                this.logger?.error(`[SETTING] getPreset : ${path} is not exists`);\n                throw new rpc_code_exception_1.RpcCodeException(`${request.type}/${request.preset}   .`, constant_1.GrpcCode.NotFound);\n            }\n            await file_util_1.FileUtil.deleteFile(path);\n            return request;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[SETTING] getPreset : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async createPreset(request) {\n        try {\n            this.logger?.info(`[Setting] createPreset : ${JSON.stringify(request)}`);\n            if (request.type === undefined || request.type === '') {\n                this.logger?.error(`[SETTING] createPreset : type  .`);\n                throw new rpc_code_exception_1.RpcCodeException('type  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.preset === undefined || request.preset === '') {\n                this.logger?.error(`[SETTING] createPreset : preset  .`);\n                throw new rpc_code_exception_1.RpcCodeException('preset  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (isNaN(parseInt(request.preset))) {\n                this.logger?.error(`[SETTING] createPreset : preset   .`);\n                throw new rpc_code_exception_1.RpcCodeException('preset   .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const path = this.getPresetPath(request.type, request.preset);\n            if (fs.existsSync(path)) {\n                this.logger?.error(`[SETTING] createPreset : ${path}   .`);\n                throw new rpc_code_exception_1.RpcCodeException(`${request.type}/${request.preset}    .`, constant_1.GrpcCode.AlreadyExists);\n            }\n            const tempData = {\n                LIMIT_V: '1.0',\n                LIMIT_W: '45.0',\n                LIMIT_V_ACC: '0.3',\n                LIMIT_V_DCC: '0.1',\n                LIMIT_W_ACC: '180.0',\n                LIMIT_PIVOT_W: '45.0',\n                ST_V: '0.05',\n                ED_V: '0.05',\n                DRIVE_T: '0.0',\n                DRIVE_H: '4.0',\n                DRIVE_A: '0.8',\n                DRIVE_B: '0.05',\n                DRIVE_L: '0.3',\n                DRIVE_K: '0.8',\n                DRIVE_EPS: '0.3',\n            };\n            await file_util_1.FileUtil.saveJson(path, JSON.stringify(tempData));\n            return { ...request, data: JSON.stringify(tempData) };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[SETTING] getPreset : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async savePreset(request) {\n        try {\n            this.logger?.info(`[Setting] savePreset : ${JSON.stringify(request)}`);\n            if (request.type === undefined || request.type === '') {\n                this.logger?.error(`[SETTING] savePreset : type  .`);\n                throw new rpc_code_exception_1.RpcCodeException('type  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.preset === undefined || request.preset === '') {\n                this.logger?.error(`[SETTING] savePreset : preset  .`);\n                throw new rpc_code_exception_1.RpcCodeException('preset  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.data === undefined || request.data === '') {\n                this.logger?.error(`[SETTING] savePreset : data  .`);\n                throw new rpc_code_exception_1.RpcCodeException('data  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const jsonData = JSON.parse(request.data);\n            if (typeof jsonData !== 'object' || jsonData === null) {\n                this.logger?.error(`[SETTING] savePreset : ${request.data} JSON  .`);\n                throw new rpc_code_exception_1.RpcCodeException('data    .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const newData = await this.convertNumbersToStrings(jsonData);\n            const path = this.getSettingPath(request.type);\n            fs.mkdirSync(Path.dirname(path));\n            const orinData = await this.transformSettingToJson(await file_util_1.FileUtil.readJson(path));\n            const mergeData = await this.deepMerge(orinData, newData);\n            const finalData = mergeData;\n            await file_util_1.FileUtil.saveJson(path, finalData);\n            return { ...request, data: JSON.stringify(mergeData) };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[SETTING] savePreset : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getPresetList(request) {\n        try {\n            if (request.type === undefined || request.type === '') {\n                this.logger?.error(`[SETTING] getPresetList : type  .`);\n                throw new rpc_code_exception_1.RpcCodeException('type  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const path = this.getDiretoryPath(request.type);\n            if (!fs.existsSync(path)) {\n                this.logger?.error(`[SETTING] getPresetList : ${path}  .`);\n                throw new rpc_code_exception_1.RpcCodeException(`${request.type}   .`, constant_1.GrpcCode.InvalidArgument);\n            }\n            const files = await fs.promises.readdir(path, { withFileTypes: true });\n            console.debug(files);\n            const list = [];\n            for (const file of files) {\n                if (!file.isDirectory()) {\n                    if (file.name.startsWith('preset_') && file.name.split('.').length === 2) {\n                        const name = parseInt(file.name.split('.')[0].split('_')[1]);\n                        const newname = 'preset_' + name + '.json';\n                        if (file.name == newname) {\n                            list.push(name);\n                        }\n                    }\n                }\n            }\n            return { ...request, list: list };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Setting] getPresetList : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async convertNumbersToStrings(obj) {\n        const entries = await Promise.all(Object.entries(obj).map(async ([key, value]) => [\n            key,\n            typeof value === 'number'\n                ? value.toString()\n                : typeof value === 'object' && value !== null\n                    ? await this.convertNumbersToStrings(value)\n                    : value,\n        ]));\n        return Object.fromEntries(entries);\n    }\n    async transformSettingToJson(data) {\n        if (data != undefined) {\n            const new_default = {\n                ...data.default,\n                LIDAR_TF_B_X: data.default.LIDAR_TF_B ? data.default.LIDAR_TF_B.split(',')[0] : 0,\n                LIDAR_TF_B_Y: data.default.LIDAR_TF_B ? data.default.LIDAR_TF_B.split(',')[1] : 0,\n                LIDAR_TF_B_Z: data.default.LIDAR_TF_B ? data.default.LIDAR_TF_B.split(',')[2] : 0,\n                LIDAR_TF_B_RX: data.default.LIDAR_TF_B ? data.default.LIDAR_TF_B.split(',')[3] : 0,\n                LIDAR_TF_B_RY: data.default.LIDAR_TF_B ? data.default.LIDAR_TF_B.split(',')[4] : 0,\n                LIDAR_TF_B_RZ: data.default.LIDAR_TF_B ? data.default.LIDAR_TF_B.split(',')[5] : 0,\n                LIDAR_TF_F_X: data.default.LIDAR_TF_F ? data.default.LIDAR_TF_F.split(',')[0] : 0,\n                LIDAR_TF_F_Y: data.default.LIDAR_TF_F ? data.default.LIDAR_TF_F.split(',')[1] : 0,\n                LIDAR_TF_F_Z: data.default.LIDAR_TF_F ? data.default.LIDAR_TF_F.split(',')[2] : 0,\n                LIDAR_TF_F_RX: data.default.LIDAR_TF_F ? data.default.LIDAR_TF_F.split(',')[3] : 0,\n                LIDAR_TF_F_RY: data.default.LIDAR_TF_F ? data.default.LIDAR_TF_F.split(',')[4] : 0,\n                LIDAR_TF_F_RZ: data.default.LIDAR_TF_F ? data.default.LIDAR_TF_F.split(',')[5] : 0,\n            };\n            const new_cam = {\n                ...data.cam,\n                CAM_TF_0_X: data.cam.CAM_TF_0 ? data.cam.CAM_TF_0.split(',')[0] : 0,\n                CAM_TF_0_Y: data.cam.CAM_TF_0 ? data.cam.CAM_TF_0.split(',')[1] : 0,\n                CAM_TF_0_Z: data.cam.CAM_TF_0 ? data.cam.CAM_TF_0.split(',')[2] : 0,\n                CAM_TF_0_RX: data.cam.CAM_TF_0 ? data.cam.CAM_TF_0.split(',')[3] : 0,\n                CAM_TF_0_RY: data.cam.CAM_TF_0 ? data.cam.CAM_TF_0.split(',')[4] : 0,\n                CAM_TF_0_RZ: data.cam.CAM_TF_0 ? data.cam.CAM_TF_0.split(',')[5] : 0,\n                CAM_TF_1_X: data.cam.CAM_TF_1 ? data.cam.CAM_TF_1.split(',')[0] : 0,\n                CAM_TF_1_Y: data.cam.CAM_TF_1 ? data.cam.CAM_TF_1.split(',')[1] : 0,\n                CAM_TF_1_Z: data.cam.CAM_TF_1 ? data.cam.CAM_TF_1.split(',')[2] : 0,\n                CAM_TF_1_RX: data.cam.CAM_TF_1 ? data.cam.CAM_TF_1.split(',')[3] : 0,\n                CAM_TF_1_RY: data.cam.CAM_TF_1 ? data.cam.CAM_TF_1.split(',')[4] : 0,\n                CAM_TF_1_RZ: data.cam.CAM_TF_1 ? data.cam.CAM_TF_1.split(',')[5] : 0,\n            };\n            const newdata = { ...data, default: new_default, cam: new_cam };\n            console.log(newdata);\n            return newdata;\n        }\n        else {\n            return {};\n        }\n    }\n    async transformSettingToFile(data) {\n        if (data != undefined) {\n            if (data.default) {\n                const lidar_tf_b = (data.default.LIDAR_TF_B_X ? data.default.LIDAR_TF_B_X : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_B_Y ? data.default.LIDAR_TF_B_Y : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_B_Z ? data.default.LIDAR_TF_B_Z : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_B_RX ? data.default.LIDAR_TF_B_RX : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_B_RY ? data.default.LIDAR_TF_B_RY : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_B_RZ ? data.default.LIDAR_TF_B_RZ : '0');\n                const lidar_tf_f = (data.default.LIDAR_TF_F_X ? data.default.LIDAR_TF_F_X : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_F_Y ? data.default.LIDAR_TF_F_Y : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_F_Z ? data.default.LIDAR_TF_F_Z : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_F_RX ? data.default.LIDAR_TF_F_RX : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_F_RY ? data.default.LIDAR_TF_F_RY : '0') +\n                    ',' +\n                    (data.default.LIDAR_TF_F_RZ ? data.default.LIDAR_TF_F_RZ : '0');\n                const newdefault = {\n                    ...data.default,\n                    LIDAR_TF_B: lidar_tf_b,\n                    LIDAR_TF_F: lidar_tf_f,\n                };\n                data = await {\n                    ...data,\n                    default: {\n                        ...data.default,\n                        LIDAR_TF_B: lidar_tf_b,\n                        LIDAR_TF_F: lidar_tf_f,\n                    },\n                };\n            }\n            if (data.cam) {\n                const camera_tf_0 = (data.cam.CAM_TF_0_X ? data.cam.CAM_TF_0_X : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_0_Y ? data.cam.CAM_TF_0_Y : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_0_Z ? data.cam.CAM_TF_0_Z : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_0_RX ? data.cam.CAM_TF_0_RX : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_0_RY ? data.cam.CAM_TF_0_RY : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_0_RZ ? data.cam.CAM_TF_0_RZ : '0');\n                const camera_tf_1 = (data.cam.CAM_TF_1_X ? data.cam.CAM_TF_1_X : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_1_Y ? data.cam.CAM_TF_1_Y : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_1_Z ? data.cam.CAM_TF_1_Z : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_1_RX ? data.cam.CAM_TF_1_RX : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_1_RY ? data.cam.CAM_TF_1_RY : '0') +\n                    ',' +\n                    (data.cam.CAM_TF_1_RZ ? data.cam.CAM_TF_1_RZ : '0');\n                data = {\n                    ...data,\n                    cam: { ...data.cam, CAM_TF_0: camera_tf_0, CAM_TF_1: camera_tf_1 },\n                };\n            }\n            return data;\n        }\n        else {\n            return {};\n        }\n    }\n    async mergeArrayByKey(oldArray, newArray, key) {\n        const mergedArray = [...oldArray];\n        newArray.forEach((newItem) => {\n            const index = mergedArray.findIndex((oldItem) => oldItem[key] === newItem[key]);\n            if (index > -1) {\n                mergedArray[index] = { ...mergedArray[index], ...newItem };\n            }\n            else {\n                mergedArray.push(newItem);\n            }\n        });\n        return mergedArray;\n    }\n    async deepMerge(oldData, newData) {\n        const result = { ...oldData };\n        for (const key in newData) {\n            if (Array.isArray(newData[key])) {\n                result[key] = this.mergeArrayByKey(oldData[key] || [], newData[key], 'number');\n            }\n            else if (typeof newData[key] === 'object' && !Array.isArray(newData[key])) {\n                result[key] = await this.deepMerge(oldData[key] || {}, newData[key]);\n            }\n            else {\n                result[key] = newData[key];\n            }\n        }\n        return result;\n    }\n};\nexports.SettingFileService = SettingFileService;\nexports.SettingFileService = SettingFileService = __decorate([\n    (0, common_2.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object])\n], SettingFileService);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingGrpcInputController = void 0;\nconst common_1 = require(\"@app/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst setting_file_service_1 = require(\"../../application/setting-file.service\");\nconst setting_slamnav_service_1 = require(\"../../application/setting-slamnav.service\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nlet SettingGrpcInputController = class SettingGrpcInputController {\n    constructor(settingService, settingSlamnavService) {\n        this.settingService = settingService;\n        this.settingSlamnavService = settingSlamnavService;\n    }\n    getCameraInfo(request, metadata) {\n        return this.settingSlamnavService.getCameraInfo();\n    }\n    setCameraOrder(request, metadata) {\n        return this.settingSlamnavService.setCameraOrder(request);\n    }\n    getType(request, metadata) {\n        return this.settingService.getType();\n    }\n    getSetting(request, metadata) {\n        return this.settingService.getSetting(request);\n    }\n    saveSetting(request, metadata) {\n        throw new rpc_code_exception_1.RpcCodeException('  ', constant_1.GrpcCode.Unimplemented);\n    }\n    saveSettingAll(request, metadata) {\n        return this.settingService.saveSetting(request);\n    }\n    getPresetList(request, metadata) {\n        return this.settingService.getPresetList(request);\n    }\n    createPreset(request, metadata) {\n        return this.settingService.createPreset(request);\n    }\n    deletePreset(request, metadata) {\n        return this.settingService.deletePreset(request);\n    }\n    getPreset(request, metadata) {\n        return this.settingService.getPreset(request);\n    }\n    savePreset(request, metadata) {\n        return this.settingService.savePreset(request);\n    }\n};\nexports.SettingGrpcInputController = SettingGrpcInputController;\nexports.SettingGrpcInputController = SettingGrpcInputController = __decorate([\n    (0, common_2.Controller)(),\n    common_1.SettingMicroservice.SettingGrpcServiceControllerMethods(),\n    (0, common_2.UseInterceptors)(common_1.GrpcInterceptor),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof setting_file_service_1.SettingFileService !== \"undefined\" && setting_file_service_1.SettingFileService) === \"function\" ? _a : Object, typeof (_b = typeof setting_slamnav_service_1.SettingSlamnavService !== \"undefined\" && setting_slamnav_service_1.SettingSlamnavService) === \"function\" ? _b : Object])\n], SettingGrpcInputController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingSlamnavService = void 0;\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_1 = require(\"@nestjs/common\");\nconst setting_slamnav_output_port_1 = require(\"../port/setting.slamnav.output-port\");\nconst common_2 = require(\"@app/common\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst setting_domain_1 = require(\"../domain/setting.domain\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nlet SettingSlamnavService = class SettingSlamnavService {\n    constructor(saveLogService, slamnavOutput) {\n        this.saveLogService = saveLogService;\n        this.slamnavOutput = slamnavOutput;\n        this.slamnav_connection = false;\n        this.logger = this.saveLogService.get('host');\n    }\n    slamConnect() {\n        this.slamnav_connection = true;\n    }\n    slamDisconnect() {\n        this.logger?.warn(`[Setting] slam Disconnected`);\n        this.slamnav_connection = false;\n    }\n    async getCameraInfo() {\n        let resp = null;\n        let command = null;\n        try {\n            command = new setting_domain_1.SettingCommandModel({ command: setting_domain_1.SettingCommand.getCameraInfo });\n            if (!this.slamnav_connection) {\n                throw new rpc_code_exception_1.RpcCodeException('SLAMNAV  ', constant_1.GrpcCode.FailedPrecondition);\n            }\n            resp = await this.slamnavOutput.cameraRequest(command);\n            this.logger?.debug(`[Setting] getCameraInfo Response : ${JSON.stringify(resp)}`);\n            return resp;\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[Setting] getCameraInfo : ${(0, common_2.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('getCameraInfo    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async setCameraOrder(request) {\n        let resp = null;\n        let command = null;\n        try {\n            command = new setting_domain_1.SettingCommandModel({ command: setting_domain_1.SettingCommand.setCameraOrder, cam1: request.cam1, cam2: request.cam2 });\n            if (!this.slamnav_connection) {\n                throw new rpc_code_exception_1.RpcCodeException('SLAMNAV  ', constant_1.GrpcCode.FailedPrecondition);\n            }\n            resp = await this.slamnavOutput.cameraRequest(command);\n            this.logger?.debug(`[Setting] setCameraOrder Response : ${JSON.stringify(resp)}`);\n            return resp;\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[Setting] setCameraOrder : ${(0, common_2.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('setCameraOrder    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async updateResponse(resp) {\n    }\n};\nexports.SettingSlamnavService = SettingSlamnavService;\nexports.SettingSlamnavService = SettingSlamnavService = __decorate([\n    __param(1, (0, common_1.Inject)('SlamnavOutputPort')),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object, typeof (_b = typeof setting_slamnav_output_port_1.SettingSlamnavOutputPort !== \"undefined\" && setting_slamnav_output_port_1.SettingSlamnavOutputPort) === \"function\" ? _b : Object])\n], SettingSlamnavService);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingCommandModel = exports.SettingCommand = void 0;\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst util_1 = require(\"@app/common/util\");\nvar SettingCommand;\n(function (SettingCommand) {\n    SettingCommand[\"getCameraInfo\"] = \"getCameraInfo\";\n    SettingCommand[\"setCameraOrder\"] = \"setCameraOrder\";\n})(SettingCommand || (exports.SettingCommand = SettingCommand = {}));\nclass SettingCommandModel {\n    constructor(param) {\n        this.command = param.command;\n        this.id = util_1.UrlUtil.generateUUID();\n        this.cam1 = param.cam1;\n        this.cam2 = param.cam2;\n    }\n    assignId(id) {\n        this.id = id;\n    }\n    checkVariables() {\n        if (this.command === SettingCommand.getCameraInfo) {\n        }\n        else if (this.command === SettingCommand.setCameraOrder) {\n            if (!this.cam1 || !this.cam2) {\n                throw new rpc_code_exception_1.RpcCodeException('cam1  cam2 ', constant_1.GrpcCode.InvalidArgument);\n            }\n        }\n        else {\n            throw new rpc_code_exception_1.RpcCodeException('command   ', constant_1.GrpcCode.InvalidArgument);\n        }\n    }\n}\nexports.SettingCommandModel = SettingCommandModel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingPostgresAdapter = void 0;\nclass SettingPostgresAdapter {\n    constructor(settingService) {\n        this.settingService = settingService;\n    }\n}\nexports.SettingPostgresAdapter = SettingPostgresAdapter;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingSocketioAdapter = void 0;\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_1 = require(\"@nestjs/common\");\nconst constant_1 = require(\"@app/common/constant\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst setting_pending_service_1 = require(\"../../application/setting.pending.service\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_2 = require(\"@app/common/grpc/constant\");\nlet SettingSocketioAdapter = class SettingSocketioAdapter {\n    constructor(mqttService, pendingService, saveLogService) {\n        this.mqttService = mqttService;\n        this.pendingService = pendingService;\n        this.saveLogService = saveLogService;\n    }\n    settingRequest(request) {\n        throw new Error('Method not implemented.');\n    }\n    async cameraRequest(request) {\n        this.logger?.debug(`[Setting] cameraRequest`);\n        const response = this.waitForResponse(request.id, 5000);\n        this.mqttService.emit('cameraRequest', request);\n        const resp = await response;\n        this.logger?.debug(`[Setting] cameraRequest : ${JSON.stringify(resp)}`);\n        return resp;\n    }\n    async waitForResponse(id, timeoutMs) {\n        return new Promise((resolve, reject) => {\n            let timeout;\n            if (timeoutMs) {\n                timeout = setTimeout(() => {\n                    this.pendingService.pendingResponses.delete(id);\n                    this.logger?.error(`[Setting] waitForResponse Timeout : ${id} , ${timeoutMs}`);\n                    reject(new rpc_code_exception_1.RpcCodeException(`  .`, constant_2.GrpcCode.DeadlineExceeded));\n                }, timeoutMs);\n            }\n            this.pendingService.pendingResponses.set(id, {\n                resolve: (value) => {\n                    if (timeoutMs) {\n                        clearTimeout(timeout);\n                    }\n                    resolve(value);\n                },\n                reject: (error) => {\n                    if (timeoutMs) {\n                        clearTimeout(timeout);\n                    }\n                    reject(error);\n                },\n                received: [],\n            });\n        });\n    }\n};\nexports.SettingSocketioAdapter = SettingSocketioAdapter;\nexports.SettingSocketioAdapter = SettingSocketioAdapter = __decorate([\n    __param(0, (0, common_1.Inject)(constant_1.MQTT_BROKER)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _a : Object, typeof (_b = typeof setting_pending_service_1.SettingPendingResponseService !== \"undefined\" && setting_pending_service_1.SettingPendingResponseService) === \"function\" ? _b : Object, typeof (_c = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _c : Object])\n], SettingSocketioAdapter);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingPendingResponseService = void 0;\nconst pending_util_1 = require(\"@app/common/util/pending/pending.util\");\nconst common_1 = require(\"@nestjs/common\");\nlet SettingPendingResponseService = class SettingPendingResponseService extends pending_util_1.PendingResponseUtil {\n};\nexports.SettingPendingResponseService = SettingPendingResponseService;\nexports.SettingPendingResponseService = SettingPendingResponseService = __decorate([\n    (0, common_1.Injectable)()\n], SettingPendingResponseService);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SoundModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nconst typeorm_1 = require(\"@nestjs/typeorm\");\nconst pg_1 = require(\"pg\");\nconst sound_entity_1 = require(\"./entity/sound.entity\");\nconst sound_grpc_controller_1 = require(\"./adapter/input/sound.grpc.controller\");\nconst sound_service_1 = require(\"./application/sound.service\");\nconst sound_play_sound_adapter_1 = require(\"./adapter/output/sound.play-sound.adapter\");\nconst log_module_1 = require(\"@app/common/log/log.module\");\nlet SoundModule = class SoundModule {\n};\nexports.SoundModule = SoundModule;\nexports.SoundModule = SoundModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            log_module_1.LogModule,\n            config_1.ConfigModule.forRoot({\n                isGlobal: true,\n                envFilePath: '.env',\n            }),\n            typeorm_1.TypeOrmModule.forFeature([sound_entity_1.Sound]),\n            typeorm_1.TypeOrmModule.forRootAsync({\n                inject: [config_1.ConfigService],\n                useFactory: async (configService) => {\n                    await ensureSoundDatabase();\n                    return {\n                        type: 'postgres',\n                        url: configService.get('POSTGRES_URL') + '/sound',\n                        autoLoadEntities: true,\n                        synchronize: true,\n                    };\n                },\n            }),\n        ],\n        controllers: [sound_grpc_controller_1.SoundGrpcController],\n        providers: [\n            sound_service_1.SoundService,\n            {\n                provide: 'SoundOutputPort',\n                useClass: sound_play_sound_adapter_1.SoundPlaySoundAdapter,\n            },\n        ],\n    })\n], SoundModule);\nasync function ensureSoundDatabase() {\n    const client = new pg_1.Client({\n        host: process.env.POSTGRES_HOST || 'localhost',\n        port: parseInt(process.env.POSTGRES_PORT || '7000'),\n        user: process.env.POSTGRES_USER || 'postgres',\n        password: process.env.POSTGRES_PASSWORD || 'postgres',\n        database: 'postgres',\n    });\n    try {\n        await client.connect();\n        const result = await client.query(\"SELECT 1 FROM pg_database WHERE datname = 'sound'\");\n        if (result.rows.length === 0) {\n            await client.query('CREATE DATABASE sound');\n            console.log(' sound   ');\n        }\n        else {\n            console.log(' sound   ');\n        }\n    }\n    catch (error) {\n        console.warn(' semlog DB  :', error.message);\n    }\n    finally {\n        await client.end();\n    }\n}\n","module.exports = require(\"@nestjs/typeorm\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sound = void 0;\nconst typeorm_1 = require(\"typeorm\");\nlet Sound = class Sound {\n};\nexports.Sound = Sound;\n__decorate([\n    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),\n    __metadata(\"design:type\", String)\n], Sound.prototype, \"id\", void 0);\n__decorate([\n    (0, typeorm_1.Column)(),\n    __metadata(\"design:type\", String)\n], Sound.prototype, \"command\", void 0);\n__decorate([\n    (0, typeorm_1.Column)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Sound.prototype, \"fileName\", void 0);\n__decorate([\n    (0, typeorm_1.Column)(),\n    __metadata(\"design:type\", String)\n], Sound.prototype, \"result\", void 0);\n__decorate([\n    (0, typeorm_1.Column)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], Sound.prototype, \"message\", void 0);\n__decorate([\n    (0, typeorm_1.CreateDateColumn)(),\n    __metadata(\"design:type\", typeof (_a = typeof Date !== \"undefined\" && Date) === \"function\" ? _a : Object)\n], Sound.prototype, \"createAt\", void 0);\n__decorate([\n    (0, typeorm_1.UpdateDateColumn)(),\n    __metadata(\"design:type\", typeof (_b = typeof Date !== \"undefined\" && Date) === \"function\" ? _b : Object)\n], Sound.prototype, \"updateAt\", void 0);\n__decorate([\n    (0, typeorm_1.VersionColumn)(),\n    __metadata(\"design:type\", Number)\n], Sound.prototype, \"version\", void 0);\nexports.Sound = Sound = __decorate([\n    (0, typeorm_1.Entity)()\n], Sound);\n","module.exports = require(\"typeorm\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SoundGrpcController = void 0;\nconst common_1 = require(\"@app/common\");\nconst grpc_1 = require(\"@app/common/grpc\");\nconst common_2 = require(\"@nestjs/common\");\nconst sound_service_1 = require(\"../../application/sound.service\");\nlet SoundGrpcController = class SoundGrpcController {\n    constructor(soundService) {\n        this.soundService = soundService;\n    }\n    getPlaying(request, metadata) {\n        return this.soundService.getPlaying();\n    }\n    play(request, metadata) {\n        return this.soundService.playSound(request);\n    }\n    stop(request, metadata) {\n        return this.soundService.stopSound();\n    }\n    list(request, metadata) {\n        return this.soundService.getSoundList();\n    }\n    delete(request, metadata) {\n        return this.soundService.deleteSoundFile(request);\n    }\n    add(request, metadata) {\n        return this.soundService.addSoundFile(request);\n    }\n};\nexports.SoundGrpcController = SoundGrpcController;\nexports.SoundGrpcController = SoundGrpcController = __decorate([\n    (0, common_2.Controller)(),\n    grpc_1.SoundMicroservice.SoundGrpcServiceControllerMethods(),\n    (0, common_2.UseInterceptors)(common_1.GrpcInterceptor),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof sound_service_1.SoundService !== \"undefined\" && sound_service_1.SoundService) === \"function\" ? _a : Object])\n], SoundGrpcController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SoundService = void 0;\nconst common_1 = require(\"@app/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst sound_output_port_1 = require(\"../port/sound.output-port\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst fs_1 = require(\"fs\");\nconst path_1 = require(\"path\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet SoundService = class SoundService {\n    constructor(soundOutput, saveLogService) {\n        this.soundOutput = soundOutput;\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('host');\n    }\n    getPlaying() {\n        return this.soundOutput.getPlaying();\n    }\n    async addSoundFile(request) {\n        try {\n            if (process.env.HOST_OS !== 'linux') {\n                throw new rpc_code_exception_1.RpcCodeException('Linux Host  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.fileName === undefined || request.fileName === '') {\n                throw new rpc_code_exception_1.RpcCodeException('fileName  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.data === undefined) {\n                throw new rpc_code_exception_1.RpcCodeException('data  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const filePath = (0, path_1.join)(process.cwd(), 'public', 'sound', request.fileName);\n            if ((0, fs_1.existsSync)(filePath)) {\n                throw new rpc_code_exception_1.RpcCodeException('  .', constant_1.GrpcCode.AlreadyExists);\n            }\n            (0, fs_1.writeFileSync)(filePath, request.data);\n            return this.getSoundList();\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Sound] addSoundFile : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async playSound(request) {\n        try {\n            if (process.env.HOST_OS !== 'linux') {\n                throw new rpc_code_exception_1.RpcCodeException('Linux Host  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.fileName === undefined || request.fileName === '') {\n                throw new rpc_code_exception_1.RpcCodeException('name  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.volume === undefined) {\n                throw new rpc_code_exception_1.RpcCodeException('volume  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.volume < 0 || request.volume > 100) {\n                throw new rpc_code_exception_1.RpcCodeException(`volume    . ( : ${request.volume},  : 0 ~ 100%)`, constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.repeatCount < 1) {\n                request.repeatCount = 1;\n            }\n            const path = (0, path_1.join)(process.cwd(), 'public', 'sound', request.fileName);\n            if (!(0, fs_1.existsSync)(path)) {\n                this.logger?.error(`[Sound] playSound :    . ${path}`);\n                throw new rpc_code_exception_1.RpcCodeException(`   . ${request.fileName}`, constant_1.GrpcCode.NotFound);\n            }\n            return this.soundOutput.play(request);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Sound] playSound : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async stopSound() {\n        if (process.env.HOST_OS !== 'linux') {\n            throw new rpc_code_exception_1.RpcCodeException('Linux Host  .', constant_1.GrpcCode.InvalidArgument);\n        }\n        await this.soundOutput.stop();\n        return this.soundOutput.getPlaying();\n    }\n    async getSoundList() {\n        try {\n            if (process.env.HOST_OS !== 'linux') {\n                throw new rpc_code_exception_1.RpcCodeException('Linux Host  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const path = (0, path_1.join)(process.cwd(), 'public', 'sound');\n            const files = (0, fs_1.readdirSync)(path, { withFileTypes: true });\n            const list = [];\n            files.map((file) => {\n                if (file.isFile() && file.name.split('.')[1] === 'mp3') {\n                    list.push(file.name);\n                }\n            });\n            return { list };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Sound] getSoundList : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async deleteSoundFile(request) {\n        try {\n            if (process.env.HOST_OS !== 'linux') {\n                throw new rpc_code_exception_1.RpcCodeException('Linux Host  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.fileName === undefined || request.fileName === '') {\n                throw new rpc_code_exception_1.RpcCodeException('name  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const path = (0, path_1.join)(process.cwd(), 'public', 'sound', request.fileName);\n            if (!(0, fs_1.existsSync)(path)) {\n                throw new rpc_code_exception_1.RpcCodeException(`  . ( name : ${request.fileName} )`, constant_1.GrpcCode.NotFound);\n            }\n            (0, fs_1.unlinkSync)(path);\n            return request;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Sound] deleteSoundFile : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n};\nexports.SoundService = SoundService;\nexports.SoundService = SoundService = __decorate([\n    __param(0, (0, common_2.Inject)('SoundOutputPort')),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof sound_output_port_1.SoundOutputPort !== \"undefined\" && sound_output_port_1.SoundOutputPort) === \"function\" ? _a : Object, typeof (_b = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _b : Object])\n], SoundService);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SoundPlaySoundAdapter = void 0;\nconst common_1 = require(\"@app/common\");\nconst fs_1 = require(\"fs\");\nconst PlaySound = require(\"play-sound\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst child_process_1 = require(\"child_process\");\nconst path_1 = require(\"path\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_2 = require(\"@nestjs/common\");\nlet SoundPlaySoundAdapter = class SoundPlaySoundAdapter {\n    constructor(saveLogService) {\n        this.saveLogService = saveLogService;\n        this.player = PlaySound();\n        this.repeatCount = 0;\n        this.curPlaying = null;\n        this.curPlayingInfo = null;\n        this.logger = this.saveLogService.get('host');\n    }\n    getPlaying() {\n        if (this.curPlayingInfo) {\n            return this.curPlayingInfo;\n        }\n        return {\n            fileName: '',\n            volume: 0,\n            repeatCount: 0,\n            isWaitUntilDone: false,\n        };\n    }\n    async play(request) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                const path = (0, path_1.join)(process.cwd(), 'public', 'sound', request.fileName);\n                this.logger?.debug(`[Sound] Play: ${path}`);\n                if (!(0, fs_1.existsSync)(path)) {\n                    reject(new rpc_code_exception_1.RpcCodeException(`   . ${path}`, constant_1.GrpcCode.NotFound));\n                }\n                if (this.curPlaying) {\n                    this.logger?.info(`[Sound] Play: Stop cur Playing`);\n                    await this.stopPlaying();\n                }\n                this.curPlayingInfo = request;\n                if (!request.isWaitUntilDone) {\n                    this.logger?.info(`[Sound] Play: Play Start without Wait`);\n                    resolve(request);\n                }\n                for (var i = 0; i < request.repeatCount; i++) {\n                    await this.playSync(path, request.volume);\n                }\n                this.logger?.info(`[Sound] Play: Play Wait Done`);\n                this.stopPlaying();\n                resolve(request);\n            }\n            catch (error) {\n                if (error instanceof microservices_1.RpcException)\n                    reject(error);\n                this.logger?.error(`[Sound] Play: ${(0, common_1.errorToJson)(error)}`);\n                reject(new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError));\n            }\n        });\n    }\n    async stop() {\n        try {\n            this.logger?.info(`[Sound] Stop`);\n            if (!this.curPlaying) {\n                this.logger?.warn(`[Sound] Stop: curPlaying is null`);\n                throw new rpc_code_exception_1.RpcCodeException('  .', constant_1.GrpcCode.NotFound);\n            }\n            await this.stopPlaying();\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Sound] Stop: ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async playSync(path, volume) {\n        return new Promise((resolve, reject) => {\n            this.logger?.debug(`[Sound] playSync: ${path}, ${volume}`);\n            this.curPlaying = this.player.play(path, { mplayer: ['-ao', 'pulse', '-volume', volume] }, (err) => {\n                if (err) {\n                    if (typeof err === 'number' && err === 1) {\n                        this.logger?.error(`[Sound] Play: Code 1`);\n                        reject(new rpc_code_exception_1.RpcCodeException(' .', constant_1.GrpcCode.InternalError));\n                    }\n                    else {\n                        console.error(err);\n                        this.logger?.error(`[Sound] Play: ${(0, common_1.errorToJson)(err)}`);\n                        reject(new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError));\n                    }\n                }\n                resolve();\n            });\n        });\n    }\n    async stopPlaying() {\n        this.repeatCount = 0;\n        try {\n            (0, child_process_1.execSync)('pkill -x mplayer', { stdio: 'ignore' });\n        }\n        catch (error) {\n            this.logger?.error(`[Sound] Stop: ${(0, common_1.errorToJson)(error)}`);\n        }\n        this.curPlaying = null;\n        this.curPlayingInfo = null;\n    }\n};\nexports.SoundPlaySoundAdapter = SoundPlaySoundAdapter;\nexports.SoundPlaySoundAdapter = SoundPlaySoundAdapter = __decorate([\n    (0, common_2.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object])\n], SoundPlaySoundAdapter);\n","module.exports = require(\"play-sound\");","module.exports = require(\"child_process\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nconst typeorm_1 = require(\"@nestjs/typeorm\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst pg_1 = require(\"pg\");\nconst update_command_entity_1 = require(\"./entity/update-command.entity\");\nconst update_grpc_controller_1 = require(\"./adapter/input/update.grpc.controller\");\nconst update_service_1 = require(\"./application/update.service\");\nconst update_sh_adapter_1 = require(\"./adapter/output/update.sh.adapter\");\nconst update_socketio_adapter_1 = require(\"./adapter/output/update.socketio.adapter\");\nconst constant_1 = require(\"@app/common/constant\");\nconst update_pending_service_1 = require(\"./application/update.pending.service\");\nconst update_database_adapter_1 = require(\"./adapter/output/update.database.adapter\");\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst update_version_entity_1 = require(\"./entity/update-version.entity\");\nconst update_log_entity_1 = require(\"./entity/update-log.entity\");\nconst log_module_1 = require(\"@app/common/log/log.module\");\nlet UpdateModule = class UpdateModule {\n};\nexports.UpdateModule = UpdateModule;\nexports.UpdateModule = UpdateModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            log_module_1.LogModule,\n            config_1.ConfigModule.forRoot({\n                isGlobal: true,\n                envFilePath: '.env',\n            }),\n            typeorm_1.TypeOrmModule.forRootAsync({\n                inject: [config_1.ConfigService],\n                useFactory: async (configService) => {\n                    await ensureHostDatabase();\n                    return {\n                        type: 'postgres',\n                        url: configService.get('POSTGRES_URL') + '/host',\n                        autoLoadEntities: true,\n                        synchronize: true,\n                        logging: configService.get('NODE_ENV') === 'development',\n                    };\n                },\n            }),\n            typeorm_1.TypeOrmModule.forFeature([update_version_entity_1.UpdateVersion]),\n            mongoose_1.MongooseModule.forFeature([\n                {\n                    name: update_command_entity_1.UpdateCommand.name,\n                    schema: update_command_entity_1.UpdateCommandSchema,\n                },\n                {\n                    name: update_log_entity_1.UpdateLog.name,\n                    schema: update_log_entity_1.UpdateLogSchema,\n                },\n            ]),\n            mongoose_1.MongooseModule.forRootAsync({\n                inject: [config_1.ConfigService],\n                useFactory: (configService) => ({\n                    uri: configService.get('MONGO_URL'),\n                }),\n            }),\n            microservices_1.ClientsModule.registerAsync([\n                {\n                    name: constant_1.MQTT_BROKER,\n                    inject: [config_1.ConfigService],\n                    useFactory: (configService) => ({\n                        transport: microservices_1.Transport.MQTT,\n                        options: {\n                            url: configService.get('MQTT_URL'),\n                        },\n                    }),\n                },\n            ]),\n        ],\n        controllers: [update_grpc_controller_1.UpdateGrpcController],\n        providers: [\n            config_1.ConfigService,\n            update_service_1.UpdateService,\n            update_pending_service_1.UpdatePendingResponseService,\n            {\n                provide: 'updateDatabaseOutputPort',\n                useClass: update_database_adapter_1.UpdateDatabaseAdapter,\n            },\n            {\n                provide: 'updateShOutputPort',\n                useClass: update_sh_adapter_1.UpdateShAdapter,\n            },\n            {\n                provide: 'updateSlamnavOutputPort',\n                useClass: update_socketio_adapter_1.UpdateSocketioAdapter,\n            },\n        ],\n    })\n], UpdateModule);\nasync function ensureHostDatabase() {\n    const client = new pg_1.Client({\n        host: process.env.POSTGRES_HOST || 'localhost',\n        port: parseInt(process.env.POSTGRES_PORT || '7000'),\n        user: process.env.POSTGRES_USER || 'postgres',\n        password: process.env.POSTGRES_PASSWORD || 'postgres',\n        database: 'postgres',\n    });\n    try {\n        await client.connect();\n        const result = await client.query(\"SELECT 1 FROM pg_database WHERE datname = 'host'\");\n        if (result.rows.length === 0) {\n            await client.query('CREATE DATABASE host');\n            console.log(' host   ');\n        }\n        else {\n            console.log(' host   ');\n        }\n    }\n    catch (error) {\n        console.warn(' host DB  :', error.message);\n    }\n    finally {\n        await client.end();\n    }\n}\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateCommandSchema = exports.UpdateCommand = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nlet UpdateCommand = class UpdateCommand {\n};\nexports.UpdateCommand = UpdateCommand;\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"_id\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"command\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"status\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"software\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"branch\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"version\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", Boolean)\n], UpdateCommand.prototype, \"hotfix\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"token\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"message\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ array: true, nullable: true, required: false }),\n    __metadata(\"design:type\", Array)\n], UpdateCommand.prototype, \"appNames\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateCommand.prototype, \"fo\", void 0);\nexports.UpdateCommand = UpdateCommand = __decorate([\n    (0, mongoose_1.Schema)()\n], UpdateCommand);\nexports.UpdateCommandSchema = mongoose_1.SchemaFactory.createForClass(UpdateCommand);\nexports.UpdateCommandSchema.set('timestamps', true);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateGrpcController = void 0;\nconst common_1 = require(\"@app/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst update_service_1 = require(\"../../application/update.service\");\nlet UpdateGrpcController = class UpdateGrpcController {\n    constructor(updateService) {\n        this.updateService = updateService;\n    }\n    getCurrentVersion(request, metadata) {\n        return this.updateService.getCurrentVersion(request);\n    }\n    testPing(request, metadata) {\n        return this.updateService.testPing(request);\n    }\n    getNewVersion(request, metadata) {\n        return this.updateService.getNewVersion(request);\n    }\n    getReleaseBranch(request, metadata) {\n        return this.updateService.getReleaseAppsBranches(request);\n    }\n    getReleaseVersion(request, metadata) {\n        return this.updateService.getReleaseAppsVersionList(request);\n    }\n    addWebUi(request, metadata) {\n        return this.updateService.addWebUI(request);\n    }\n    deleteWebUi(request, metadata) {\n        return this.updateService.deleteWebUI(request);\n    }\n    updateProgram(request, metadata) {\n        return this.updateService.updateProgram(request);\n    }\n};\nexports.UpdateGrpcController = UpdateGrpcController;\nexports.UpdateGrpcController = UpdateGrpcController = __decorate([\n    (0, common_2.Controller)(),\n    common_1.UpdateMicroservice.UpdateGrpcServiceControllerMethods(),\n    (0, common_2.UseInterceptors)(common_1.GrpcInterceptor),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof update_service_1.UpdateService !== \"undefined\" && update_service_1.UpdateService) === \"function\" ? _a : Object])\n], UpdateGrpcController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c, _d, _e;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateService = void 0;\nconst common_1 = require(\"@app/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst net = require(\"net\");\nconst child_process_1 = require(\"child_process\");\nconst common_3 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst crypto = require(\"crypto\");\nconst fs_1 = require(\"fs\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst os_1 = require(\"os\");\nconst path_1 = require(\"path\");\nconst update_domain_1 = require(\"../domain/update.domain\");\nconst update_slamnav_output_port_1 = require(\"../port/update.slamnav.output-port\");\nconst update_database_output_port_1 = require(\"../port/update.database.output-port\");\nconst map_command_domain_1 = require(\"../../map/domain/map-command.domain\");\nconst update_sh_output_port_1 = require(\"../port/update.sh.output-port\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet UpdateService = class UpdateService {\n    constructor(configService, updateShOutputPort, updateSlamnavOutputPort, updateDatabaseOutputPort, saveLogService) {\n        this.configService = configService;\n        this.updateShOutputPort = updateShOutputPort;\n        this.updateSlamnavOutputPort = updateSlamnavOutputPort;\n        this.updateDatabaseOutputPort = updateDatabaseOutputPort;\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('update');\n        if (!this.configService) {\n            throw new Error('ConfigService  .');\n        }\n    }\n    onModuleInit() {\n        console.log(this.configService.get('RELEASE_REPO_URL'));\n    }\n    async checkRepositoryAccess() {\n        let url;\n        try {\n            try {\n                url = this.configService.get('RELEASE_REPO_URL');\n            }\n            catch (error) {\n                throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n            }\n            if (!url) {\n                throw new rpc_code_exception_1.RpcCodeException(' URL  .', constant_1.GrpcCode.FailedPrecondition);\n            }\n            this.logger?.debug(`[UPDATE] checkRepositoryAccess URL : ${url}`);\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new rpc_code_exception_1.RpcCodeException(`   . : ${url}`, constant_1.GrpcCode.FailedPrecondition);\n            }\n            return response.ok;\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] checkRepositoryAccess (url: ${url}) : ${(0, common_1.errorToJson)(error)}}`);\n            throw new rpc_code_exception_1.RpcCodeException(`   . ${url}`, constant_1.GrpcCode.InternalError);\n        }\n    }\n    async testPing(request) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                if (!net.isIP(request.target)) {\n                    reject(new rpc_code_exception_1.RpcCodeException('  ip .', common_3.HttpStatus.BAD_REQUEST));\n                }\n                const stdout = (0, child_process_1.execSync)(`ping -c 1 ${request.target}`);\n                resolve({\n                    target: request.target,\n                    message: ' .',\n                    stdout: stdout.toString(),\n                });\n            }\n            catch (error) {\n                if (error instanceof microservices_1.RpcException)\n                    reject(error);\n                this.logger?.error(`[UPDATE] pingSendToTarget : ${error}`);\n                reject(new rpc_code_exception_1.RpcCodeException(` IP    . ${request.target}`, constant_1.GrpcCode.InternalError));\n            }\n        });\n    }\n    async getNewVersion(request) {\n        let model;\n        try {\n            this.logger?.info(`[UPDATE] getNewVersion : ${JSON.stringify(request)}`);\n            model = new update_domain_1.UpdateModel({\n                ...request,\n                command: update_domain_1.UpdateCommand.GetNewVersion,\n            });\n            const updateCommand = await this.updateDatabaseOutputPort.save(model);\n            model.assignId(updateCommand._id);\n            model.checkVariables();\n            await this.checkRepositoryAccess();\n            const newVersionUrl = `${this.configService.get('RELEASE_REPO_RAW_URL')}/${model.branch}/${model.software}/version.json`;\n            this.logger?.debug(`[UPDATE] getNewVersion URL : ${newVersionUrl}`);\n            const newVersionData = await fetch(newVersionUrl);\n            const newVersionDataJson = await newVersionData.json();\n            model.version = newVersionDataJson.new_version;\n            model.hotfix = newVersionDataJson.hotfix;\n            model.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.updateDatabaseOutputPort.update(model);\n            await this.updateDatabaseOutputPort.setNewVersion(model);\n            this.logger?.debug(`[UPDATE] getNewVersion Data : ${JSON.stringify(newVersionDataJson)}`);\n            return { ...model, software: model.software };\n        }\n        catch (error) {\n            if (model) {\n                model.message = error.error.details;\n                model.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.updateDatabaseOutputPort.update(model);\n            }\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] getNewVersion : ${error}`);\n            throw new rpc_code_exception_1.RpcCodeException(`[${request.software}] ${request.branch}  version.json    .`, common_3.HttpStatus.NOT_FOUND);\n        }\n    }\n    async getCurrentVersion(request) {\n        let model;\n        try {\n            model = new update_domain_1.UpdateModel({\n                command: update_domain_1.UpdateCommand.GetCurrentVersion,\n                software: request.software,\n            });\n            const updateCommand = await this.updateDatabaseOutputPort.save(model);\n            model.assignId(updateCommand._id);\n            model.checkVariables();\n            let resp;\n            if (model.software === update_domain_1.SoftwareName.RRS) {\n                resp = await this.getRrsCurrentVersion(model.software);\n            }\n            else if (model.software === update_domain_1.SoftwareName.SLAMNAV) {\n                resp = await this.updateSlamnavOutputPort.getVersion(model);\n            }\n            else if (model.software === update_domain_1.SoftwareName.RRS_UI) {\n                throw new rpc_code_exception_1.RpcCodeException(`  . ${request.software}`, constant_1.GrpcCode.Unimplemented);\n            }\n            else {\n                throw new rpc_code_exception_1.RpcCodeException(`  . ${request.software}`, constant_1.GrpcCode.InvalidArgument);\n            }\n            model.version = resp.version;\n            model.branch = resp.branch;\n            model.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.updateDatabaseOutputPort.update(model);\n            await this.updateDatabaseOutputPort.setCurrentVersion(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.message = error.error.details;\n                model.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.updateDatabaseOutputPort.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[UPDATE] getCurrentVersion : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getRrsCurrentVersion(software) {\n        try {\n            const versionPath = (0, path_1.join)((0, os_1.homedir)(), software, 'version.json');\n            if (!(0, fs_1.existsSync)(versionPath)) {\n                this.logger?.error(`[UPDATE] getRrsCurrentVersion : ${versionPath}    .`);\n                throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.NotFound);\n            }\n            const versionData = (0, fs_1.readFileSync)(versionPath, 'utf-8');\n            const parsedVersionData = JSON.parse(versionData);\n            const branch = await this.getRrsCurrentBranch();\n            return { version: parsedVersionData.current, software: software, branch: branch };\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] getRrsCurrentVersion : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getRrsCurrentBranch() {\n        try {\n            const branchPath = (0, path_1.join)((0, os_1.homedir)(), 'rrs-env.conf');\n            if (!(0, fs_1.existsSync)(branchPath)) {\n                this.logger?.error(`[UPDATE] getRrsCurrentBranch : ${branchPath}    .`);\n                throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.NotFound);\n            }\n            const branchData = (0, fs_1.readFileSync)(branchPath, 'utf-8').split('=')[1];\n            return branchData.trim().replace(/^\"|\"$/g, '');\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] getRrsCurrentBranch : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getReleaseAppsBranches(request) {\n        let model;\n        try {\n            model = new update_domain_1.UpdateModel({\n                command: update_domain_1.UpdateCommand.GetReleaseBranch,\n                token: request.token,\n                pageNo: request.pageNo,\n                pageSize: request.pageSize,\n            });\n            const updateCommand = await this.updateDatabaseOutputPort.save(model);\n            model.assignId(updateCommand._id);\n            model.checkVariables();\n            const url = `https://api.github.com/repos/rainbow-mobile/rainbow-release-apps/branches`;\n            this.logger?.debug(`[UPDATE] getReleaseAppsBranches URL : ${url}`);\n            await this.checkRepositoryAccess();\n            const res = await fetch(url, {\n                headers: {\n                    Authorization: `Basic ${this.decryptToken(model.token)}`,\n                },\n            });\n            const startIndex = (model.pageNo - 1) * model.pageSize;\n            const endIndex = startIndex + model.pageSize;\n            const resJson = await res.json();\n            const list = resJson.slice(startIndex, endIndex);\n            this.logger?.debug(`[UPDATE] getReleaseAppsBranches Data : ${JSON.stringify(list)}`);\n            return { list: list, pageSize: model.pageSize, totalCount: resJson.length, totalPage: Math.ceil(resJson.length / model.pageSize) };\n        }\n        catch (error) {\n            if (model) {\n                model.message = error.error.details;\n                model.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.updateDatabaseOutputPort.update(model);\n            }\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] getReleaseAppsBranches : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    decryptToken(base64Payload) {\n        const keyStr = 'RAINBOW_GITHUB_API_TOKEN';\n        const key = crypto.createHash('sha256').update(keyStr).digest();\n        const payloadBuffer = Buffer.from(base64Payload, 'base64');\n        const iv = payloadBuffer.slice(0, 16);\n        const encrypted = payloadBuffer.slice(16);\n        const decipher = crypto.createDecipheriv('aes-256-cbc', key, iv);\n        let decrypted = decipher.update(encrypted, undefined, 'utf8');\n        decrypted += decipher.final('utf8');\n        return decrypted;\n    }\n    async getReleaseAppsVersionList(request) {\n        let model;\n        try {\n            model = new update_domain_1.UpdateModel({\n                command: update_domain_1.UpdateCommand.GetReleaseVersion,\n                token: request.token,\n                branch: request.branch,\n                software: request.software,\n            });\n            const updateCommand = await this.updateDatabaseOutputPort.save(model);\n            model.assignId(updateCommand._id);\n            model.checkVariables();\n            const url = `https://api.github.com/repos/rainbow-mobile/rainbow-release-apps/contents/${model.software}?ref=${model.branch}`;\n            this.logger?.debug(`[UPDATE] getReleaseAppsVersionList URL : ${url}`);\n            await this.checkRepositoryAccess();\n            const res = await fetch(url, {\n                headers: {\n                    Authorization: `Basic ${this.decryptToken(model.token)}`,\n                },\n                method: 'GET',\n            });\n            const resJson = await res.json();\n            this.logger?.debug(`[UPDATE] getReleaseAppsVersionList Data Length : ${resJson.length}`);\n            return { list: resJson };\n        }\n        catch (error) {\n            if (model) {\n                model.message = error.error.details;\n                model.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.updateDatabaseOutputPort.update(model);\n            }\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] getReleaseAppsVersionList : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async updateProgram(request) {\n        try {\n            if (request.software === undefined || request.software === null || request.software === '') {\n                throw new rpc_code_exception_1.RpcCodeException('  .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (request.branch === undefined || request.branch === null || request.branch === '') {\n                request.branch = 'main';\n            }\n            const updateModel = new update_domain_1.UpdateModel({\n                command: 'update',\n                branch: request.branch,\n                version: request.version,\n            });\n            if (request.software.toLowerCase().includes('rrs') || request.software.toLowerCase().includes('server')) {\n                return this.updateShOutputPort.updateRRS(updateModel);\n            }\n            else if (request.software.toLowerCase().includes('slamnav')) {\n                return this.updateSlamnavOutputPort.updateSLAMNAV(updateModel);\n            }\n            else {\n                throw new rpc_code_exception_1.RpcCodeException(`  . ${request.software}`, constant_1.GrpcCode.InvalidArgument);\n            }\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] updateProgram : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async addWebUI(request) {\n        let model;\n        try {\n            model = new update_domain_1.UpdateModel({\n                command: update_domain_1.UpdateCommand.AddWebUi,\n                appNames: request.appNames,\n                branch: request.branch,\n                fo: request.fo,\n            });\n            const updateCommand = await this.updateDatabaseOutputPort.save(model);\n            model.assignId(updateCommand._id);\n            model.checkVariables();\n            const resp = await this.updateShOutputPort.addWebUI(model);\n            model.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.updateDatabaseOutputPort.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.message = error.error.details;\n                model.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.updateDatabaseOutputPort.update(model);\n            }\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] addWebUI : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException(' UI   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async deleteWebUI(request) {\n        let model;\n        try {\n            model = new update_domain_1.UpdateModel({\n                command: update_domain_1.UpdateCommand.DeleteWebUi,\n                appNames: request.appNames,\n            });\n            const updateCommand = await this.updateDatabaseOutputPort.save(model);\n            model.assignId(updateCommand._id);\n            model.checkVariables();\n            const resp = await this.updateShOutputPort.deleteWebUI(model);\n            model.statusChange(map_command_domain_1.CommandStatus.success);\n            await this.updateDatabaseOutputPort.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.message = error.error.details;\n                model.statusChange(map_command_domain_1.CommandStatus.fail);\n                await this.updateDatabaseOutputPort.update(model);\n            }\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] deleteWebUI : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException(' UI   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n};\nexports.UpdateService = UpdateService;\nexports.UpdateService = UpdateService = __decorate([\n    (0, common_2.Injectable)(),\n    __param(1, (0, common_2.Inject)('updateShOutputPort')),\n    __param(2, (0, common_2.Inject)('updateSlamnavOutputPort')),\n    __param(3, (0, common_2.Inject)('updateDatabaseOutputPort')),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof config_1.ConfigService !== \"undefined\" && config_1.ConfigService) === \"function\" ? _a : Object, typeof (_b = typeof update_sh_output_port_1.UpdateShOutputPort !== \"undefined\" && update_sh_output_port_1.UpdateShOutputPort) === \"function\" ? _b : Object, typeof (_c = typeof update_slamnav_output_port_1.UpdateSlamnavOutputPort !== \"undefined\" && update_slamnav_output_port_1.UpdateSlamnavOutputPort) === \"function\" ? _c : Object, typeof (_d = typeof update_database_output_port_1.UpdateDatabaseOutputPort !== \"undefined\" && update_database_output_port_1.UpdateDatabaseOutputPort) === \"function\" ? _d : Object, typeof (_e = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _e : Object])\n], UpdateService);\n","module.exports = require(\"net\");","module.exports = require(\"crypto\");","module.exports = require(\"os\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateModel = exports.SoftwareName = exports.UpdateCommand = void 0;\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nvar CommandStatus;\n(function (CommandStatus) {\n    CommandStatus[\"pending\"] = \"pending\";\n    CommandStatus[\"accepted\"] = \"accepted\";\n    CommandStatus[\"rejected\"] = \"rejected\";\n    CommandStatus[\"fail\"] = \"fail\";\n    CommandStatus[\"unknown\"] = \"unknown\";\n})(CommandStatus || (CommandStatus = {}));\nvar UpdateCommand;\n(function (UpdateCommand) {\n    UpdateCommand[\"Update\"] = \"update\";\n    UpdateCommand[\"GetCurrentVersion\"] = \"getCurrentVersion\";\n    UpdateCommand[\"GetNewVersion\"] = \"getNewVersion\";\n    UpdateCommand[\"GetReleaseVersion\"] = \"getReleaseVersion\";\n    UpdateCommand[\"GetReleaseBranch\"] = \"getReleaseBranch\";\n    UpdateCommand[\"AddWebUi\"] = \"addWebUi\";\n    UpdateCommand[\"DeleteWebUi\"] = \"deleteWebUi\";\n})(UpdateCommand || (exports.UpdateCommand = UpdateCommand = {}));\nvar SoftwareName;\n(function (SoftwareName) {\n    SoftwareName[\"RRS\"] = \"web_robot_server\";\n    SoftwareName[\"SLAMNAV\"] = \"slamnav2\";\n    SoftwareName[\"RRS_UI\"] = \"web-rainbow-ui\";\n})(SoftwareName || (exports.SoftwareName = SoftwareName = {}));\nclass UpdateModel {\n    constructor(param) {\n        this.command = param.command;\n        this.status = CommandStatus.pending;\n        this.software = param.software;\n        this.branch = param.branch;\n        this.version = param.version;\n        this.token = param.token;\n        this.appNames = param.appNames;\n        this.fo = param.fo;\n        this.pageNo = param.pageNo;\n        this.pageSize = param.pageSize;\n    }\n    assignId(id) {\n        this.id = id;\n    }\n    statusChange(status) {\n        this.status = status;\n    }\n    checkVariables() {\n        switch (this.command) {\n            case UpdateCommand.Update: {\n                this.software = this.checkSoftwareName(this.software);\n                if (this.branch === undefined || this.branch === '') {\n                    this.branch = 'main';\n                }\n                if (this.version === undefined || this.version === '') {\n                    this.version = 'latest';\n                }\n                break;\n            }\n            case UpdateCommand.GetCurrentVersion: {\n                this.software = this.checkSoftwareName(this.software);\n                break;\n            }\n            case UpdateCommand.GetNewVersion: {\n                this.software = this.checkSoftwareName(this.software);\n                console.log('->', this.software);\n                if (this.branch === undefined || this.branch === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('branch  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                break;\n            }\n            case UpdateCommand.GetReleaseVersion: {\n                this.software = this.checkSoftwareName(this.software);\n                if (this.token === undefined || this.token === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('token  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                break;\n            }\n            case UpdateCommand.GetReleaseBranch: {\n                if (this.token === undefined || this.token === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('token  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.pageNo === undefined || this.pageNo === 0) {\n                    this.pageNo = 1;\n                }\n                if (this.pageSize === undefined || this.pageSize === 0) {\n                    this.pageSize = 10;\n                }\n                break;\n            }\n            case UpdateCommand.AddWebUi: {\n                if (this.appNames === undefined || this.appNames.length === 0) {\n                    throw new rpc_code_exception_1.RpcCodeException('appNames  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                this.appNames.map((appName) => {\n                    if (appName === undefined || appName === '') {\n                        throw new rpc_code_exception_1.RpcCodeException('appNames  .', constant_1.GrpcCode.InvalidArgument);\n                    }\n                });\n                if (this.branch === undefined || this.branch === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('branch  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                if (this.fo === undefined || this.fo === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('fo  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                break;\n            }\n            case UpdateCommand.DeleteWebUi: {\n                if (this.appNames === undefined || this.appNames.length === 0) {\n                    throw new rpc_code_exception_1.RpcCodeException('appNames  .', constant_1.GrpcCode.InvalidArgument);\n                }\n                this.appNames.map((appName) => {\n                    if (appName === undefined || appName === '') {\n                        throw new rpc_code_exception_1.RpcCodeException('appNames  .', constant_1.GrpcCode.InvalidArgument);\n                    }\n                });\n                break;\n            }\n            default: {\n                throw new rpc_code_exception_1.RpcCodeException(`   command(${this.command}).`, constant_1.GrpcCode.InvalidArgument);\n            }\n        }\n    }\n    checkSoftwareName(software) {\n        if (software === undefined || software === '') {\n            throw new rpc_code_exception_1.RpcCodeException('software  .', constant_1.GrpcCode.InvalidArgument);\n        }\n        if (software.toLowerCase().includes('rrs') || software.toLowerCase().includes('server')) {\n            return SoftwareName.RRS;\n        }\n        if (software.toLowerCase().includes('ui')) {\n            return SoftwareName.RRS_UI;\n        }\n        if (software.toLowerCase().includes('slam')) {\n            return SoftwareName.SLAMNAV;\n        }\n        throw new rpc_code_exception_1.RpcCodeException(`   software(${software}).`, constant_1.GrpcCode.InvalidArgument);\n    }\n}\nexports.UpdateModel = UpdateModel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateShAdapter = void 0;\nconst common_1 = require(\"@app/common\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst grpc_code_constant_1 = require(\"@app/common/grpc/constant/grpc-code.constant\");\nconst config_1 = require(\"@nestjs/config\");\nconst child_process_1 = require(\"child_process\");\nconst fs_1 = require(\"fs\");\nconst os_1 = require(\"os\");\nconst path_1 = require(\"path\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_2 = require(\"@nestjs/common\");\nlet UpdateShAdapter = class UpdateShAdapter {\n    constructor(configService, saveLogService) {\n        this.configService = configService;\n        this.saveLogService = saveLogService;\n        this.deployKitDir = (0, path_1.join)((0, os_1.homedir)(), 'rainbow-deploy-kit');\n        this.logger = this.saveLogService.get('update');\n    }\n    async updateRRS(request) {\n        const updateScript = (0, path_1.join)(this.deployKitDir, 'rrs-server', 'rrs-update.sh');\n        if (!(0, fs_1.existsSync)(updateScript)) {\n            this.logger?.error(`[UPDATE] rrsUpdate: ${updateScript}    .`);\n            throw new rpc_code_exception_1.RpcCodeException(`rrs-update.sh    .`, grpc_code_constant_1.GrpcCode.NotFound);\n        }\n        (0, child_process_1.execSync)('git pull', {\n            cwd: this.deployKitDir,\n            stdio: 'pipe',\n        });\n        (0, child_process_1.execSync)(`nohup bash ${updateScript} --mode=${request.branch || 'main'} --version=${request.version} > /tmp/rrs-update.log 2>&1 &`);\n        return { software: 'rrs', branch: request.branch, version: request.version, result: 'true', message: '' };\n    }\n    async addWebUI(model) {\n        const addWebUIScript = (0, path_1.join)(this.deployKitDir, 'web-ui', 'fe-add-app.sh');\n        if (!(0, fs_1.existsSync)(addWebUIScript)) {\n            this.logger?.error(`[UPDATE] addWebUI: ${addWebUIScript}    .`);\n            throw new rpc_code_exception_1.RpcCodeException(`fe-add-app.sh    .`, grpc_code_constant_1.GrpcCode.NotFound);\n        }\n        try {\n            (0, child_process_1.execSync)('git pull', {\n                cwd: this.deployKitDir,\n                stdio: 'pipe',\n            });\n            (0, child_process_1.execSync)(`bash ${addWebUIScript}${model.branch ? ` --mode=${model.branch}` : ''}${model.fo ? ` --fo=${model.fo}` : ''} ${model.appNames.join(' ')}`);\n            return { appNames: model.appNames, branch: model.branch, fo: model.fo };\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] addWebUI : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException(' UI   .', grpc_code_constant_1.GrpcCode.InternalError);\n        }\n    }\n    async deleteWebUI(model) {\n        const deleteWebUIScript = (0, path_1.join)(this.deployKitDir, 'web-ui', 'fe-delete-app.sh');\n        if (!(0, fs_1.existsSync)(deleteWebUIScript)) {\n            this.logger?.error(`[UPDATE] deleteWebUI: ${deleteWebUIScript}    .`);\n            throw new rpc_code_exception_1.RpcCodeException(`fe-delete-app.sh    .`, grpc_code_constant_1.GrpcCode.NotFound);\n        }\n        try {\n            (0, child_process_1.execSync)('git pull', {\n                cwd: this.deployKitDir,\n                stdio: 'pipe',\n            });\n            (0, child_process_1.execSync)(`bash ${deleteWebUIScript} ${model.appNames.join(' ')}`);\n            return { appNames: model.appNames };\n        }\n        catch (error) {\n            if (error instanceof rpc_code_exception_1.RpcCodeException)\n                throw error;\n            this.logger?.error(`[UPDATE] deleteWebUI : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException(' UI   .', grpc_code_constant_1.GrpcCode.InternalError);\n        }\n    }\n};\nexports.UpdateShAdapter = UpdateShAdapter;\nexports.UpdateShAdapter = UpdateShAdapter = __decorate([\n    (0, common_2.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof config_1.ConfigService !== \"undefined\" && config_1.ConfigService) === \"function\" ? _a : Object, typeof (_b = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _b : Object])\n], UpdateShAdapter);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateSocketioAdapter = void 0;\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst common_1 = require(\"@app/common\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst common_2 = require(\"@nestjs/common\");\nconst constant_2 = require(\"@app/common/constant\");\nconst update_pending_service_1 = require(\"../../application/update.pending.service\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet UpdateSocketioAdapter = class UpdateSocketioAdapter {\n    constructor(mqttService, pendingService, saveLogService) {\n        this.mqttService = mqttService;\n        this.pendingService = pendingService;\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('update');\n    }\n    async updateSLAMNAV(request) {\n        try {\n            this.logger?.debug(`[Update] updateSLAMNAV : ${JSON.stringify(request)}`);\n            const response = this.waitForResponse(request.id, 5000);\n            this.mqttService.emit('updateRequest', request);\n            const resp = await response;\n            this.logger?.debug(`[Update] updateSLAMNAV Response : ${JSON.stringify(resp)}`);\n            return resp;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[UPDATE] updateSLAMNAV : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('SLAMNAV  ', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getVersion(request) {\n        try {\n            this.logger?.debug(`[Update] getVersion : ${JSON.stringify(request)}`);\n            const response = this.waitForResponse(request.id, 5000);\n            this.mqttService.emit('swVersionInfo', request);\n            const resp = await response;\n            this.logger?.debug(`[Update] getVersion Response : ${JSON.stringify(resp)}`);\n            return resp;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[UPDATE] getVersion : ${(0, common_1.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async waitForResponse(id, timeoutMs) {\n        return new Promise((resolve, reject) => {\n            let timeout;\n            if (timeoutMs) {\n                timeout = setTimeout(() => {\n                    this.pendingService.pendingResponses.delete(id);\n                    this.logger?.error(`[Update] waitForResponse Timeout : ${id} , ${timeoutMs}`);\n                    reject(new rpc_code_exception_1.RpcCodeException(`  .`, constant_1.GrpcCode.DeadlineExceeded));\n                }, timeoutMs);\n            }\n            this.pendingService.pendingResponses.set(id, {\n                resolve: (value) => {\n                    if (timeoutMs) {\n                        clearTimeout(timeout);\n                    }\n                    resolve(value);\n                },\n                reject: (error) => {\n                    if (timeoutMs) {\n                        clearTimeout(timeout);\n                    }\n                    reject(error);\n                },\n                received: [],\n            });\n        });\n    }\n};\nexports.UpdateSocketioAdapter = UpdateSocketioAdapter;\nexports.UpdateSocketioAdapter = UpdateSocketioAdapter = __decorate([\n    (0, common_2.Injectable)(),\n    __param(0, (0, common_2.Inject)(constant_2.MQTT_BROKER)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _a : Object, typeof (_b = typeof update_pending_service_1.UpdatePendingResponseService !== \"undefined\" && update_pending_service_1.UpdatePendingResponseService) === \"function\" ? _b : Object, typeof (_c = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _c : Object])\n], UpdateSocketioAdapter);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdatePendingResponseService = void 0;\nconst pending_util_1 = require(\"@app/common/util/pending/pending.util\");\nconst common_1 = require(\"@nestjs/common\");\nlet UpdatePendingResponseService = class UpdatePendingResponseService extends pending_util_1.PendingResponseUtil {\n};\nexports.UpdatePendingResponseService = UpdatePendingResponseService;\nexports.UpdatePendingResponseService = UpdatePendingResponseService = __decorate([\n    (0, common_1.Injectable)()\n], UpdatePendingResponseService);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateDatabaseAdapter = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst mongoose_2 = require(\"mongoose\");\nconst typeorm_1 = require(\"@nestjs/typeorm\");\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst typeorm_2 = require(\"typeorm\");\nconst util_1 = require(\"@app/common/util\");\nconst update_command_entity_1 = require(\"../../entity/update-command.entity\");\nconst update_version_entity_1 = require(\"../../entity/update-version.entity\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_1 = require(\"@nestjs/common\");\nlet UpdateDatabaseAdapter = class UpdateDatabaseAdapter {\n    constructor(Repository, VersionRepository, saveLogService) {\n        this.Repository = Repository;\n        this.VersionRepository = VersionRepository;\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('update');\n    }\n    async getVersion(software, branch) {\n        try {\n            return await this.VersionRepository.findOne({ where: { software, branch } });\n        }\n        catch (error) {\n            this.logger?.error(`[Move] DB getVersion: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async setCurrentVersion(model) {\n        try {\n            const version = await this.getVersion(model.software, model.branch);\n            console.log('----------------->', version);\n            if (!version) {\n                console.log('-----------------> save ', model.branch);\n                const created = await this.VersionRepository.save(this.VersionRepository.create({ software: model.software, branch: model.branch, currentVersion: model.version }));\n                return created;\n            }\n            else {\n                await this.VersionRepository.update(version.id, { currentVersion: model.version });\n                return await this.VersionRepository.findOne({ where: { id: version.id } });\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Move] DB setCurrentVersion: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async setNewVersion(model) {\n        try {\n            const version = await this.getVersion(model.software, model.branch);\n            if (!version) {\n                const created = await this.VersionRepository.save(this.VersionRepository.create({ software: model.software, branch: model.branch, newVersion: model.version }));\n                return created;\n            }\n            else {\n                await this.VersionRepository.update(version.id, { newVersion: model.version });\n                return await this.VersionRepository.findOne({ where: { id: version.id } });\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Move] DB setNewVersion: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getNodebyId(id) {\n        try {\n            return await this.Repository.findById(id).lean();\n        }\n        catch (error) {\n            this.logger?.error(`[Move] DB getNodebyId: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async save(model) {\n        try {\n            const _id = util_1.UrlUtil.generateUUID();\n            return await this.Repository.create({ ...model, _id });\n        }\n        catch (error) {\n            this.logger?.error(`[Move] DB save: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async update(model) {\n        try {\n            return await this.Repository.findByIdAndUpdate(model.id, model).lean();\n        }\n        catch (error) {\n            this.logger?.error(`[Move] DB update: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n        }\n    }\n};\nexports.UpdateDatabaseAdapter = UpdateDatabaseAdapter;\nexports.UpdateDatabaseAdapter = UpdateDatabaseAdapter = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, mongoose_1.InjectModel)(update_command_entity_1.UpdateCommand.name)),\n    __param(1, (0, typeorm_1.InjectRepository)(update_version_entity_1.UpdateVersion)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof mongoose_2.Model !== \"undefined\" && mongoose_2.Model) === \"function\" ? _a : Object, typeof (_b = typeof typeorm_2.Repository !== \"undefined\" && typeorm_2.Repository) === \"function\" ? _b : Object, typeof (_c = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _c : Object])\n], UpdateDatabaseAdapter);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateVersion = void 0;\nconst typeorm_1 = require(\"typeorm\");\nlet UpdateVersion = class UpdateVersion {\n};\nexports.UpdateVersion = UpdateVersion;\n__decorate([\n    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),\n    __metadata(\"design:type\", String)\n], UpdateVersion.prototype, \"id\", void 0);\n__decorate([\n    (0, typeorm_1.Column)(),\n    __metadata(\"design:type\", String)\n], UpdateVersion.prototype, \"software\", void 0);\n__decorate([\n    (0, typeorm_1.Column)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateVersion.prototype, \"branch\", void 0);\n__decorate([\n    (0, typeorm_1.Column)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateVersion.prototype, \"currentVersion\", void 0);\n__decorate([\n    (0, typeorm_1.Column)({ nullable: true }),\n    __metadata(\"design:type\", String)\n], UpdateVersion.prototype, \"newVersion\", void 0);\n__decorate([\n    (0, typeorm_1.CreateDateColumn)(),\n    __metadata(\"design:type\", typeof (_a = typeof Date !== \"undefined\" && Date) === \"function\" ? _a : Object)\n], UpdateVersion.prototype, \"createAt\", void 0);\n__decorate([\n    (0, typeorm_1.UpdateDateColumn)(),\n    __metadata(\"design:type\", typeof (_b = typeof Date !== \"undefined\" && Date) === \"function\" ? _b : Object)\n], UpdateVersion.prototype, \"updateAt\", void 0);\nexports.UpdateVersion = UpdateVersion = __decorate([\n    (0, typeorm_1.Entity)()\n], UpdateVersion);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UpdateLogSchema = exports.UpdateLog = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nlet UpdateLog = class UpdateLog {\n};\nexports.UpdateLog = UpdateLog;\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateLog.prototype, \"_id\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateLog.prototype, \"status\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateLog.prototype, \"software\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateLog.prototype, \"branch\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], UpdateLog.prototype, \"version\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", Boolean)\n], UpdateLog.prototype, \"hotfix\", void 0);\nexports.UpdateLog = UpdateLog = __decorate([\n    (0, mongoose_1.Schema)()\n], UpdateLog);\nexports.UpdateLogSchema = mongoose_1.SchemaFactory.createForClass(UpdateLog);\nexports.UpdateLogSchema.set('timestamps', true);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst network_grpc_controller_1 = require(\"./adapter/input/network.grpc.controller\");\nconst network_service_1 = require(\"./application/network.service\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst config_1 = require(\"@nestjs/config\");\nconst constant_1 = require(\"@app/common/constant\");\nconst network_nmcli_adapter_1 = require(\"./adapter/output/network.nmcli.adapter\");\nconst network_mongo_adapter_1 = require(\"./adapter/output/network.mongo.adapter\");\nconst network_mqtt_controller_1 = require(\"./adapter/input/network.mqtt.controller\");\nconst network_command_entity_1 = require(\"./entity/network.command.entity\");\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst log_module_1 = require(\"@app/common/log/log.module\");\nlet NetworkModule = class NetworkModule {\n};\nexports.NetworkModule = NetworkModule;\nexports.NetworkModule = NetworkModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            log_module_1.LogModule,\n            config_1.ConfigModule.forRoot({\n                isGlobal: true,\n                envFilePath: '.env',\n            }),\n            mongoose_1.MongooseModule.forFeature([\n                {\n                    name: network_command_entity_1.NetworkCommand.name,\n                    schema: network_command_entity_1.NetworkCommandSchema,\n                },\n            ]),\n            mongoose_1.MongooseModule.forRootAsync({\n                inject: [config_1.ConfigService],\n                useFactory: (configService) => ({\n                    uri: configService.get('MONGO_URL'),\n                }),\n            }),\n            microservices_1.ClientsModule.registerAsync([\n                {\n                    name: constant_1.MQTT_BROKER,\n                    inject: [config_1.ConfigService],\n                    useFactory: (configService) => ({\n                        transport: microservices_1.Transport.MQTT,\n                        options: {\n                            url: configService.get('MQTT_URL'),\n                        },\n                    }),\n                },\n            ]),\n        ],\n        controllers: [network_grpc_controller_1.NetworkGrpcInputController, network_mqtt_controller_1.NetworkMqttController],\n        providers: [\n            network_service_1.NetworkService,\n            {\n                provide: 'NetworkOutputPort',\n                useClass: network_nmcli_adapter_1.NetworkNmcliAdapter,\n            },\n            {\n                provide: 'NetworkDatabaseOutputPort',\n                useClass: network_mongo_adapter_1.NetworkMongoAdapter,\n            },\n        ],\n    })\n], NetworkModule);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkGrpcInputController = void 0;\nconst common_1 = require(\"@app/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst network_service_1 = require(\"../../application/network.service\");\nlet NetworkGrpcInputController = class NetworkGrpcInputController {\n    constructor(networkService) {\n        this.networkService = networkService;\n    }\n    getEthernet(request, metadata) {\n        return this.networkService.getEthernet();\n    }\n    getWifi(request, metadata) {\n        return this.networkService.getWifi();\n    }\n    getDevice(request, metadata) {\n        return this.networkService.getDevice(request.device);\n    }\n    getBluetooth(request, metadata) {\n        return this.networkService.getBluetooth();\n    }\n    getNetwork(request, metadata) {\n        return this.networkService.getNetwork();\n    }\n    setNetwork(request, metadata) {\n        return this.networkService.setNetwork(request);\n    }\n    connectWifi(request, metadata) {\n        return this.networkService.connectWifi(request);\n    }\n    getWifiList(request, metadata) {\n        return this.networkService.getWifiList();\n    }\n    scanWifi(request, metadata) {\n        return this.networkService.wifiScan();\n    }\n};\nexports.NetworkGrpcInputController = NetworkGrpcInputController;\nexports.NetworkGrpcInputController = NetworkGrpcInputController = __decorate([\n    (0, common_2.Controller)(),\n    common_1.NetworkMicroservice.NetworkGrpcServiceControllerMethods(),\n    (0, common_2.UseInterceptors)(common_1.GrpcInterceptor),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof network_service_1.NetworkService !== \"undefined\" && network_service_1.NetworkService) === \"function\" ? _a : Object])\n], NetworkGrpcInputController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkService = void 0;\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst constant_1 = require(\"@app/common/constant\");\nconst network_output_port_1 = require(\"../port/network.output-port\");\nconst network_database_output_port_1 = require(\"../port/network.database.output-port\");\nconst network_domain_1 = require(\"../domain/network.domain\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_2 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet NetworkService = class NetworkService {\n    constructor(mqttMicroservice, networkOutput, networkDatabase, saveLogService) {\n        this.mqttMicroservice = mqttMicroservice;\n        this.networkOutput = networkOutput;\n        this.networkDatabase = networkDatabase;\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('host');\n    }\n    onModuleInit() {\n        this.ready();\n    }\n    ready() {\n        this.mqttMicroservice.emit('ready:network', {});\n    }\n    async getNetwork() {\n        let model;\n        try {\n            this.logger?.info(`[Network] getNetwork ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.getNetwork });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.getNetwork();\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getNetwork: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async getEthernet() {\n        let model;\n        try {\n            this.logger?.info(`[Network] getEthernet ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.getEthernet });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.getEthernet();\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getEthernet: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async getWifi() {\n        let model;\n        try {\n            this.logger?.info(`[Network] getWifi ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.getWifi });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.getWifi();\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getWifi: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async getBluetooth() {\n        let model;\n        try {\n            this.logger?.info(`[Network] getBluetooth ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.getBluetooth });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.getBluetooth();\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getBluetooth: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async getDevice(device) {\n        let model;\n        try {\n            this.logger?.info(`[Network] getDevice ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.getDevice, device: device });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.getDevice(model);\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getDevice: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async setNetwork(request) {\n        let model;\n        try {\n            this.logger?.info(`[Network] setNetwork ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.setNetwork, ...request });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.setNetwork(model);\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] setNetwork: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async connectWifi(request) {\n        let model;\n        try {\n            this.logger?.info(`[Network] connectWifi ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.connectWifi, ...request });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.connectWifi(model);\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] connectWifi: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('  .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async wifiScan() {\n        let model;\n        try {\n            this.logger?.info(`[Network] wifiScan ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.wifiScan });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.wifiScan();\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] wifiScan: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('  .', constant_2.GrpcCode.InternalError);\n        }\n    }\n    async getWifiList() {\n        let model;\n        try {\n            this.logger?.info(`[Network] getWifiList ================================`);\n            model = new network_domain_1.NetworkModel({ command: network_domain_1.NetworkCommand.getWifiList });\n            const db = await this.networkDatabase.save(model);\n            model.assignId(db._id);\n            model.checkVariables();\n            const resp = await this.networkOutput.getWifiList();\n            model.statusChange(network_domain_1.NetworkStatus.success);\n            await this.networkDatabase.update(model);\n            return resp;\n        }\n        catch (error) {\n            if (model) {\n                model.statusChange(network_domain_1.NetworkStatus.fail);\n                model.message = error.error.details;\n                await this.networkDatabase.update(model);\n            }\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getWifiList: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_2.GrpcCode.InternalError);\n        }\n    }\n};\nexports.NetworkService = NetworkService;\nexports.NetworkService = NetworkService = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, common_1.Inject)(constant_1.MQTT_BROKER)),\n    __param(1, (0, common_1.Inject)('NetworkOutputPort')),\n    __param(2, (0, common_1.Inject)('NetworkDatabaseOutputPort')),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _a : Object, typeof (_b = typeof network_output_port_1.NetworkOutputPort !== \"undefined\" && network_output_port_1.NetworkOutputPort) === \"function\" ? _b : Object, typeof (_c = typeof network_database_output_port_1.NetworkDatabaseOutputPort !== \"undefined\" && network_database_output_port_1.NetworkDatabaseOutputPort) === \"function\" ? _c : Object, typeof (_d = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _d : Object])\n], NetworkService);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkModel = exports.NetworkCommand = exports.NetworkStatus = void 0;\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nvar NetworkStatus;\n(function (NetworkStatus) {\n    NetworkStatus[\"pending\"] = \"pending\";\n    NetworkStatus[\"accepted\"] = \"accept\";\n    NetworkStatus[\"rejected\"] = \"reject\";\n    NetworkStatus[\"success\"] = \"success\";\n    NetworkStatus[\"fail\"] = \"fail\";\n    NetworkStatus[\"cancelled\"] = \"cancelled\";\n    NetworkStatus[\"unknown\"] = \"unknown\";\n})(NetworkStatus || (exports.NetworkStatus = NetworkStatus = {}));\nvar NetworkCommand;\n(function (NetworkCommand) {\n    NetworkCommand[\"getNetwork\"] = \"getNetwork\";\n    NetworkCommand[\"getEthernet\"] = \"getEthernet\";\n    NetworkCommand[\"getWifi\"] = \"getWifi\";\n    NetworkCommand[\"getBluetooth\"] = \"getBluetooth\";\n    NetworkCommand[\"getDevice\"] = \"getDevice\";\n    NetworkCommand[\"setNetwork\"] = \"setNetwork\";\n    NetworkCommand[\"connectWifi\"] = \"connectWifi\";\n    NetworkCommand[\"wifiScan\"] = \"wifiScan\";\n    NetworkCommand[\"getWifiList\"] = \"getWifiList\";\n})(NetworkCommand || (exports.NetworkCommand = NetworkCommand = {}));\nclass NetworkModel {\n    constructor(param) {\n        this.status = NetworkStatus.pending;\n        this.command = param.command;\n        this.device = param.device;\n        this.name = param.name;\n        this.dhcp = param.dhcp;\n        this.address = param.address;\n        this.gateway = param.gateway;\n        this.mask = param.mask;\n        this.dns = param.dns;\n        this.ssid = param.ssid;\n        this.password = param.password;\n    }\n    assignId(id) {\n        this.id = id;\n        this.message = '';\n    }\n    statusChange(status) {\n        this.status = status;\n    }\n    checkVariables() {\n        if (this.command === NetworkCommand.getNetwork) {\n            if (this.status === undefined) {\n                this.status = NetworkStatus.pending;\n            }\n        }\n        else if (this.command === NetworkCommand.getEthernet) {\n        }\n        else if (this.command === NetworkCommand.getWifi) {\n        }\n        else if (this.command === NetworkCommand.getBluetooth) {\n        }\n        else if (this.command === NetworkCommand.getDevice) {\n            if (this.device === undefined || this.device === null || this.device === '') {\n                throw new rpc_code_exception_1.RpcCodeException('device   .', constant_1.GrpcCode.InternalError);\n            }\n        }\n        else if (this.command === NetworkCommand.setNetwork) {\n            if (this.device === undefined || this.device === null || this.device === '') {\n                throw new rpc_code_exception_1.RpcCodeException('device   .', constant_1.GrpcCode.InternalError);\n            }\n            if (this.name === undefined || this.name === null || this.name === '') {\n                throw new rpc_code_exception_1.RpcCodeException('name   .', constant_1.GrpcCode.InternalError);\n            }\n            if (this.dhcp === undefined || this.dhcp === null) {\n                throw new rpc_code_exception_1.RpcCodeException('dhcp   .', constant_1.GrpcCode.InternalError);\n            }\n            if (this.dhcp === false) {\n                if (this.address === undefined || this.address === null || this.address === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('address   .', constant_1.GrpcCode.InternalError);\n                }\n                if (this.gateway === undefined || this.gateway === null || this.gateway === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('gateway   .', constant_1.GrpcCode.InternalError);\n                }\n                if (this.mask === undefined || this.mask === null || this.mask === '') {\n                    throw new rpc_code_exception_1.RpcCodeException('mask   .', constant_1.GrpcCode.InternalError);\n                }\n                if (this.dns === undefined || this.dns === null) {\n                    throw new rpc_code_exception_1.RpcCodeException('dns   .', constant_1.GrpcCode.InternalError);\n                }\n            }\n        }\n        else if (this.command === NetworkCommand.connectWifi) {\n            if (this.ssid === undefined || this.ssid === null || this.ssid === '') {\n                throw new rpc_code_exception_1.RpcCodeException('ssid   .', constant_1.GrpcCode.InternalError);\n            }\n            if (this.password === undefined || this.password === null || this.password === '') {\n                throw new rpc_code_exception_1.RpcCodeException('password   .', constant_1.GrpcCode.InternalError);\n            }\n        }\n        else if (this.command === NetworkCommand.wifiScan) {\n        }\n        else if (this.command === NetworkCommand.getWifiList) {\n        }\n        else {\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n}\nexports.NetworkModel = NetworkModel;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkNmcliAdapter = void 0;\nconst wifi = require(\"node-wifi\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst child_process_1 = require(\"child_process\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_1 = require(\"@nestjs/common\");\nlet NetworkNmcliAdapter = class NetworkNmcliAdapter {\n    constructor(saveLogService) {\n        this.saveLogService = saveLogService;\n        this.curEthernet = [];\n        this.curWifi = [];\n        this.curBluetooth = [];\n        this.logger = this.saveLogService.get('host');\n        wifi.init({\n            iface: null,\n        });\n    }\n    async getNetwork() {\n        try {\n            await this.nmcliDeviceShow();\n            const wifi_detail = await this.getCurrentWifi();\n            for (let i = 0; i < wifi_detail.length; i++) {\n                if (this.curWifi.length > 0) {\n                    if (wifi_detail[i].iface === this.curWifi[0].device)\n                        this.curWifi[0].signalLevel = wifi_detail[i].signalLevel;\n                    this.curWifi[0].quality = wifi_detail[i].quality;\n                    this.curWifi[0].security = wifi_detail[i].security;\n                }\n            }\n            return {\n                Ethernet: this.curEthernet,\n                Wifi: this.curWifi[0],\n            };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getNetwork: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getEthernet() {\n        try {\n            if (this.curEthernet.length == 0) {\n                await this.nmcliDeviceShow();\n            }\n            return {\n                Ethernet: this.curEthernet,\n            };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getEthernet: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getWifi() {\n        try {\n            await this.nmcliConnectionShow();\n            const wifi_detail = await this.getCurrentWifi();\n            for (let i = 0; i < wifi_detail.length; i++) {\n                if (this.curWifi.length > 0) {\n                    if (wifi_detail[i].iface === this.curWifi[0].device)\n                        this.curWifi[0].signalLevel = wifi_detail[i].signalLevel;\n                    this.curWifi[0].quality = wifi_detail[i].quality;\n                    this.curWifi[0].security = wifi_detail[i].security;\n                }\n            }\n            return this.curWifi[0];\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getWifi: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getBluetooth() {\n        try {\n            if (this.curBluetooth.length == 0) {\n                await this.nmcliDeviceShow();\n            }\n            return this.curBluetooth[0];\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getBluetooth: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getDevice(model) {\n        try {\n            const data = (0, child_process_1.execSync)('sudo nmcli device show ' + model.device).toString();\n            const json = await this.parseNMCLI(data);\n            if (json.type == 'wifi') {\n                const wifi_detail = await this.getCurrentWifi();\n                for (let i = 0; i < wifi_detail.length; i++) {\n                    if (wifi_detail[i].iface === json.device)\n                        json.signalLevel = wifi_detail[i].signalLevel;\n                    json.quality = wifi_detail[i].quality;\n                    json.security = wifi_detail[i].security;\n                }\n            }\n            return json;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Network] getDevice: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async setNetwork(model) {\n        try {\n            let cmd;\n            if (model.dhcp) {\n                cmd = `sudo nmcli con modify '${model.name}' ipv4.method auto`;\n                this.logger?.info(`[Network] SET Network DHCP : ${model.name}`);\n            }\n            else {\n                let dns_str = '\"';\n                for (let i = 0; i < model.dns.length; i++) {\n                    dns_str += model.dns[i] + ' ';\n                }\n                dns_str += '\"';\n                cmd =\n                    \"sudo nmcli con modify '\" +\n                        model.name +\n                        \"' ipv4.addresses \" +\n                        model.address +\n                        '/' +\n                        model.mask +\n                        ' ipv4.gateway ' +\n                        model.gateway +\n                        ' ipv4.dns ' +\n                        dns_str +\n                        ' ipv4.method manual';\n                this.logger?.info(`[Network] SET Network Manual : ${model.name} -> ${cmd}, ${JSON.stringify(model)}`);\n            }\n            (0, child_process_1.execSync)(cmd);\n            (0, child_process_1.execSync)(`sudo nmcli con up ${model.name}`);\n            return {\n                device: model.device,\n                name: model.name,\n                dhcp: model.dhcp,\n                address: model.address,\n                gateway: model.gateway,\n                mask: model.mask,\n                dns: model.dns,\n            };\n        }\n        catch (error) {\n            this.logger?.error(`[Network] setNetwork: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async connectWifi(model) {\n        try {\n            let cmd_line;\n            if (model.password == undefined || model.password == '') {\n                cmd_line = 'sudo nmcli dev wifi connect \"' + model.ssid + '\"';\n            }\n            else {\n                cmd_line = 'sudo nmcli dev wifi connect \"' + model.ssid + '\" password \"' + model.password + '\"';\n            }\n            this.logger?.info(`[Network] Connect Wifi : ${cmd_line}, ${JSON.stringify(model)}`);\n            try {\n                (0, child_process_1.execSync)('sudo nmcli dev wifi rescan');\n            }\n            catch (error) {\n                this.logger?.warn(`[Network] Connect Wifi: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            }\n            await new Promise((resolve) => setTimeout(resolve, 2000));\n            const data = (0, child_process_1.execSync)(cmd_line);\n            this.logger?.info(`[Network] Connect Wifi Response: ${data}`);\n            if (data.includes('successfully')) {\n                return { ssid: model.ssid };\n            }\n            else if (data.includes('Secrets were required')) {\n                throw new rpc_code_exception_1.RpcCodeException(' .', constant_1.GrpcCode.InvalidArgument);\n            }\n            else {\n                throw new rpc_code_exception_1.RpcCodeException(data.toString(), constant_1.GrpcCode.InternalError);\n            }\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException) {\n                throw error;\n            }\n            const errorStr = parse_util_1.ParseUtil.errorToJson(error);\n            this.logger?.warn(`[Network] Connect Wifi: ${errorStr}`);\n            if (errorStr.includes('Secrets were required')) {\n                throw new rpc_code_exception_1.RpcCodeException(' .', constant_1.GrpcCode.InvalidArgument);\n            }\n            else if (errorStr.includes('No network with SSID')) {\n                throw new rpc_code_exception_1.RpcCodeException('SSID   .', constant_1.GrpcCode.InvalidArgument);\n            }\n            else if (errorStr.includes('property is invalid')) {\n                throw new rpc_code_exception_1.RpcCodeException(' .', constant_1.GrpcCode.InvalidArgument);\n            }\n            throw new rpc_code_exception_1.RpcCodeException(error.message, constant_1.GrpcCode.InternalError);\n        }\n    }\n    async wifiScan() {\n        try {\n            (0, child_process_1.execSync)('sudo nmcli dev wifi rescan');\n            await new Promise((resolve) => setTimeout(resolve, 2000));\n            return this.getWifiList();\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException) {\n                throw error;\n            }\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    getWifiList() {\n        return new Promise((resolve, reject) => {\n            wifi.scan((error, networks) => {\n                if (error) {\n                    this.logger?.error(`[Network] WifiScan: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                    return reject(new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError));\n                }\n                const wifiMap = new Map();\n                for (const net of networks) {\n                    if (!net.ssid)\n                        continue;\n                    const existing = wifiMap.get(net.ssid);\n                    if (!existing || net.quality > existing.quality) {\n                        wifiMap.set(net.ssid, { ...net });\n                    }\n                }\n                resolve({ list: Array.from(wifiMap.values()) });\n            });\n        });\n    }\n    async getCurrentWifi() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                wifi.getCurrentConnections((error, networks) => {\n                    if (error) {\n                        this.logger?.error(`[Network] getCurrentWifi: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                        reject();\n                    }\n                    else {\n                        this.logger?.debug(`[Network] getCurrentWifi: ${JSON.stringify(networks)}`);\n                        resolve(networks);\n                    }\n                });\n            }\n            catch (error) {\n                this.logger?.error(`[Network] getCurrentWifi: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async nmcliDeviceShow() {\n        try {\n            const data = (0, child_process_1.execSync)('sudo nmcli device show').toString();\n            this.curEthernet = [];\n            this.curWifi = [];\n            this.curBluetooth = [];\n            const networks = data.split(/\\n\\s*\\n/);\n            for (const i in networks) {\n                const json = await this.parseNMCLI(networks[i]);\n                if (json.type == 'ethernet') {\n                    this.curEthernet.push({ ...json });\n                }\n                else if (json.type == 'wifi') {\n                    this.curWifi.push({ ...json });\n                }\n                else if (json.type == 'bt') {\n                    this.curBluetooth.push({ ...json });\n                }\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Network] getNetwork: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async nmcliConnectionShow() {\n        try {\n            const result = (0, child_process_1.execSync)('sudo nmcli connection show --active').toString();\n            let ActiveWifi = null;\n            let ActiveEthernet = null;\n            let ActiveBluetooth = null;\n            result.split('\\n').map((line) => {\n                if (!line.startsWith('NAME ') && line != '') {\n                    if (line.includes('wifi')) {\n                        ActiveWifi = line.split('  ')[0];\n                    }\n                    else if (line.includes('ethernet')) {\n                        ActiveEthernet = line.split('  ')[0];\n                    }\n                    else if (line.includes('bt')) {\n                        ActiveBluetooth = line.split('  ')[0];\n                    }\n                }\n            });\n            if (ActiveWifi) {\n                if (this.curWifi.length > 0) {\n                    if (this.curWifi[0].name === ActiveWifi) {\n                        return;\n                    }\n                }\n                this.curWifi = [];\n                this.curWifi.push(await this.getConnectionInfo(ActiveWifi));\n            }\n            if (ActiveEthernet) {\n                this.curEthernet = [];\n                this.curEthernet.push(await this.getConnectionInfo(ActiveEthernet));\n            }\n            if (ActiveBluetooth) {\n                this.curBluetooth = [];\n                this.curBluetooth.push(await this.getConnectionInfo(ActiveBluetooth));\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Network] getNetwork: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getConnectionInfo(name) {\n        const data = (0, child_process_1.execSync)(`sudo nmcli connection show '${name}'`).toString();\n        const info = {\n            name: name,\n            type: '',\n            device: '',\n            mask: '',\n            gateway: '',\n            address: '',\n            state: '',\n            dhcp: false,\n            hwAddr: '',\n            dns: [],\n        };\n        data.split('\\n').map((line) => {\n            if (line.startsWith('IP4.GATEWAY')) {\n                info.gateway = line.split(' ')[line.split(' ').length - 1];\n            }\n            else if (line.startsWith('IP4.ADDRESS')) {\n                const address = line.split(' ')[line.split(' ').length - 1];\n                info.address = address.split('/')[0];\n                info.mask = address.split('/')[1];\n            }\n            else if (line.startsWith('ipv4.method')) {\n                if (line.includes('auto')) {\n                    info.dhcp = true;\n                }\n                else {\n                    info.dhcp = false;\n                }\n            }\n            else if (line.startsWith('IP4.DNS')) {\n                info.dns.push(line.split(' ')[line.split(' ').length - 1]);\n            }\n            else if (line.startsWith('GENERAL.DEVICE')) {\n                info.device = line.split(' ')[line.split(' ').length - 1];\n            }\n            else if (line.startsWith('GENERAL.TYPE')) {\n                info.type = line.split(' ')[line.split(' ').length - 1];\n            }\n            else if (line.startsWith('GENERAL.HWADDR')) {\n                info.hwAddr = line.split(' ')[line.split(' ').length - 1];\n            }\n            else if (line.startsWith('GENERAL.STATE')) {\n                info.state = line.split(' ')[line.split(' ').length - 1];\n            }\n        });\n        return info;\n    }\n    async parseNMCLI(inputString) {\n        try {\n            const network = {\n                address: '',\n                gateway: '',\n                dns: [],\n                mask: '',\n            };\n            inputString.split('\\n').forEach((line) => {\n                const split_str = line.split(':');\n                const keyWithValue = split_str.shift()?.trim();\n                let value;\n                if (split_str.length > 1) {\n                    let string = '';\n                    while (split_str.length > 0) {\n                        const st = split_str.shift()?.trim();\n                        string += st + ':';\n                    }\n                    value = string.slice(0, -1);\n                }\n                else if (split_str.length == 0) {\n                    value = '';\n                }\n                else {\n                    value = split_str.shift()?.trim();\n                }\n                if (keyWithValue == 'GENERAL.DEVICE') {\n                    network.device = value;\n                }\n                else if (keyWithValue == 'GENERAL.TYPE') {\n                    network.type = value;\n                }\n                else if (keyWithValue == 'GENERAL.HWADDR') {\n                    network.hwAddr = value;\n                }\n                else if (keyWithValue == 'GENERAL.STATE') {\n                    network.state = value;\n                }\n                else if (keyWithValue == 'GENERAL.CONNECTION') {\n                    network.name = value;\n                }\n                else if (keyWithValue == 'IP4.ADDRESS[1]') {\n                    network.address = value.split('/')[0];\n                    network.mask = value.split('/')[1];\n                }\n                else if (keyWithValue == 'IP4.GATEWAY') {\n                    network.gateway = value;\n                }\n                else if (keyWithValue?.includes('IP4.DNS')) {\n                    network.dns.push(value);\n                }\n            });\n            return network;\n        }\n        catch (error) {\n            this.logger?.error(`[Network] parseNMCLI: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n};\nexports.NetworkNmcliAdapter = NetworkNmcliAdapter;\nexports.NetworkNmcliAdapter = NetworkNmcliAdapter = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object])\n], NetworkNmcliAdapter);\n","module.exports = require(\"node-wifi\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkMongoAdapter = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst mongoose_2 = require(\"mongoose\");\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst util_1 = require(\"@app/common/util\");\nconst network_command_entity_1 = require(\"../../entity/network.command.entity\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_1 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nlet NetworkMongoAdapter = class NetworkMongoAdapter {\n    constructor(saveLogService, Repository, configService) {\n        this.saveLogService = saveLogService;\n        this.Repository = Repository;\n        this.configService = configService;\n        this.logger = this.saveLogService.get('host');\n        this.setIndex(this.configService);\n    }\n    async setIndex(configService) {\n        try {\n            await this.Repository.collection.dropIndex('createdAt_1');\n        }\n        catch (error) {\n            this.logger?.warn(`[Network] DB dropIndex: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n        }\n        try {\n            if (configService.get('DB_TTL_ENABLE') === 'true') {\n                const TTL_DAYS = Number(configService.get('DB_TTL_DAYS') ?? '100');\n                this.logger?.info(`[Network] setIndex EnabledTTL_DAYS: ${TTL_DAYS}`);\n                this.Repository.collection.createIndex({ createdAt: 1 }, { expireAfterSeconds: TTL_DAYS * 24 * 60 * 60 });\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Network] DB createIndex: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n        }\n    }\n    async getNodebyId(id) {\n        try {\n            return await this.Repository.findById(id).lean();\n        }\n        catch (error) {\n            this.logger?.error(`[Network] DB getNodebyId: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async save(model) {\n        try {\n            const _id = util_1.UrlUtil.generateUUID();\n            return await this.Repository.create({ ...model, _id });\n        }\n        catch (error) {\n            this.logger?.error(`[Network] DB save: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async update(move) {\n        try {\n            return await this.Repository.findByIdAndUpdate(move.id, move).lean();\n        }\n        catch (error) {\n            this.logger?.error(`[Network] DB update: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n        }\n    }\n};\nexports.NetworkMongoAdapter = NetworkMongoAdapter;\nexports.NetworkMongoAdapter = NetworkMongoAdapter = __decorate([\n    (0, common_1.Injectable)(),\n    __param(1, (0, mongoose_1.InjectModel)(network_command_entity_1.NetworkCommand.name)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object, typeof (_b = typeof mongoose_2.Model !== \"undefined\" && mongoose_2.Model) === \"function\" ? _b : Object, typeof (_c = typeof config_1.ConfigService !== \"undefined\" && config_1.ConfigService) === \"function\" ? _c : Object])\n], NetworkMongoAdapter);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkCommandSchema = exports.NetworkCommand = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nlet NetworkCommand = class NetworkCommand {\n};\nexports.NetworkCommand = NetworkCommand;\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], NetworkCommand.prototype, \"command\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], NetworkCommand.prototype, \"status\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)(),\n    __metadata(\"design:type\", String)\n], NetworkCommand.prototype, \"_id\", void 0);\nexports.NetworkCommand = NetworkCommand = __decorate([\n    (0, mongoose_1.Schema)()\n], NetworkCommand);\nexports.NetworkCommandSchema = mongoose_1.SchemaFactory.createForClass(NetworkCommand);\nexports.NetworkCommandSchema.set('timestamps', true);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkMqttController = void 0;\nconst constant_1 = require(\"@app/common/constant\");\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst network_service_1 = require(\"../../application/network.service\");\nlet NetworkMqttController = class NetworkMqttController {\n    constructor(mqttMicroservice, networkService) {\n        this.mqttMicroservice = mqttMicroservice;\n        this.networkService = networkService;\n    }\n    async readyNetwork(data) {\n        this.networkService.ready();\n    }\n};\nexports.NetworkMqttController = NetworkMqttController;\n__decorate([\n    (0, microservices_1.EventPattern)('get:network:ready'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", Promise)\n], NetworkMqttController.prototype, \"readyNetwork\", null);\nexports.NetworkMqttController = NetworkMqttController = __decorate([\n    (0, common_1.Controller)(),\n    __param(0, (0, common_1.Inject)(constant_1.MQTT_BROKER)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _a : Object, typeof (_b = typeof network_service_1.NetworkService !== \"undefined\" && network_service_1.NetworkService) === \"function\" ? _b : Object])\n], NetworkMqttController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst onvif_api_controller_1 = require(\"./adapter/input/onvif.api.controller\");\nconst onvif_device_service_1 = require(\"./application/onvif.device.service\");\nconst onvif_ptz_service_1 = require(\"./application/onvif.ptz.service\");\nconst onvif_media_service_1 = require(\"./application/onvif.media.service\");\nconst onvif_event_service_1 = require(\"./application/onvif.event.service\");\nconst onvif_deviceio_service_1 = require(\"./application/onvif.deviceio.service\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst common_2 = require(\"@app/common\");\nconst path_1 = require(\"path\");\nconst onvif_mqtt_controller_1 = require(\"./adapter/input/onvif.mqtt.controller\");\nconst constant_1 = require(\"@app/common/constant\");\nconst config_1 = require(\"@nestjs/config\");\nconst onvif_pending_service_1 = require(\"./application/onvif.pending.service\");\nconst log_module_1 = require(\"@app/common/log/log.module\");\nlet OnvifModule = class OnvifModule {\n};\nexports.OnvifModule = OnvifModule;\nexports.OnvifModule = OnvifModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            log_module_1.LogModule,\n            config_1.ConfigModule.forRoot({\n                isGlobal: true,\n                envFilePath: '.env',\n            }),\n            microservices_1.ClientsModule.registerAsync({\n                clients: [\n                    {\n                        name: constant_1.NETWORK_SERVICE,\n                        inject: [config_1.ConfigService],\n                        useFactory: (configService) => ({\n                            transport: microservices_1.Transport.GRPC,\n                            options: {\n                                package: common_2.NetworkMicroservice.protobufPackage,\n                                protoPath: (0, path_1.join)(process.cwd(), 'proto/network.proto'),\n                                url: configService.get('NETWORK_GRPC_URL'),\n                            },\n                        }),\n                    },\n                    {\n                        name: constant_1.CONFIG_SERVICE,\n                        inject: [config_1.ConfigService],\n                        useFactory: (configService) => ({\n                            transport: microservices_1.Transport.GRPC,\n                            options: {\n                                package: common_2.ConfigMicroservice.protobufPackage,\n                                protoPath: (0, path_1.join)(process.cwd(), 'proto/config.proto'),\n                                url: configService.get('CONFIG_GRPC_URL'),\n                            },\n                        }),\n                    },\n                ],\n            }),\n            microservices_1.ClientsModule.registerAsync({\n                clients: [\n                    {\n                        inject: [config_1.ConfigService],\n                        name: constant_1.MQTT_BROKER,\n                        useFactory: (configService) => ({\n                            transport: microservices_1.Transport.MQTT,\n                            options: {\n                                url: configService.get('MQTT_URL'),\n                            },\n                        }),\n                    },\n                ],\n            }),\n        ],\n        controllers: [onvif_api_controller_1.OnvifApiController, onvif_mqtt_controller_1.OnvifMqttController],\n        providers: [onvif_device_service_1.OnvifDeviceService, onvif_pending_service_1.OnvifPendingService, onvif_ptz_service_1.OnvifPtzService, onvif_media_service_1.OnvifMediaService, onvif_event_service_1.OnvifEventService, onvif_deviceio_service_1.OnvifDeviceIOService],\n    })\n], OnvifModule);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifApiController = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst xml2js = require(\"xml2js\");\nconst express_1 = require(\"express\");\nconst onvif_media_service_1 = require(\"../../application/onvif.media.service\");\nconst onvif_device_service_1 = require(\"../../application/onvif.device.service\");\nconst fs_1 = require(\"fs\");\nconst onvif_ptz_service_1 = require(\"../../application/onvif.ptz.service\");\nconst onvif_deviceio_service_1 = require(\"../../application/onvif.deviceio.service\");\nconst onvif_event_service_1 = require(\"../../application/onvif.event.service\");\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet OnvifApiController = class OnvifApiController {\n    constructor(mediaService, deviceService, ptzService, deviceIOService, eventService, saveLogService) {\n        this.mediaService = mediaService;\n        this.deviceService = deviceService;\n        this.ptzService = ptzService;\n        this.deviceIOService = deviceIOService;\n        this.eventService = eventService;\n        this.saveLogService = saveLogService;\n        this.isPlatformLinux = false;\n        this.logger = this.saveLogService.get('onvif');\n        if (process.env.HOST_OS === 'Linux') {\n            this.isPlatformLinux = true;\n        }\n    }\n    async testHello() {\n        return this.deviceService.hello();\n    }\n    async DeviceService(body, req, res) {\n        console.log('?');\n        const parser = new xml2js.Parser({\n            explicitArray: false,\n            tagNameProcessors: [xml2js.processors.stripPrefix],\n        });\n        parser.parseString(body, async (err, result) => {\n            if (err) {\n                this.logger?.error(`[Onvif] Request Device Service : Parsing Error -> ${JSON.stringify(body)}, ${parse_util_1.ParseUtil.errorToJson(err)}`);\n                res.status(common_1.HttpStatus.BAD_REQUEST).send('');\n                return;\n            }\n            const methodName = Object.keys(result['Envelope']['Body']).find((key) => key !== '$');\n            this.logger?.info(`[Onvif] Request Device Service : ${methodName}, ${JSON.stringify(result)}`);\n            let responseXml;\n            if (methodName == 'GetSystemDateAndTime') {\n                responseXml = await this.deviceService.responseSystemDateAndTime();\n            }\n            else if (methodName == 'GetCapabilities') {\n                responseXml = await this.deviceService.responseCapabilities(req.socket.remoteAddress);\n            }\n            else if (methodName == 'SetSystemDateAndTime') {\n                responseXml = await this.deviceService.setSystemDateAndTime();\n            }\n            else if (methodName == 'GetServiceCapabilities') {\n                responseXml = await this.deviceService.responseCapabilities(req.socket.remoteAddress);\n            }\n            else if (methodName == 'GetServices') {\n                responseXml = await this.deviceService.responseServices(req.socket.remoteAddress);\n            }\n            else if (methodName == 'GetDeviceInformation') {\n                responseXml = await this.deviceService.responseDeviceInformation();\n            }\n            else if (methodName == 'GetScopes') {\n                responseXml = await this.deviceService.responseScopes();\n            }\n            else if (methodName == 'GetNetworkInterfaces') {\n                responseXml = await this.deviceService.responseNetworkInterfaces(req.socket.remoteAddress);\n            }\n            else if (methodName == 'GetDNS') {\n                responseXml = await this.deviceService.responseDNS(req.socket.remoteAddress);\n            }\n            else if (methodName == 'GetHostname') {\n                responseXml = await this.deviceService.responseHostname();\n            }\n            else if (methodName == 'GetNetworkProtocols') {\n                responseXml = await this.deviceService.responseNetworkProtocols();\n            }\n            else if (methodName == 'GetDiscoveryMode') {\n                responseXml = await this.deviceService.responseDiscoveryMode();\n            }\n            else if (methodName == 'GetNetworkDefaultGateway') {\n                responseXml = await this.deviceService.responseDefaultGateway(req.socket.remoteAddress);\n            }\n            else if (methodName == 'GetNTP') {\n                responseXml = await this.deviceService.responseNTP();\n            }\n            if (responseXml) {\n                res.set('Content-Type', 'application/soap+xml');\n                res.send(responseXml);\n            }\n            else {\n                this.logger?.error(`[Onvif] methodName not matching ${methodName}`);\n                res.status(common_1.HttpStatus.BAD_REQUEST).send('??');\n            }\n        });\n    }\n    async MediaService(body, req, res) {\n        console.error('media_service : ', JSON.stringify(body));\n        const parser = new xml2js.Parser({\n            explicitArray: false,\n            tagNameProcessors: [xml2js.processors.stripPrefix],\n        });\n        parser.parseString(body, async (err, result) => {\n            if (err) {\n                this.logger?.error(`[Onvif] Request Media Service : Parsing Error -> ${JSON.stringify(body)}, ${parse_util_1.ParseUtil.errorToJson(err)}`);\n                res.status(common_1.HttpStatus.BAD_REQUEST).send('??');\n                return;\n            }\n            const methodName = Object.keys(result['Envelope']['Body']).find((key) => key !== '$');\n            this.logger?.info(`[Onvif] Request Media Service : ${methodName}, ${JSON.stringify(result)}`);\n            let responseXml;\n            if (methodName == 'GetProfiles') {\n                responseXml = await this.mediaService.responseMediaProfiles();\n            }\n            else if (methodName == 'GetStreamUri') {\n                responseXml = await this.mediaService.responseStreamUri(req.socket.remoteAddress);\n            }\n            else if (methodName == 'GetVideoSources') {\n                responseXml = await this.mediaService.responseVideoSources();\n            }\n            else if (methodName == 'GetAudioSources') {\n                responseXml = await this.mediaService.responseAudioSources();\n            }\n            else if (methodName == 'GetSnapshotUri') {\n                responseXml = await this.mediaService.responseSnapshotUri(req.socket.remoteAddress);\n            }\n            else if (methodName == 'GetProfile') {\n                responseXml = await this.mediaService.responseMediaProfile();\n            }\n            else if (methodName == 'GetNodes') {\n                console.log('error?!');\n            }\n            else if (methodName == 'GetVideoSourceConfiguration') {\n                responseXml = await this.mediaService.responseVideoSourceConfiguration();\n            }\n            if (responseXml) {\n                res.set('Content-Type', 'application/soap+xml');\n                res.send(responseXml);\n            }\n            else {\n                this.logger?.error(`[Onvif] methodName not matching ${methodName}`);\n                res.status(common_1.HttpStatus.BAD_REQUEST).send('????');\n            }\n        });\n    }\n    async getSnapshot(res) {\n        try {\n            this.logger?.info(`[Onvif] getSnapshot`);\n            const data = (0, fs_1.readFileSync)('/root/snapshot.jpg');\n            this.logger?.info(`[Onvif] getSnapshot : Done`);\n            res.setHeader('Content-Type', 'image/jpeg');\n            res.send(data);\n        }\n        catch (error) {\n            this.logger?.error(`[Onvif] getSnapshot : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            res.status(500).send('Error reading snapshot');\n            return;\n        }\n    }\n    async PTZService(body, req, res) {\n        console.error('ptz_service : ', JSON.stringify(body));\n        const parser = new xml2js.Parser({\n            explicitArray: false,\n            tagNameProcessors: [xml2js.processors.stripPrefix],\n        });\n        parser.parseString(body, async (err, result) => {\n            if (err) {\n                this.logger?.error(`[Onvif] Request Media Service : Parsing Error -> ${JSON.stringify(body)}, ${parse_util_1.ParseUtil.errorToJson(err)}`);\n                res.status(common_1.HttpStatus.BAD_REQUEST).send('');\n                return;\n            }\n            const methodName = Object.keys(result['Envelope']['Body']).find((key) => key !== '$');\n            this.logger?.info(`[Onvif] Request PTZ Service : ${methodName}, ${JSON.stringify(result)}`);\n            let responseXml;\n            if (methodName == 'ContinuousMove') {\n                const token = result['Envelope']['Body']['ContinuousMove']['ProfileToken'];\n                if (result['Envelope']['Body']['ContinuousMove']['Velocity']['PanTilt']) {\n                    const x = result['Envelope']['Body']['ContinuousMove']['Velocity']['PanTilt']['$'].x;\n                    const y = result['Envelope']['Body']['ContinuousMove']['Velocity']['PanTilt']['$'].y;\n                    this.logger?.info(`[Onvif] PTZ Move PanTilt : ${token}, Velocity(${x}, ${y})`);\n                }\n                else if (result['Envelope']['Body']['ContinuousMove']['Velocity']['Zoom']) {\n                    const velocity = result['Envelope']['Body']['ContinuousMove']['Velocity']['Zoom']['$'].x;\n                    this.logger?.info(`[Onvif] PTZ Move Zoom : ${token}, Velocity(${velocity})`);\n                }\n                responseXml = await this.ptzService.responsePtzMove('<ptz:ContinuousMoveResponse/>');\n            }\n            else if (methodName == 'RelativeMove') {\n                const token = result['Envelope']['Body']['RelativeMove']['ProfileToken'];\n                const pantilt = result['Envelope']['Body']['RelativeMove']['Translation']['PanTilt']?.['$'];\n                const zoom = result['Envelope']['Body']['RelativeMove']['Translation']['Zoom']?.['$'];\n                const pantilt_vel = result['Envelope']['Body']['RelativeMove']['Speed']?.['PanTilt']?.['$'];\n                const zoom_vel = result['Envelope']['Body']['RelativeMove']['Speed']?.['Zoom']?.['$'];\n                this.logger?.info(`[Onvif] PTZ Move RelativeMove : ${token}, PanTilt(${pantilt?.x},${pantilt?.y}), Zoom(${zoom?.x}), PanTiltSpeed(${pantilt_vel?.x},${pantilt_vel?.y}), ZoomSpeed(${zoom_vel?.x})`);\n                responseXml = await this.ptzService.responsePtzMove('<ptz:RelativeMoveResponse/>');\n            }\n            else if (methodName == 'AbsoluteMove') {\n                const token = result['Envelope']['Body']['AbsoluteMove']['ProfileToken'];\n                const pantilt = result['Envelope']['Body']['AbsoluteMove']['Position']['PanTilt']['$'];\n                const zoom = result['Envelope']['Body']['AbsoluteMove']['Position']['Zoom']['$'];\n                const pantilt_vel = result['Envelope']['Body']['AbsoluteMove']['Speed']?.['PanTilt']?.['$'];\n                const zoom_vel = result['Envelope']['Body']['AbsoluteMove']['Speed']?.['Zoom']?.['$'];\n                this.logger?.info(`[Onvif] PTZ Move AbsoluteMove : ${token}, PanTilt(${pantilt.x},${pantilt.y}), Zoom(${zoom.x}), PanTiltSpeed(${pantilt_vel?.x},${pantilt_vel?.y}), ZoomSpeed(${zoom_vel?.x})`);\n                responseXml = await this.ptzService.responsePtzMove('<ptz:AbsoluteMoveResponse/>');\n            }\n            else if (methodName == 'Stop') {\n                const token = result['Envelope']['Body']['Stop']['ProfileToken'];\n                const pantilt = result['Envelope']['Body']['Stop']['PanTilt'];\n                const zoom = result['Envelope']['Body']['Stop']['Zoom'];\n                this.logger?.info(`[Onvif] PTZ Move Stop : ${token}, PanTilt(${pantilt}), Zoom(${zoom})`);\n                responseXml = await this.ptzService.responsePtzMove('<ptz:StopResponse/>');\n            }\n            else if (methodName == 'GotoHomePosition') {\n                const token = result['Envelope']['Body']['GotoHomePosition']['ProfileToken'];\n                this.logger?.info(`[Onvif] PTZ Move GotoHomePosition : ${token}`);\n            }\n            else if (methodName == 'SetHomePosition') {\n                const token = result['Envelope']['Body']['SetHomePosition']['ProfileToken'];\n                this.logger?.info(`[Onvif] PTZ Move SetHomePosition : ${token}`);\n            }\n            else if (methodName == 'SetPreset') {\n                const token = result['Envelope']['Body']['SetPreset']['ProfileToken'];\n                const name = result['Envelope']['Body']['SetPreset']['PresetName'];\n                this.logger?.info(`[Onvif] PTZ Move SetPreset : ${token}, ${name}`);\n            }\n            if (responseXml) {\n                res.set('Content-Type', 'application/soap+xml');\n                res.send(responseXml);\n            }\n            else {\n                this.logger?.error(`[Onvif] methodName not matching ${methodName}`);\n                res.status(common_1.HttpStatus.BAD_REQUEST).send('');\n            }\n        });\n    }\n};\nexports.OnvifApiController = OnvifApiController;\n__decorate([\n    (0, common_1.Post)('hello'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], OnvifApiController.prototype, \"testHello\", null);\n__decorate([\n    (0, common_1.Post)('device_service'),\n    (0, common_1.UsePipes)(new common_1.ValidationPipe({ transform: false, forbidNonWhitelisted: false })),\n    __param(0, (0, common_1.RawBody)()),\n    __param(1, (0, common_1.Req)()),\n    __param(2, (0, common_1.Res)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, typeof (_g = typeof express_1.Request !== \"undefined\" && express_1.Request) === \"function\" ? _g : Object, typeof (_h = typeof express_1.Response !== \"undefined\" && express_1.Response) === \"function\" ? _h : Object]),\n    __metadata(\"design:returntype\", Promise)\n], OnvifApiController.prototype, \"DeviceService\", null);\n__decorate([\n    (0, common_1.Post)('media_service'),\n    (0, common_1.UsePipes)(new common_1.ValidationPipe({ transform: false, forbidNonWhitelisted: false })),\n    __param(0, (0, common_1.RawBody)()),\n    __param(1, (0, common_1.Req)()),\n    __param(2, (0, common_1.Res)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, typeof (_j = typeof express_1.Request !== \"undefined\" && express_1.Request) === \"function\" ? _j : Object, typeof (_k = typeof express_1.Response !== \"undefined\" && express_1.Response) === \"function\" ? _k : Object]),\n    __metadata(\"design:returntype\", Promise)\n], OnvifApiController.prototype, \"MediaService\", null);\n__decorate([\n    (0, common_1.Get)('snapshot.jpg'),\n    __param(0, (0, common_1.Res)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_l = typeof express_1.Response !== \"undefined\" && express_1.Response) === \"function\" ? _l : Object]),\n    __metadata(\"design:returntype\", Promise)\n], OnvifApiController.prototype, \"getSnapshot\", null);\n__decorate([\n    (0, common_1.Post)('ptz_service'),\n    (0, common_1.UsePipes)(new common_1.ValidationPipe({ transform: false, forbidNonWhitelisted: false })),\n    __param(0, (0, common_1.RawBody)()),\n    __param(1, (0, common_1.Req)()),\n    __param(2, (0, common_1.Res)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, typeof (_m = typeof express_1.Request !== \"undefined\" && express_1.Request) === \"function\" ? _m : Object, typeof (_o = typeof express_1.Response !== \"undefined\" && express_1.Response) === \"function\" ? _o : Object]),\n    __metadata(\"design:returntype\", Promise)\n], OnvifApiController.prototype, \"PTZService\", null);\nexports.OnvifApiController = OnvifApiController = __decorate([\n    (0, common_1.Controller)('onvif'),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof onvif_media_service_1.OnvifMediaService !== \"undefined\" && onvif_media_service_1.OnvifMediaService) === \"function\" ? _a : Object, typeof (_b = typeof onvif_device_service_1.OnvifDeviceService !== \"undefined\" && onvif_device_service_1.OnvifDeviceService) === \"function\" ? _b : Object, typeof (_c = typeof onvif_ptz_service_1.OnvifPtzService !== \"undefined\" && onvif_ptz_service_1.OnvifPtzService) === \"function\" ? _c : Object, typeof (_d = typeof onvif_deviceio_service_1.OnvifDeviceIOService !== \"undefined\" && onvif_deviceio_service_1.OnvifDeviceIOService) === \"function\" ? _d : Object, typeof (_e = typeof onvif_event_service_1.OnvifEventService !== \"undefined\" && onvif_event_service_1.OnvifEventService) === \"function\" ? _e : Object, typeof (_f = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _f : Object])\n], OnvifApiController);\n","module.exports = require(\"xml2js\");","module.exports = require(\"express\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifMediaService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst rxjs_1 = require(\"rxjs\");\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst constant_1 = require(\"@app/common/constant\");\nconst template_1 = require(\"@app/common/wsdl/media/template\");\nconst wsdl_util_1 = require(\"@app/common/util/wsdl.util\");\nconst os_1 = require(\"os\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet OnvifMediaService = class OnvifMediaService {\n    constructor(configMicroservice, saveLogService) {\n        this.configMicroservice = configMicroservice;\n        this.saveLogService = saveLogService;\n        this.ONVIF_PORT = 3005;\n        this.CONFIG = {\n            Name: '',\n            Width: '0',\n            Height: '0',\n        };\n        this.logger = this.saveLogService.get('onvif');\n    }\n    async onModuleInit() {\n        try {\n            this.configService = this.configMicroservice.getService('ConfigGrpcService');\n            this.CONFIG.Name = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'media_name' }))).value ?? '';\n            this.CONFIG.Width = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'media_width' }))).value ?? '';\n            this.CONFIG.Height = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'media_height' }))).value ?? '';\n            this.logger?.info(`[Media] get Config : ${JSON.stringify(this.CONFIG)}`);\n        }\n        catch (error) {\n            this.logger?.error(`[Media] onModuleInit : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n        }\n    }\n    async responseMediaProfiles() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.MediaWSDLTemplate[template_1.MediaWSDL.Profiles];\n                query = query.replace(/__NAME__/g, this.CONFIG.Name);\n                query = query.replace(/__WIDTH__/g, this.CONFIG.Width);\n                query = query.replace(/__HEIGHT__/g, this.CONFIG.Height);\n                console.log(query);\n                this.logger?.debug(`[Media] GetProfilesResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Media] GetProfilesResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseMediaProfile() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.MediaWSDLTemplate[template_1.MediaWSDL.Profile];\n                query = query.replace(/__NAME__/g, this.CONFIG.Name);\n                query = query.replace(/__WIDTH__/g, this.CONFIG.Width);\n                query = query.replace(/__HEIGHT__/g, this.CONFIG.Height);\n                this.logger?.debug(`[Media] GetProfileResponse`);\n                console.log(query);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Media] GetProfileResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseVideoSourceConfiguration() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.MediaWSDLTemplate[template_1.MediaWSDL.VideoSourceConfiguration];\n                query = query.replace(/__NAME__/g, this.CONFIG.Name);\n                query = query.replace(/__WIDTH__/g, this.CONFIG.Width);\n                query = query.replace(/__HEIGHT__/g, this.CONFIG.Height);\n                this.logger?.debug(`[Media] GetVideoSourceConfigurationResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Media] GetVideoSourceConfigurationResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseVideoSources() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.MediaWSDLTemplate[template_1.MediaWSDL.VideoSources];\n                query = query.replace(/__NAME__/g, this.CONFIG.Name);\n                query = query.replace(/__WIDTH__/g, this.CONFIG.Width);\n                query = query.replace(/__HEIGHT__/g, this.CONFIG.Height);\n                this.logger?.debug(`[Media] GetVideoSourcesResponse`);\n                console.log(query);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Media] GetVideoSourcesResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseAudioSources() {\n        throw new Error(' .');\n    }\n    async responseSnapshotUri(_ip) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.MediaWSDLTemplate[template_1.MediaWSDL.SnapShotURI];\n                query = query.replace('__SNAPSHOT_URI__', wsdl_util_1.WsdlUtil.getXaddrs('snapshot.jpg', (0, os_1.networkInterfaces)()));\n                console.log(query);\n                this.logger?.debug(`[Media] GetSnapshotUriResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Media] GetSnapshotUriResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseStreamUri(_ip) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.MediaWSDLTemplate[template_1.MediaWSDL.StreamURI];\n                const ip = wsdl_util_1.WsdlUtil.getLocalIp(_ip, (0, os_1.networkInterfaces)());\n                query = query.replace('__RTSP_URI__', wsdl_util_1.WsdlUtil.getStream(ip, this.CONFIG.Name));\n                this.logger?.debug(`[Media] GetStreamUriResponse`);\n                console.log(query);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Media] GetStreamUriResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n};\nexports.OnvifMediaService = OnvifMediaService;\nexports.OnvifMediaService = OnvifMediaService = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, common_1.Inject)(constant_1.CONFIG_SERVICE)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientGrpc !== \"undefined\" && microservices_1.ClientGrpc) === \"function\" ? _a : Object, typeof (_b = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _b : Object])\n], OnvifMediaService);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MediaWSDLTemplate = exports.MediaWSDL = void 0;\nvar MediaWSDL;\n(function (MediaWSDL) {\n    MediaWSDL[\"Profile\"] = \"profile\";\n    MediaWSDL[\"Profiles\"] = \"profiles\";\n    MediaWSDL[\"SnapShotURI\"] = \"snapshoturi\";\n    MediaWSDL[\"StreamURI\"] = \"streamuri\";\n    MediaWSDL[\"VideoSourceConfiguration\"] = \"videosourceconfiguration\";\n    MediaWSDL[\"VideoSources\"] = \"videosources\";\n})(MediaWSDL || (exports.MediaWSDL = MediaWSDL = {}));\nexports.MediaWSDLTemplate = {\n    profile: `<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"\n               xmlns:trt=\"http://www.onvif.org/ver10/media/wsdl\"\n               xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n                >\n    <soap:Body>\n        <trt:GetProfileResponse>\n            <trt:Profile token=\"__NAME__\">\n                <tt:Name>__NAME__</tt:Name>\n                <tt:VideoSourceConfiguration xsi:type=\"tt:VideoSourceConfiguration\" token=\"vscfg0\">\n                    <tt:Name>vscfg0</tt:Name>\n                    <tt:UseCount>1</tt:UseCount>\n                    <tt:SourceToken>vidsrc0</tt:SourceToken>\n                    <tt:Bounds height=\"__HEIGHT__\" width=\"__WIDTH__\" y=\"0\" x=\"0\"></tt:Bounds>\n                </tt:VideoSourceConfiguration>\n                <tt:VideoEncoderConfiguration xsi:type=\"tt:VideoEncoderConfiguration\" token=\"__NAME__\">\n                    <tt:Name>Main stream encoder</tt:Name>\n                    <tt:UseCount>1</tt:UseCount>\n                    <tt:Encoding>H264</tt:Encoding>\n                    <tt:Resolution>\n                        <tt:Width>__WIDTH__</tt:Width>\n                        <tt:Height>__HEIGHT__</tt:Height>\n                    </tt:Resolution>\n                    <tt:Quality>8</tt:Quality>\n                    <tt:RateControl>\n                        <tt:FrameRateLimit>5</tt:FrameRateLimit>\n                        <tt:EncodingInterval>1</tt:EncodingInterval>\n                        <tt:BitrateLimit>1000</tt:BitrateLimit>\n                    </tt:RateControl>\n                    <tt:H264>\n                        <tt:GovLength>30</tt:GovLength>\n                        <tt:H264Profile>High</tt:H264Profile>\n                    </tt:H264>\n                    <tt:SessionTimeout>PT60S</tt:SessionTimeout>\n                </tt:VideoEncoderConfiguration>\n                <tt:PTZConfiguration token=\"ptzcfg0\">\n                    <tt:Name>PTZ Config</tt:Name>\n                    <tt:UseCount>1</tt:UseCount>\n                    <tt:NodeToken>ptznode0</tt:NodeToken>\n                    <tt:DefaultAbsolutePantTiltPositionSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/PositionGenericSpace</tt:DefaultAbsolutePantTiltPositionSpace>\n                    <tt:DefaultAbsoluteZoomPositionSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/PositionGenericSpace</tt:DefaultAbsoluteZoomPositionSpace>\n                    <tt:DefaultRelativePanTiltTranslationSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/TranslationGenericSpace</tt:DefaultRelativePanTiltTranslationSpace>\n                    <tt:DefaultRelativeZoomTranslationSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/TranslationGenericSpace</tt:DefaultRelativeZoomTranslationSpace>\n                    <tt:DefaultContinuousPanTiltVelocitySpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/VelocityGenericSpace</tt:DefaultContinuousPanTiltVelocitySpace>\n                    <tt:DefaultContinuousZoomVelocitySpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/VelocityGenericSpace</tt:DefaultContinuousZoomVelocitySpace>\n                    <tt:DefaultPTZSpeed>\n                        <tt:PanTilt space=\"http://www.onvif.org/ver10/tptz/PanTiltSpaces/GenericSpeedSpace\" y=\"1\" x=\"1\"></tt:PanTilt>\n                        <tt:Zoom space=\"http://www.onvif.org/ver10/tptz/ZoomSpaces/ZoomGenericSpeedSpace\" x=\"1\"></tt:Zoom>\n                    </tt:DefaultPTZSpeed>\n                    <tt:DefaultPTZTimeout>PT60S</tt:DefaultPTZTimeout>\n                </tt:PTZConfiguration>\n            </trt:Profile>\n        </trt:GetProfileResponse>\n    </soap:Body>\n</soap:Envelope> `,\n    profiles: `<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"\n               xmlns:trt=\"http://www.onvif.org/ver10/media/wsdl\"\n               xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n                >\n    <soap:Body>\n        <trt:GetProfilesResponse>\n            <trt:Profiles token=\"__NAME__\">\n                <tt:Name>__NAME__</tt:Name>\n                <tt:VideoSourceConfiguration xsi:type=\"tt:VideoSourceConfiguration\" token=\"vscfg0\">\n                    <tt:Name>vscfg0</tt:Name>\n                    <tt:UseCount>1</tt:UseCount>\n                    <tt:SourceToken>vidsrc0</tt:SourceToken>\n                    <tt:Bounds height=\"__HEIGHT__\" width=\"__WIDTH__\" y=\"0\" x=\"0\"></tt:Bounds>\n                </tt:VideoSourceConfiguration>\n                <tt:VideoEncoderConfiguration xsi:type=\"tt:VideoEncoderConfiguration\" token=\"cam0\">\n                    <tt:Name>Main stream encoder</tt:Name>\n                    <tt:UseCount>1</tt:UseCount>\n                    <tt:Encoding>H264</tt:Encoding>\n                    <tt:Resolution>\n                        <tt:Width>__WIDTH__</tt:Width>\n                        <tt:Height>__HEIGHT__</tt:Height>\n                    </tt:Resolution>\n                    <tt:Quality>8</tt:Quality>\n                    <tt:RateControl>\n                        <tt:FrameRateLimit>5</tt:FrameRateLimit>\n                        <tt:EncodingInterval>1</tt:EncodingInterval>\n                        <tt:BitrateLimit>1000</tt:BitrateLimit>\n                    </tt:RateControl>\n                    <tt:H264>\n                        <tt:GovLength>30</tt:GovLength>\n                        <tt:H264Profile>High</tt:H264Profile>\n                    </tt:H264>\n                    <tt:SessionTimeout>PT60S</tt:SessionTimeout>\n                </tt:VideoEncoderConfiguration>\n                <tt:PTZConfiguration token=\"ptzcfg0\">\n                    <tt:Name>PTZ Config</tt:Name>\n                    <tt:UseCount>1</tt:UseCount>\n                    <tt:NodeToken>ptznode0</tt:NodeToken>\n                    <tt:DefaultAbsolutePantTiltPositionSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/PositionGenericSpace</tt:DefaultAbsolutePantTiltPositionSpace>\n                    <tt:DefaultAbsoluteZoomPositionSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/PositionGenericSpace</tt:DefaultAbsoluteZoomPositionSpace>\n                    <tt:DefaultRelativePanTiltTranslationSpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/TranslationGenericSpace</tt:DefaultRelativePanTiltTranslationSpace>\n                    <tt:DefaultRelativeZoomTranslationSpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/TranslationGenericSpace</tt:DefaultRelativeZoomTranslationSpace>\n                    <tt:DefaultContinuousPanTiltVelocitySpace>http://www.onvif.org/ver10/tptz/PanTiltSpaces/VelocityGenericSpace</tt:DefaultContinuousPanTiltVelocitySpace>\n                    <tt:DefaultContinuousZoomVelocitySpace>http://www.onvif.org/ver10/tptz/ZoomSpaces/VelocityGenericSpace</tt:DefaultContinuousZoomVelocitySpace>\n                    <tt:DefaultPTZSpeed>\n                        <tt:PanTilt space=\"http://www.onvif.org/ver10/tptz/PanTiltSpaces/GenericSpeedSpace\" y=\"1\" x=\"1\"></tt:PanTilt>\n                        <tt:Zoom space=\"http://www.onvif.org/ver10/tptz/ZoomSpaces/ZoomGenericSpeedSpace\" x=\"1\"></tt:Zoom>\n                    </tt:DefaultPTZSpeed>\n                    <tt:DefaultPTZTimeout>PT60S</tt:DefaultPTZTimeout>\n                </tt:PTZConfiguration>\n            </trt:Profiles>\n        </trt:GetProfilesResponse>\n    </soap:Body>\n</soap:Envelope> `,\n    snapshoturi: `<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\"\n               xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n                   xmlns:tds=\"http://www.onvif.org/ver10/media/wsdl\">\n  <SOAP-ENV:Header/>\n  <SOAP-ENV:Body>\n    <tds:GetSnapshotUriResponse>\n      <tds:MediaUri>\n        <tt:Uri>\n          __SNAPSHOT_URI__\n        </tt:Uri>\n        <tt:Timeout>PT60S</tt:Timeout>\n      </tds:MediaUri>\n    </tds:GetSnapshotUriResponse>\n  </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>\n`,\n    streamuri: `<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"\n               xmlns:trt=\"http://www.onvif.org/ver10/media/wsdl\"\n               xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n               >\n    <soap:Body>\n        <trt:GetStreamUriResponse>\n            <trt:MediaUri>\n                <tt:Uri>\n                    __RTSP_URI__\n                </tt:Uri>\n                <tt:InvalidAfterConnect>false</tt:InvalidAfterConnect>\n                <tt:InvalidAfterReboot>false</tt:InvalidAfterReboot>\n                <tt:Timeout>PT60S</tt:Timeout>\n            </trt:MediaUri>\n        </trt:GetStreamUriResponse>\n    </soap:Body>\n</soap:Envelope>\n`,\n    videosourceconfiguration: `<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\"\n                   xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"\n                   xmlns:trt=\"http://www.onvif.org/ver10/media/wsdl\">\n  <SOAP-ENV:Header/>\n  <SOAP-ENV:Body>\n  <GetVideoSourceConfigurationResponse>\n  <Configuration token=\"vscfg0\">\n    <Name>Camera1</Name>\n    <UseCount>1</UseCount>\n    <SourceToken>__NAME__</SourceToken>\n    <Bounds x=\"0\" y=\"0\" width=\"__WIDTH__\" height=\"__HEIGHT__\"/>\n  </Configuration>\n</GetVideoSourceConfigurationResponse>\n  </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>\n`,\n    videosources: `<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">\n    <soap:Body>\n        <GetVideoSourcesResponse xmlns=\"http://www.onvif.org/ver10/media/wsdl\">\n            <VideoSources token=\"vidsrc0\">\n                <Resolution>\n                    <Width>__WIDTH__</Width>\n                    <Height>__HEIGHT__</Height>\n                </Resolution>\n                <FrameRate>30</FrameRate>\n                <Imaging>\n                    <BacklightCompensation>\n                        <Mode>ON</Mode>\n                        <Level>2.5</Level>\n                    </BacklightCompensation>\n                    <Brightness>50</Brightness>\n                    <Contrast>75</Contrast>\n                    <Exposure>\n                        <Mode>AUTO</Mode>\n                        <MinExposureTime>1</MinExposureTime>\n                        <MaxExposureTime>33</MaxExposureTime>\n                    </Exposure>\n                </Imaging>\n            </VideoSources>\n        </GetVideoSourcesResponse>\n    </soap:Body>\n</soap:Envelope>\n`,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WsdlUtil = void 0;\nclass WsdlUtil {\n    static generateInstanceId() {\n        return Math.floor(10000000 + Math.random() * 90000000).toString();\n    }\n    static getScopeQuery(scope) {\n        return `<tds:Scopes>\n                    <tt:ScopeItem>${scope}</tt:ScopeItem>\n                </tds:Scopes>`;\n    }\n    static getXaddrs(url, interfaces) {\n        let xaddrs = '';\n        WsdlUtil.getLocalIps(interfaces).map((ip) => {\n            xaddrs += WsdlUtil.getXaddr(ip, url) + ' ';\n        });\n        return xaddrs;\n    }\n    static getXaddr(ip, url) {\n        if (ip.includes('::ffff:')) {\n            ip = ip.split('::ffff:')[1];\n        }\n        return 'http://' + ip + `:3002/onvif/` + url;\n    }\n    static getStream(ip, url) {\n        if (ip.includes('::ffff:')) {\n            ip = ip.split('::ffff:')[1];\n        }\n        return 'rtsp://' + ip + ':8554/' + url;\n    }\n    static getLocalIp(clientIp, interfaces) {\n        if (clientIp.includes('::ffff:')) {\n            clientIp = clientIp.split('::ffff:')[1];\n        }\n        for (const iface of Object.values(interfaces)) {\n            for (const config of iface || []) {\n                if (config.family === 'IPv4' && !config.internal) {\n                    if (clientIp.startsWith(config.address.substring(0, config.address.lastIndexOf('.')))) {\n                        return config.address;\n                    }\n                }\n            }\n        }\n        return '127.0.0.1';\n    }\n    static getLocalIps(interfaces) {\n        const ips = [];\n        for (const name of Object.keys(interfaces)) {\n            for (const net of interfaces[name]) {\n                if (net.family === 'IPv4' && !net.internal) {\n                    if (name.includes('docker') || name.startsWith('br-') || net.address.startsWith('172.17.') || net.address.startsWith('172.18.')) {\n                    }\n                    else {\n                        ips.push(net.address);\n                    }\n                }\n            }\n        }\n        return ips;\n    }\n}\nexports.WsdlUtil = WsdlUtil;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifDeviceService = void 0;\nconst dgram = require(\"dgram\");\nconst xml2js = require(\"xml2js\");\nconst common_1 = require(\"@nestjs/common\");\nconst os_1 = require(\"os\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst rxjs_1 = require(\"rxjs\");\nconst date_util_1 = require(\"@app/common/util/date.util\");\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst constant_1 = require(\"@app/common/constant\");\nconst template_1 = require(\"@app/common/wsdl/device/template\");\nconst wsdl_util_1 = require(\"@app/common/util/wsdl.util\");\nconst url_util_1 = require(\"@app/common/util/url.util\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nlet OnvifDeviceService = class OnvifDeviceService {\n    constructor(networkMicroservice, configMicroservice, saveLogService) {\n        this.networkMicroservice = networkMicroservice;\n        this.configMicroservice = configMicroservice;\n        this.saveLogService = saveLogService;\n        this.messageNum = 0;\n        this.MULTICAST_ADDRESS = '239.255.255.250';\n        this.PORT = 3702;\n        this.ONVIF_PORT = 3005;\n        this.CONFIG = {\n            Serial: '',\n            Manufacturer: '',\n            Model: '',\n            Version: '',\n            HardwareID: '',\n        };\n        this.logger = this.saveLogService.get('onvif');\n    }\n    async onModuleInit() {\n        this.instanceId = wsdl_util_1.WsdlUtil.generateInstanceId();\n        this.configService = this.configMicroservice.getService('ConfigGrpcService');\n        this.onReady();\n    }\n    async waitForGrpc(clientGrpc, serviceName, timeoutMs = 3000) {\n        const raw = clientGrpc.getClientByServiceName?.(serviceName) ?? clientGrpc.getClient?.();\n        if (!raw)\n            return false;\n        return new Promise((resolve) => {\n            const deadline = new Date(Date.now() + timeoutMs);\n            raw.waitForReady(deadline, (err) => resolve(!err));\n        });\n    }\n    async onReady() {\n        const ok = await this.waitForGrpc(this.configMicroservice, 'ConfigGrpcService', 3000);\n        this.initNetwork();\n        if (!ok) {\n            this.logger?.error('[Device] Config  ');\n            return;\n        }\n        const svc = this.configMicroservice.getService('ConfigGrpcService');\n        try {\n            const result = await (0, rxjs_1.lastValueFrom)(svc.getConfig({ key: 'media_name' }));\n            this.initConfig();\n        }\n        catch (e) {\n            this.logger?.warn(`RPC   ${e}`);\n        }\n    }\n    async initConfig() {\n        try {\n            this.logger?.debug(`[Device] InitConfig --------------------------`);\n            this.CONFIG.Serial = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'robot_serial' }))).value ?? '';\n            this.CONFIG.Manufacturer = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'robot_manufacturer' }))).value ?? '';\n            this.CONFIG.Model = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'robot_model' }))).value ?? '';\n            this.CONFIG.Version = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'robot_version' }))).value ?? '';\n            this.CONFIG.HardwareID = (await (0, rxjs_1.lastValueFrom)(this.configService.getConfig({ key: 'robot_hardware_id' }))).value ?? '';\n            this.logger?.info(`[Device] initConfig : ${JSON.stringify(this.CONFIG)}`);\n            this.initMulticast();\n        }\n        catch (error) {\n            this.logger?.error(`[Device] initConfig : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            this.configService = null;\n        }\n    }\n    async initNetwork() {\n        try {\n            this.logger?.debug(`[Device] initNetwork --------------------------`);\n            this.networkService = this.networkMicroservice.getService('NetworkGrpcService');\n            this.currentWifi = await (0, rxjs_1.lastValueFrom)(this.networkService.getWifi({}));\n            this.initMulticast();\n        }\n        catch (error) {\n            this.logger?.error(`[Device] initNetwork : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            this.networkService = null;\n        }\n    }\n    async initMulticast() {\n        if (this.networkService && this.configService) {\n            this.logger?.debug(`[Device] initMulticast --------------------------`);\n            this.server = dgram.createSocket({ type: 'udp4', reuseAddr: true });\n            this.server.on('message', (msg, rinfo) => {\n                try {\n                    const parser = new xml2js.Parser({\n                        explicitArray: false,\n                        tagNameProcessors: [xml2js.processors.stripPrefix],\n                    });\n                    parser.parseString(msg, (err, result) => {\n                        if (err) {\n                            console.log('Error parsing XML:', err);\n                            return;\n                        }\n                        if (result['Envelope'] &&\n                            result['Envelope']['Body'] &&\n                            result['Envelope']['Header'] &&\n                            result['Envelope']['Header']['MessageID']) {\n                            if (result['Envelope']['Body']['Probe'] && JSON.stringify(result['Envelope']['Body']['Probe']['Types']).includes('Device')) {\n                                this.logger?.debug(`[Device] Probe Message Read : ${rinfo.address}`);\n                                this.responseProbe(result, rinfo);\n                            }\n                        }\n                    });\n                }\n                catch (error) {\n                    console.error(error);\n                }\n            });\n        }\n    }\n    async hello() {\n        let helloMsg = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.HELLO];\n        const messageId = url_util_1.UrlUtil.generateUUID();\n        helloMsg = helloMsg.replace('__MESSAGE_ID__', messageId);\n        helloMsg = helloMsg.replace('__ADDRESS__', this.CONFIG.Serial);\n        helloMsg = helloMsg.replace('__INSTANCE_ID__', this.instanceId);\n        helloMsg = helloMsg.replace('__MESSAGE_NUMBER__', (++this.messageNum).toString());\n        const xaddrs = wsdl_util_1.WsdlUtil.getXaddrs('device_service', (0, os_1.networkInterfaces)());\n        helloMsg = helloMsg.replace('__XADDRS__', xaddrs);\n        this.logger?.info(`[Device] Hello: Serial(${this.CONFIG.Serial}) MessageID(${messageId}), Xaddrs(${xaddrs})`);\n        this.server.send(helloMsg, 0, helloMsg.length, this.PORT, this.MULTICAST_ADDRESS, (err) => {\n            if (err) {\n                this.logger?.error(`[Device] Hello: ${parse_util_1.ParseUtil.errorToJson(err)}`);\n            }\n        });\n    }\n    async responseProbe(message, rinfo) {\n        let probeMatchMsg = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.ProbeMatches];\n        const messageId = url_util_1.UrlUtil.generateUUID();\n        probeMatchMsg = probeMatchMsg.replace('__MESSAGE_ID__', messageId);\n        const relatesTo = message['Envelope']['Header']['MessageID'];\n        probeMatchMsg = probeMatchMsg.replace('__RELATES_TO__', relatesTo);\n        probeMatchMsg = probeMatchMsg.replace('__INSTANCE_ID__', this.instanceId);\n        probeMatchMsg = probeMatchMsg.replace('__MESSAGE_NUMBER__', (++this.messageNum).toString());\n        probeMatchMsg = probeMatchMsg.replace('__ADDRESS__', this.CONFIG.Serial);\n        const deviceXaddrs = wsdl_util_1.WsdlUtil.getXaddrs('device_service', (0, os_1.networkInterfaces)());\n        probeMatchMsg = probeMatchMsg.replace('__DEVICE_XADDRS__', deviceXaddrs);\n        this.logger?.info(`[Device] ProbeMatches : Serial(${this.CONFIG.Serial}), MessageID(${messageId}), RelatesTo(${relatesTo}), Xaddrs(${deviceXaddrs})`);\n        const messageBuffer = Buffer.from(probeMatchMsg, 'utf-8');\n        this.server.send(messageBuffer, 0, messageBuffer.length, rinfo.port, rinfo.address, (err) => {\n            if (err)\n                console.log('Error sending response:', err);\n        });\n    }\n    async responseSystemDateAndTime() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.DateAndTime];\n                const nowTime = new Date();\n                query = query.replace('__YEAR_UTC__', nowTime.getUTCFullYear().toString());\n                query = query.replace('__MONTH_UTC__', (nowTime.getUTCMonth() + 1).toString());\n                query = query.replace('__DAY_UTC__', nowTime.getUTCDate().toString());\n                query = query.replace('__HOUR_UTC__', nowTime.getUTCHours().toString());\n                query = query.replace('__MINUTE_UTC__', nowTime.getUTCMinutes().toString());\n                query = query.replace('__SECOND_UTC__', nowTime.getUTCSeconds().toString());\n                query = query.replace('__TIMEZONE__', 'KoreaStandardTime-9');\n                query = query.replace('__YEAR__', date_util_1.DateUtil.formatTimeYearKST(nowTime));\n                query = query.replace('__MONTH__', date_util_1.DateUtil.formatTimeMonthKST(nowTime));\n                query = query.replace('__DAY__', date_util_1.DateUtil.formatTimeDayKST(nowTime));\n                query = query.replace('__HOUR__', date_util_1.DateUtil.formatTimeHourKST(nowTime));\n                query = query.replace('__MINUTE__', date_util_1.DateUtil.formatTimeMinuteKST(nowTime));\n                query = query.replace('__SECOND__', date_util_1.DateUtil.formatTimeSecondKST(nowTime));\n                this.logger?.debug(`[Device] GetSystemDateAndTimeResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetSystemDateAndTimeResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async setSystemDateAndTime() {\n        throw new Error(' .');\n    }\n    async responseCapabilities(_ip) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.Capabilities];\n                query = query.replace('__DEVICE_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('device_service', (0, os_1.networkInterfaces)()));\n                query = query.replace('__MEDIA_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('media_service', (0, os_1.networkInterfaces)()));\n                query = query.replace('__EVENTS_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('events_service', (0, os_1.networkInterfaces)()));\n                query = query.replace('__PTZ_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('ptz_service', (0, os_1.networkInterfaces)()));\n                query = query.replace('__DEVICE_IO_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('deviceio_service', (0, os_1.networkInterfaces)()));\n                this.logger?.info(`[Device] GetCapabilitiesResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetCapabilitiesResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseDeviceInformation() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.DeviceInformation];\n                query = query.replace('__MANUFACTURER__', this.CONFIG.Manufacturer);\n                query = query.replace('__MODEL__', this.CONFIG.Model);\n                query = query.replace('__FIRMWARE__VERSION__', this.CONFIG.Version);\n                query = query.replace('__SERIAL_NUMBER__', this.CONFIG.Serial);\n                query = query.replace('__HARDWARE_ID__', this.CONFIG.HardwareID);\n                this.logger?.debug(`[Device] GetDeviceInformationResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetDeviceInformationResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseScopes() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.Scopes];\n                let scopes_query = '';\n                scopes_query += wsdl_util_1.WsdlUtil.getScopeQuery('onvif://www.onvif.org/type/video_encoder');\n                scopes_query += wsdl_util_1.WsdlUtil.getScopeQuery('onvif://www.onvif.org/type/ptz');\n                scopes_query += wsdl_util_1.WsdlUtil.getScopeQuery('onvif://www.onvif.org/type/Network_Video_Transmitter');\n                scopes_query += wsdl_util_1.WsdlUtil.getScopeQuery('onvif://www.onvif.org/location/country/Korea');\n                scopes_query += wsdl_util_1.WsdlUtil.getScopeQuery('onvif://www.onvif.org/name/' + this.CONFIG.Serial);\n                scopes_query += wsdl_util_1.WsdlUtil.getScopeQuery('onvif://onvif://www.onvif.org/Profile/Streaming');\n                query = query.replace('__SCOPES__', scopes_query);\n                this.logger?.debug(`[Device] GetScopeResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetScopeResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseNetworkInterfaces(_ip) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.NetworkInterfaces];\n                if (this.currentWifi) {\n                    query = query.replace('__NAME__', this.currentWifi.name);\n                    query = query.replace('__HW_ADDRESS__', this.currentWifi.hwAddr);\n                    query = query.replace('__IPV4__', this.currentWifi.address);\n                    query = query.replace('__IPV4_DHCP__', this.currentWifi.address);\n                    query = query.replace('__IS_DHCP__', this.currentWifi.dhcp ? 'true' : 'false');\n                    query = query.replace(/__IPV4_SUBNET__/g, this.currentWifi.mask);\n                }\n                this.logger?.info(`[Device] NetworkInterfaces: ${query}`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] NetworkInterfaces : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseDNS(_ip) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.DNS];\n                if (this.currentWifi) {\n                    let dns_query = '';\n                    for (let i = 0; i < this.currentWifi.dns.length; i++) {\n                        dns_query += `<DNS${i + 1}>${this.currentWifi.dns[i]}</DNS${i + 1}>` + '\\n';\n                    }\n                    query = query.replace('__DNS__', dns_query);\n                }\n                this.logger?.debug(`[Device] GetDNSResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetDNSResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseNTP() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                const query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.NTP];\n                this.logger?.debug(`[Device] GETNTPResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetNTPResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseDefaultGateway(_ip) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.DefaultGateway];\n                if (this.currentWifi) {\n                    query = query.replace('__GATEWAY__', this.currentWifi.gateway);\n                }\n                this.logger?.debug(`[Device] GetDefaultGatewayResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetDefaultGatewayResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseDiscoveryMode() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                const query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.DeiscoveryMode];\n                this.logger?.debug(`[Device] GetDiscoveryModeResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetDiscoveryModeResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseNetworkProtocols() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                const query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.NetworkProtocols];\n                this.logger?.debug(`[Device] GetNetworkProtocolsResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetNetworkProtocolsResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseHostname() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.HostName];\n                if (this.currentWifi) {\n                    query = query.replace('__DHCP__', this.currentWifi.dhcp ? 'true' : 'false');\n                    query = query.replace('__NAME__', (0, os_1.hostname)());\n                }\n                this.logger?.debug(`[Device] GetHostnameResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetHostnameResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseServices(_ip) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.DeviceWSDLTemplate[template_1.DeviceWSDL.Services];\n                query = query.replace('__DEVICE_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('device_service', (0, os_1.networkInterfaces)()));\n                query = query.replace('__MEDIA_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('media_service', (0, os_1.networkInterfaces)()));\n                query = query.replace('__PTZ_SERVICE__', wsdl_util_1.WsdlUtil.getXaddrs('ptz_service', (0, os_1.networkInterfaces)()));\n                this.logger?.debug(`[Device] GetServicesResponse`);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Device] GetServicesResponse : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n};\nexports.OnvifDeviceService = OnvifDeviceService;\nexports.OnvifDeviceService = OnvifDeviceService = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, common_1.Inject)(constant_1.NETWORK_SERVICE)),\n    __param(1, (0, common_1.Inject)(constant_1.CONFIG_SERVICE)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientGrpc !== \"undefined\" && microservices_1.ClientGrpc) === \"function\" ? _a : Object, typeof (_b = typeof microservices_1.ClientGrpc !== \"undefined\" && microservices_1.ClientGrpc) === \"function\" ? _b : Object, typeof (_c = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _c : Object])\n], OnvifDeviceService);\n","module.exports = require(\"dgram\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkWSDLTemplate = exports.DeviceWSDLTemplate = exports.DeviceWSDL = void 0;\nvar DeviceWSDL;\n(function (DeviceWSDL) {\n    DeviceWSDL[\"HELLO\"] = \"hello\";\n    DeviceWSDL[\"ProbeMatches\"] = \"probematches\";\n    DeviceWSDL[\"Capabilities\"] = \"capabilities\";\n    DeviceWSDL[\"DateAndTime\"] = \"dateandtime\";\n    DeviceWSDL[\"DeviceInformation\"] = \"deviceinformation\";\n    DeviceWSDL[\"DeiscoveryMode\"] = \"discoverymode\";\n    DeviceWSDL[\"Scopes\"] = \"scopes\";\n    DeviceWSDL[\"Services\"] = \"services\";\n    DeviceWSDL[\"NetworkInterfaces\"] = \"networkinterfaces\";\n    DeviceWSDL[\"DefaultGateway\"] = \"defaultgateway\";\n    DeviceWSDL[\"DNS\"] = \"dns\";\n    DeviceWSDL[\"HostName\"] = \"hostname\";\n    DeviceWSDL[\"NetworkProtocols\"] = \"networkprotocols\";\n    DeviceWSDL[\"NTP\"] = \"ntp\";\n})(DeviceWSDL || (exports.DeviceWSDL = DeviceWSDL = {}));\nexports.DeviceWSDLTemplate = {\n    hello: `<soap:Envelope \n    xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"\n    xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\"\n    xmlns:wsd=\"http://schemas.xmlsoap.org/ws/2005/04/discovery\"\n    xmlns:wsdp=\"http://schemas.xmlsoap.org/ws/2006/02/devprof\"\n    xmlns:tdn=\"http://www.onvif.org/ver10/network/wsdl\"\n>\n    <soap:Header>\n        <wsa:To>urn:schemas-xmlsoap-org:ws:2005:04:discovery</wsa:To>\n        <wsa:Action>http://schemas.xmlsoap.org/ws/2005/04/discovery/Hello</wsa:Action>\n        <wsa:MessageID>urn:uuid:__MESSAGE_ID__</wsa:MessageID>\n        <wsa:ReplyTo>\n            <wsa:Address>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:Address>\n        </wsa:ReplyTo>\n        <wsd:AppSequence InstanceId=\"__INSTANCE_ID__\" MessageNumber=\"__MESSAGE_NUMBER__\"></wsd:AppSequence>\n    </soap:Header>\n    <soap:Body>\n        <wsd:Hello>\n            <wsa:EndpointReference>\n                <wsa:Address>urn:__ADDRESS__</wsa:Address>\n            </wsa:EndpointReference>\n            <wsd:Types>wsdp:Device tdn:NetworkVideoTransmitter</wsd:Types>\n            <wsd:Scopes>onvif://www.onvif.org/name onvif://www.onvif.org/Profile/Streaming</wsd:Scopes>\n            <wsd:XAddrs>__XADDRS__</wsd:XAddrs>\n            <wsd:MetadataVersion>1</wsd:MetadataVersion>\n        </wsd:Hello>\n    </soap:Body>\n</soap:Envelope>`,\n    probematches: `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"\n    xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\"\n    xmlns:d=\"http://schemas.xmlsoap.org/ws/2005/04/discovery\"\n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n    xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\"\n    xmlns:trt=\"http://www.onvif.org/ver10/media/wsdl\"\n    xmlns:dn=\"http://www.onvif.org/ver10/network/wsdl\">\n    <soap:Header>\n        <wsa:To>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>\n        <wsa:Action>http://schemas.xmlsoap.org/ws/2005/04/discovery/ProbeMatches</wsa:Action>\n        <wsa:MessageID>urn:uuid:__MESSAGE_ID__</wsa:MessageID>\n        <wsa:RelatesTo>__RELATES_TO__</wsa:RelatesTo>\n        <d:AppSequence InstanceId=\"__INSTANCE_ID__\" MessageNumber=\"__MESSAGE_NUMBER__\"></d:AppSequence>\n    </soap:Header>\n    <soap:Body>\n        <d:ProbeMatches>\n            <d:ProbeMatch>\n                <wsa:EndpointReference>\n                    <wsa:Address>urn:__ADDRESS__</wsa:Address>\n                </wsa:EndpointReference>\n                <d:Types>\n                    tds:Device dn:NetworkVideoTransmitter\n                </d:Types>\n                <d:XAddrs>\n                    __DEVICE_XADDRS__\n                </d:XAddrs>\n                <d:Scopes>onvif://www.onvif.org/type/NetworkVideoTransmitter</d:Scopes>\n                <d:MetadataVersion>1</d:MetadataVersion>\n            </d:ProbeMatch>\n        </d:ProbeMatches>\n    </soap:Body>\n</soap:Envelope>`,\n    capabilities: `<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"\n    xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\"\n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n    <soap:Body>\n        <tds:GetCapabilitiesResponse>\n            <tds:Capabilities xsi:type=\"tt:Capabilities\">\n                <tt:Analytics xsi:type=\"tt:AnalyticsCapabilities\">\n                </tt:Analytics>\n                <tt:Device>\n                    <tt:XAddr>__DEVICE_SERVICE__</tt:XAddr>\n                </tt:Device>\n                <tt:Media xsi:type=\"tt:MediaCapabilities\">\n                    <tt:XAddr>__MEDIA_SERVICE__</tt:XAddr>\n                    <tt:StreamingCapabilities xsi:type=\"tt:RealTimeStreamingCapabilities\">\n                        <tt:RTPMulticast>false</tt:RTPMulticast>\n                        <tt:RTP_TCP>true</tt:RTP_TCP>\n                        <tt:RTP_RTSP_TCP>true</tt:RTP_RTSP_TCP>\n                    </tt:StreamingCapabilities>\n                </tt:Media>\n                <tt:Event xsi:type=\"tt:EventCapabilities\">\n                    <tt:XAddr>__EVENTS_SERVICE__</tt:XAddr>\n                </tt:Event>\n                <tt:PTZ>\n                    <tt:XAddr>__PTZ_SERVICE__</tt:XAddr>\n                </tt:PTZ>\n                <tt:DeviceIO>\n                    <tt:XAddr>__DEVICE_IO_SERVICE__</tt:XAddr>\n                </tt:DeviceIO>\n            </tds:Capabilities>\n        </tds:GetCapabilitiesResponse>\n    </soap:Body>\n</soap:Envelope>`,\n    dateandtime: `<s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\"\n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n    xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\"\n>\n    <s:Body>\n        <tds:GetSystemDateAndTimeResponse>\n            <tds:SystemDateAndTime>\n                <tt:UTCDateTime>\n                    <tt:Date>\n                        <tt:Year>__YEAR_UTC__</tt:Year>\n                        <tt:Month>__MONTH_UTC__</tt:Month>\n                        <tt:Day>__DAY_UTC__</tt:Day>\n                    </tt:Date>\n                    <tt:Time>\n                        <tt:Hour>__HOUR_UTC__</tt:Hour>\n                        <tt:Minute>__MINUTE_UTC__</tt:Minute>\n                        <tt:Second>__SECOND_UTC__</tt:Second>\n                    </tt:Time>\n                </tt:UTCDateTime>\n                <tt:LocalDateTime>\n                    <tt:Date>\n                        <tt:Year>__YEAR__</tt:Year>\n                        <tt:Month>__MONTH__</tt:Month>\n                        <tt:Day>__DAY__</tt:Day>\n                    </tt:Date>\n                    <tt:Time>\n                        <tt:Hour>__HOUR__</tt:Hour>\n                        <tt:Minute>__MINUTE__</tt:Minute>\n                        <tt:Second>__SECOND__</tt:Second>\n                    </tt:Time>\n                </tt:LocalDateTime>\n                <tt:TimeZone>\n                    <tt:TZ>__TIMEZONE__</tt:TZ>\n                </tt:TimeZone>\n            </tds:SystemDateAndTime>\n        </tds:GetSystemDateAndTimeResponse>\n    </s:Body>\n</s:Envelope>`,\n    deviceinformation: `<s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">\n    <s:Header/>\n    <s:Body>\n        <GetDeviceInformationResponse xmlns=\"http://www.onvif.org/ver10/device/wsdl\">\n            <Manufacturer>__MANUFACTURER__</Manufacturer>\n            <Model>__MODEL__</Model>\n            <FirmwareVersion>__FIRMWARE__VERSION__</FirmwareVersion>\n            <SerialNumber>__SERIAL_NUMBER__</SerialNumber>\n            <HardwareId>__HARDWARE_ID__</HardwareId>\n        </GetDeviceInformationResponse>\n    </s:Body>\n</s:Envelope>`,\n    discoverymode: `<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"  \n               xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\">\n    <soap:Body>\n        <tds:GetDiscoveryModeResponse>\n            <tds:DiscoveryMode>Multicast</tds:DiscoveryMode>\n        </tds:GetDiscoveryModeResponse>\n    </soap:Body>\n</soap:Envelope>`,\n    scopes: `<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"\n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n    xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\">\n  <soap:Body>\n    <tds:GetScopesResponse>\n      __SCOPES__\n    </tds:GetScopesResponse>\n  </soap:Body>\n</soap:Envelope>`,\n    services: `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<env:Envelope xmlns:env=\"http://www.w3.org/2003/05/soap-envelope\"\nxmlns:enc=\"http://www.w3.org/2003/05/soap-encoding\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\nxmlns:xop=\"http://www.w3.org/2004/08/xop/include\"\nxmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\"\nxmlns:tt=\"http://www.onvif.org/ver10/schema\">\n    <env:Header>\n    </env:Header>\n    <env:Body>\n        <tds:GetServicesResponse>\n            <tds:Service>\n                <tds:Namespace>http://www.onvif.org/ver10/device/wsdl</tds:Namespace>\n                <tds:XAddr>\n                    __DEVICE_XADDRS__\n                </tds:XAddr>\n                <tds:Capabilities>\n                    <tds:Capabilities>\n                        <tds:Network IPFilter=\"false\" ZeroConfiguration=\"true\"\n                        IPVersion6=\"false\" DynDNS=\"false\" Dot11Configuration=\"false\"\n                        HostnameFromDHCP=\"false\" NTP=\"0\" />\n                        <tds:Security TLS1.0=\"false\" TLS1.1=\"false\" TLS1.2=\"false\"\n                        OnboardKeyGeneration=\"false\" AccessPolicyConfig=\"false\" DefaultAccessPolicy=\"false\"\n                        Dot1X=\"false\" RemoteUserHandling=\"false\" X.509Token=\"false\" SAMLToken=\"false\"\n                        KerberosToken=\"false\" UsernameToken=\"false\" HttpDigest=\"false\" RELToken=\"false\" />\n                        <tds:System DiscoveryResolve=\"true\" DiscoveryBye=\"true\"\n                        RemoteDiscovery=\"false\" SystemBackup=\"false\" SystemLogging=\"false\"\n                        FirmwareUpgrade=\"true\" HttpFirmwareUpgrade=\"false\" HttpSystemBackup=\"false\"\n                        HttpSystemLogging=\"false\" HttpSupportInformation=\"false\" />\n                        <tds:Misc AuxiliaryCommands=\"\" />\n                    </tds:Capabilities>\n                </tds:Capabilities>\n                <tds:Version>\n                    <tt:Major>2</tt:Major>\n                    <tt:Minor>20</tt:Minor>\n                </tds:Version>\n            </tds:Service>\n            <tds:Media>\n                <tds:Namespace>http://www.onvif.org/ver10/media/wsdl</tds:Namespace>\n                <tds:XAddr>\n                    __MEDIA_XADDRS__\n                </tds:XAddr>\n                <!-- <tds:Capabilities>\n                    <trt:Capabilities xmlns:trt=\"http://www.onvif.org/ver10/media/wsdl\"\n                    SnapshotUri=\"true\" Rotation=\"false\">\n                    <trt:ProfileCapabilities MaximumNumberOfProfiles=\"10\" />\n                    <trt:StreamingCapabilities RTPMulticast=\"true\" RTP_TCP=\"false\"\n                    RTP_RTSP_TCP=\"true\" NonAggregateControl=\"true\" />\n                    </trt:Capabilities>\n                </tds:Capabilities> -->\n                <tds:Version>\n                    <tt:Major>2</tt:Major>\n                    <tt:Minor>20</tt:Minor>\n                </tds:Version>\n            </tds:Media>\n            <tds:PTZ>\n                <tds:Namespace>http://www.onvif.org/ver20/ptz/wsdl</tds:Namespace>\n                <tds:XAddr>\n                    __PTZ_XADDRS__\n                </tds:XAddr>\n                <tds:Capabilities>\n                    <tptz:Capabilities xmlns:tptz=\"http://www.onvif.org/ver20/ptz/wsdl\"\n                    EFlip=\"false\" Reverse=\"false\" />\n                </tds:Capabilities>\n                <tds:Version>\n                    <tt:Major>2</tt:Major>\n                    <tt:Minor>20</tt:Minor>\n                </tds:Version>\n            </tds:PTZ>\n            <tds:Event>\n                <tds:Namespace>http://www.onvif.org/ver10/events/wsdl</tds:Namespace>\n                <tds:XAddr>\n                    __EVENT_XADDRS__\n                </tds:XAddr>\n                <tds:Capabilities>\n                    <tev:Capabilities xmlns:tev=\"http://www.onvif.org/ver10/events/wsdl\"\n                    WSSubscriptionPolicySupport=\"false\" WSPullPointSupport=\"false\"\n                    WSPausableSubscription=\"false\" />\n                </tds:Capabilities>\n                <tds:Version>\n                    <tt:Major>2</tt:Major>\n                    <tt:Minor>20</tt:Minor>\n                </tds:Version>\n            </tds:Event>\n            <tds:Service>\n                <tds:Namespace>http://www.onvif.org/ver20/imaging/wsdl</tds:Namespace>\n                <tds:XAddr>\n                    __IMAGING_XADDRS__\n                </tds:XAddr>\n                <tds:Capabilities>\n                    <timg:Capabilities xmlns:timg=\"http://www.onvif.org/ver20/imaging/wsdl\"\n                    ImageStabilization=\"false\" />\n                </tds:Capabilities>\n                <tds:Version>\n                    <tt:Major>2</tt:Major>\n                    <tt:Minor>20</tt:Minor>\n                </tds:Version>\n            </tds:Service>\n            <tds:Service>\n                <tds:Namespace>http://www.onvif.org/ver10/deviceIO/wsdl</tds:Namespace>\n                <tds:XAddr>\n                    __DEVICEIO_XADDRS__\n                </tds:XAddr>\n                <tds:Capabilities>\n                    <tmd:Capabilities xmlns:tmd=\"http://www.onvif.org/ver10/deviceIO/wsdl\"\n                    VideoSources=\"1\" VideoOutputs=\"0\" AudioSources=\"1\" AudioOutputs=\"1\" RelayOutputs=\"0\"\n                    SerialPorts=\"0\" DigitalInputs=\"0\" />\n                </tds:Capabilities>\n                <tds:Version>\n                    <tt:Major>2</tt:Major>\n                    <tt:Minor>20</tt:Minor>\n                </tds:Version>\n            </tds:Service>\n        </tds:GetServicesResponse>\n    </env:Body>\n</env:Envelope>`,\n};\nexports.NetworkWSDLTemplate = {\n    defaultgateway: `<s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\"\n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n    xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\">\n  <s:Header/>\n  <s:Body>\n    <tds:GetNetworkDefaultGatewayResponse >\n      <tds:NetworkGateway>\n        <tt:IPv4Address>__GATEWAY__</tt:IPv4Address>\n      </tds:NetworkGateway>\n    </tds:GetNetworkDefaultGatewayResponse>\n  </s:Body>\n</s:Envelope>`,\n    dns: `<s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">\n  <s:Header/>\n  <s:Body>\n    <GetDNSResponse xmlns=\"http://www.onvif.org/ver10/device/wsdl\">\n      <DNS>\n        <FromDHCP>false</FromDHCP>\n        <DNSManual>\n          __DNS__\n        </DNSManual>\n      </DNS>\n    </GetDNSResponse>\n  </s:Body>\n</s:Envelope>`,\n    hostname: `<s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">\n    <s:Body>\n        <GetHostnameResponse xmlns=\"http://www.onvif.org/ver10/device/wsdl\">\n            <HostnameInformation>\n                <FromDHCP>__DHCP__</FromDHCP>\n                <Name>__NAME__</Name>\n            </HostnameInformation>\n        </GetHostnameResponse>\n    </s:Body>\n</s:Envelope>\n`,\n    networkinterfaces: `<soap:Envelope \n    xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"  \n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n    xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\">\n  <soap:Body>\n    <tds:GetNetworkInterfacesResponse>\n      <tds:NetworkInterfaces>\n        <tt:Enabled>true</tt:Enabled>\n        <tt:Info>\n            <tt:Name>__NAME__</tt:Name>\n            <tt:HwAddress>__HW_ADDRESS__</tt:HwAddress>\n            <tt:MTU>1500</tt:MTU>\n        </tt:Info>\n        <tt:IPv4>\n            <tt:Enabled>true</tt:Enabled>\n            <tt:Config>\n                <tt:Manual>\n                    <tt:Address>__IPV4__</tt:Address>\n                    <tt:PrefixLength>__IPV4_SUBNET__</tt:PrefixLength>\n                </tt:Manual>\n                <tt:FromDHCP>\n                    <tt:Address>__IPV4_DHCP__</tt:Address>\n                    <tt:PrefixLength>__IPV4_SUBNET__</tt:PrefixLength>\n                </tt:FromDHCP>\n                <tt:DHCP>__IS_DHCP__</tt:DHCP>\n            </tt:Config>\n        </tt:IPv4>\n    </tds:NetworkInterfaces>\n    </tds:GetNetworkInterfacesResponse>\n  </soap:Body>\n</soap:Envelope>\n`,\n    networkprotocols: `<s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">\n  <s:Header/>\n  <s:Body>\n    <tds:GetNetworkProtocolsResponse xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\">\n      <tds:NetworkProtocols>\n        <tds:NetworkProtocol>\n          <tt:Protocol>TCP</tt:Protocol>\n          <tt:Port>3005</tt:Port>\n        </tds:NetworkProtocol>\n    </tds:GetNetworkProtocolsResponse>\n  </s:Body>\n</s:Envelope>\n`,\n    ntp: `<s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\"\n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"\n    xmlns:tds=\"http://www.onvif.org/ver10/device/wsdl\">\n  <s:Header/>\n  <s:Body>\n    <tds:GetNTPResponse >\n      <tds:NTP>\n        <tt:Enabled>false</tt:Enabled>\n        <tt:NetworkTimeProtocol>\n          <tt:Server>\n            <tt:Address>time.example.com</tt:Address>\n            <tt:Port>123</tt:Port>\n          </tt:Server>\n          <tt:UpdateInterval>3600</tt:UpdateInterval>\n        </tt:NetworkTimeProtocol>\n      </tds:NTP>\n    </tds:GetNTPResponse>\n  </s:Body>\n</s:Envelope>\n`,\n};\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifPtzService = void 0;\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst template_1 = require(\"@app/common/wsdl/ptz/template\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_1 = require(\"@nestjs/common\");\nlet OnvifPtzService = class OnvifPtzService {\n    constructor(saveLogService) {\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('onvif');\n    }\n    async onModuleInit() {\n        this.logger?.info(`[Ptz] OnvifPtzService initialized`);\n    }\n    async responsePtzMove(title) {\n        return new Promise(async (resolve, reject) => {\n            try {\n                let query = template_1.PTZWSDLTemplate[template_1.PTZWSDL.Move];\n                query = query.replace('__RESPONSE_TITLE__', title);\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Ptz] responsePTZContinousMove : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n    async responseSetPreset() {\n        return new Promise(async (resolve, reject) => {\n            try {\n                const query = template_1.PTZWSDLTemplate[template_1.PTZWSDL.SetPreset];\n                resolve(Buffer.from(query, 'utf-8'));\n            }\n            catch (error) {\n                this.logger?.error(`[Ptz] responseSetPreset : ${parse_util_1.ParseUtil.errorToJson(error)}`);\n                reject();\n            }\n        });\n    }\n};\nexports.OnvifPtzService = OnvifPtzService;\nexports.OnvifPtzService = OnvifPtzService = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object])\n], OnvifPtzService);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PTZWSDLTemplate = exports.PTZWSDL = void 0;\nvar PTZWSDL;\n(function (PTZWSDL) {\n    PTZWSDL[\"Move\"] = \"move\";\n    PTZWSDL[\"SetPreset\"] = \"setpreset\";\n})(PTZWSDL || (exports.PTZWSDL = PTZWSDL = {}));\nexports.PTZWSDLTemplate = {\n    move: `<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\"\n                   xmlns:ptz=\"http://www.onvif.org/ver20/ptz/wsdl\">\n  <SOAP-ENV:Header/>\n  <SOAP-ENV:Body>\n    __RESPONSE_TITLE__\n  </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>`,\n    setpreset: `<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\"\n                   xmlns:wsdl=\"http://www.onvif.org/ver20/ptz/wsdl\">\n  <SOAP-ENV:Header/>\n  <SOAP-ENV:Body>\n    <wsdl:SetPresetResponse>\n      <wsdl:PresetToken>Preset_1</wsdl:PresetToken>\n    </wsdl:SetPresetResponse>\n  </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>\n`,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifDeviceIOService = void 0;\nclass OnvifDeviceIOService {\n}\nexports.OnvifDeviceIOService = OnvifDeviceIOService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifEventService = void 0;\nclass OnvifEventService {\n}\nexports.OnvifEventService = OnvifEventService;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifMqttController = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst onvif_device_service_1 = require(\"../../application/onvif.device.service\");\nconst constant_1 = require(\"@app/common/constant\");\nlet OnvifMqttController = class OnvifMqttController {\n    constructor(mqttMicroservice, deviceService) {\n        this.mqttMicroservice = mqttMicroservice;\n        this.deviceService = deviceService;\n        this.mqttMicroservice.emit('check-config', {});\n        this.mqttMicroservice.emit('check-network', {});\n    }\n    async readyConfig() {\n        this.deviceService.onReady();\n    }\n    async readyNetwork() {\n    }\n};\nexports.OnvifMqttController = OnvifMqttController;\n__decorate([\n    (0, microservices_1.EventPattern)('ready:config'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], OnvifMqttController.prototype, \"readyConfig\", null);\n__decorate([\n    (0, microservices_1.EventPattern)('ready:network'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], OnvifMqttController.prototype, \"readyNetwork\", null);\nexports.OnvifMqttController = OnvifMqttController = __decorate([\n    (0, common_1.Controller)(),\n    __param(0, (0, common_1.Inject)(constant_1.MQTT_BROKER)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _a : Object, typeof (_b = typeof onvif_device_service_1.OnvifDeviceService !== \"undefined\" && onvif_device_service_1.OnvifDeviceService) === \"function\" ? _b : Object])\n], OnvifMqttController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OnvifPendingService = void 0;\nconst pending_util_1 = require(\"@app/common/util/pending/pending.util\");\nconst common_1 = require(\"@nestjs/common\");\nlet OnvifPendingService = class OnvifPendingService extends pending_util_1.PendingResponseUtil {\n};\nexports.OnvifPendingService = OnvifPendingService;\nexports.OnvifPendingService = OnvifPendingService = __decorate([\n    (0, common_1.Injectable)()\n], OnvifPendingService);\n","module.exports = require(\"body-parser\");","module.exports = require(\"express-xml-bodyparser\");","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst test_service_1 = require(\"./application/test.service\");\nconst log_module_1 = require(\"@app/common/log/log.module\");\nconst config_1 = require(\"@nestjs/config\");\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst test_entity_1 = require(\"./entity/test.entity\");\nconst test_mongo_adapter_1 = require(\"./adapter/output/test.mongo.adapter\");\nconst test_grpc_controller_1 = require(\"./adapter/input/test.grpc.controller\");\nlet TestModule = class TestModule {\n};\nexports.TestModule = TestModule;\nexports.TestModule = TestModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            log_module_1.LogModule,\n            config_1.ConfigModule.forRoot({\n                isGlobal: true,\n                envFilePath: '.env',\n            }),\n            mongoose_1.MongooseModule.forFeature([\n                {\n                    name: test_entity_1.TestRecord.name,\n                    schema: test_entity_1.TestRecordSchema,\n                },\n                {\n                    name: test_entity_1.TestResult.name,\n                    schema: test_entity_1.TestResultSchema,\n                },\n            ]),\n            mongoose_1.MongooseModule.forRootAsync({\n                inject: [config_1.ConfigService],\n                useFactory: (configService) => ({\n                    uri: configService.get('MONGO_URL'),\n                }),\n            }),\n        ],\n        controllers: [test_grpc_controller_1.TestGrpcInputController],\n        providers: [\n            test_service_1.TestService,\n            {\n                provide: 'TestDatabaseOutputPort',\n                useClass: test_mongo_adapter_1.TestMongoAdapter,\n            },\n        ],\n        exports: [test_service_1.TestService],\n    })\n], TestModule);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst test_database_output_port_1 = require(\"../port/test.database.output-port\");\nconst common_3 = require(\"@app/common\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst test_record_domain_1 = require(\"../domain/test-record.domain\");\nconst test_domain_1 = require(\"../domain/test.domain\");\nlet TestService = class TestService {\n    constructor(database, saveLogService) {\n        this.database = database;\n        this.saveLogService = saveLogService;\n        this.runningTestInfo = null;\n        this.logger = this.saveLogService.get('host');\n    }\n    onModuleInit() {\n    }\n    recordToResponse(record) {\n        return {\n            id: record.id.toString(),\n            tester: record.tester,\n            tests: record.tests.map((test) => ({\n                id: test.id.toString(),\n                testRecordId: test.testRecordId?.toString(),\n                subject: test.subject,\n                result: test.result,\n                testAt: test.testAt?.toISOString(),\n            })),\n            createdAt: record.createdAt?.toISOString(),\n            updatedAt: record.updatedAt?.toISOString(),\n        };\n    }\n    resultToResponse(result) {\n        return {\n            id: result.id.toString(),\n            testRecordId: result.testRecordId?.toString(),\n            subject: result.subject,\n            result: result.result,\n            testAt: result.testAt?.toISOString(),\n        };\n    }\n    async getTestRecordAll(dto) {\n        try {\n            return await this.database.getRecordAll(dto);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] getTestRecordAll : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getTestRecord(dto) {\n        try {\n            const resp = await this.database.getRecordbyId(dto.id);\n            if (resp === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            console.log('resp : ', resp);\n            return this.recordToResponse(resp);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] getTestRecord : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getTestRecordRecent() {\n        try {\n            const resp = await this.database.getRecordRecent();\n            if (resp === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            return this.recordToResponse(resp);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] getTestRecordRecent : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async createTestRecord(dto) {\n        try {\n            if (dto.tester === undefined || dto.tester === null || dto.tester === '') {\n                throw new rpc_code_exception_1.RpcCodeException('tester .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const model = new test_record_domain_1.RecordModel({ tester: dto.tester });\n            const resp = await this.database.saveRecord(model);\n            model.assignId(resp.id.toString());\n            if (dto.subjects === undefined || dto.subjects === null || dto.subjects.length === 0) {\n                return {\n                    id: resp.id.toString(),\n                    tester: dto.tester,\n                    tests: [],\n                    createdAt: resp.createdAt?.toISOString(),\n                    updatedAt: resp.updatedAt?.toISOString(),\n                };\n            }\n            for (const subject of dto.subjects) {\n                const testModel = new test_domain_1.TestModel({ testRecordId: model.id, subject: subject });\n                const resp = await this.database.saveSubjects(testModel);\n                testModel.assignId(resp.id.toString());\n                model.addTest({\n                    id: resp.id.toString(),\n                    testRecordId: resp.testRecordId?.toString(),\n                    subject: resp.subject,\n                    result: resp.result,\n                    testAt: resp.testAt,\n                });\n            }\n            const finalResp = await this.database.updateRecord(model);\n            console.log('finalResp : ', finalResp);\n            return this.recordToResponse(finalResp);\n        }\n        catch (error) {\n            console.error('error : ', error);\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] insertTestRecord : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async updateTestRecord(dto) {\n        try {\n            if (dto.id === undefined || dto.id === null || dto.id === '') {\n                throw new rpc_code_exception_1.RpcCodeException('id .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const record = await this.database.getRecordbyId(dto.id);\n            if (record === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            console.log('record : ', record);\n            const data = { ...record.toObject(), ...dto };\n            console.log('data : ', data);\n            const model = new test_record_domain_1.RecordModel(data);\n            model.assignId(record.id.toString());\n            const resp = await this.database.updateRecord(model);\n            return this.recordToResponse(resp);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] updateTestRecord : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getTestResultbySubject(dto) {\n        try {\n            if (dto.subject === undefined || dto.subject === null || dto.subject === '') {\n                throw new rpc_code_exception_1.RpcCodeException('subject .', constant_1.GrpcCode.InvalidArgument);\n            }\n            return await this.database.getResultbySubject(dto);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] getTestResultbySubject : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async getTestResultRecent(dto) {\n        try {\n            const record = await this.database.getRecordRecent();\n            if (record === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            if (record.tests.length === 0) {\n                throw new rpc_code_exception_1.RpcCodeException('      .', constant_1.GrpcCode.NotFound);\n            }\n            if (dto.subjects === undefined || dto.subjects === null || dto.subjects.length === 0) {\n                return {\n                    items: record.tests.map((test) => ({\n                        id: test.id.toString(),\n                        testRecordId: test.testRecordId?.toString(),\n                        subject: test.subject,\n                        result: test.result,\n                        testAt: test.testAt?.toISOString(),\n                    })),\n                };\n            }\n            const resp = record.tests\n                .filter((test) => dto.subjects.includes(test.subject))\n                .map((test) => ({\n                id: test.id.toString(),\n                testRecordId: test.testRecordId?.toString(),\n                subject: test.subject,\n                result: test.result,\n                testAt: test.testAt?.toISOString(),\n            }));\n            return {\n                items: resp,\n            };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] getTestResultRecent : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async updateTestResult(dto) {\n        try {\n            if (dto.testRecordId === undefined || dto.testRecordId === null || dto.testRecordId === '') {\n                throw new rpc_code_exception_1.RpcCodeException('testRecordId .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (dto.subject === undefined || dto.subject === null || dto.subject === '') {\n                throw new rpc_code_exception_1.RpcCodeException('subject .', constant_1.GrpcCode.InvalidArgument);\n            }\n            if (dto.result === undefined || dto.result === null || dto.result === '') {\n                throw new rpc_code_exception_1.RpcCodeException('result .', constant_1.GrpcCode.InvalidArgument);\n            }\n            const record = await this.database.getRecordbyId(dto.testRecordId);\n            if (record === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            const recordModel = new test_record_domain_1.RecordModel(record.toObject());\n            recordModel.assignId(record.id.toString());\n            if (record.tests.some((test) => test.subject === dto.subject)) {\n                recordModel.tests.find((test) => test.subject === dto.subject).result = dto.result;\n            }\n            else {\n                const testModel = new test_domain_1.TestModel({ testRecordId: record.id, subject: dto.subject });\n                testModel.setResult(dto.result);\n                const resp = await this.database.saveSubjects(testModel);\n                testModel.assignId(resp.id.toString());\n                recordModel.addTest({\n                    id: resp.id.toString(),\n                    testRecordId: resp.testRecordId?.toString(),\n                    subject: resp.subject,\n                    result: resp.result,\n                    testAt: resp.testAt,\n                });\n            }\n            console.log('recordModel : ', recordModel);\n            const finalResp = await this.database.updateRecord(recordModel);\n            return this.resultToResponse(finalResp.tests.filter((test) => test.subject === dto.subject)[0]);\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] updateTestResult : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    observeTestRunning() {\n        if (this.runningTestInfo) {\n            if (this.runningTestInfo.testEndTimestamp < Date.now()) {\n                this.stopTest({ sessionId: this.runningTestInfo.testSessionId });\n            }\n            else {\n                setTimeout(() => {\n                    this.observeTestRunning();\n                }, 1000);\n            }\n        }\n    }\n    async checkTestRunning(dto) {\n        try {\n            if (this.runningTestInfo === null) {\n                return {\n                    isRunning: false,\n                };\n            }\n            if (this.runningTestInfo.testSessionId === dto.sessionId) {\n                return {\n                    isRunning: false,\n                };\n            }\n            else {\n                return { ...this.runningTestInfo, isRunning: true };\n            }\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] checkTestRunning : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('     .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async startTest(dto) {\n        try {\n            const { isRunning, testRecordId } = await this.checkTestRunning(dto);\n            if (isRunning) {\n                throw new rpc_code_exception_1.RpcCodeException('  .', constant_1.GrpcCode.AlreadyExists);\n            }\n            this.runningTestInfo = {\n                tester: dto.tester,\n                testRecordId: dto.testRecordId,\n                testSessionId: dto.sessionId,\n                testEndTimestamp: Date.now() + 1000 * 60 * 5,\n            };\n            this.observeTestRunning();\n            return this.runningTestInfo;\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] startTest : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('     .', constant_1.GrpcCode.InternalError);\n        }\n    }\n    async stopTest(dto) {\n        try {\n            const { isRunning, testRecordId } = await this.checkTestRunning(dto);\n            if (!isRunning) {\n                throw new rpc_code_exception_1.RpcCodeException('  .', constant_1.GrpcCode.NotFound);\n            }\n            this.runningTestInfo = null;\n            return {\n                testRecordId: testRecordId,\n            };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException)\n                throw error;\n            this.logger?.error(`[Test] stopTest : ${(0, common_3.errorToJson)(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.InternalError);\n        }\n    }\n};\nexports.TestService = TestService;\nexports.TestService = TestService = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, common_2.Inject)('TestDatabaseOutputPort')),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof test_database_output_port_1.TestDatabaseOutputPort !== \"undefined\" && test_database_output_port_1.TestDatabaseOutputPort) === \"function\" ? _a : Object, typeof (_b = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _b : Object])\n], TestService);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecordModel = void 0;\nconst util_1 = require(\"@app/common/util\");\nclass RecordModel {\n    constructor(param) {\n        this.id = util_1.UrlUtil.generateUUID();\n        this.tester = param.tester;\n        console.log('param.tests : ', param.tests);\n        this.tests = param.tests ?? [];\n    }\n    assignId(id) {\n        this.id = id;\n    }\n    addTest(test) {\n        if (this.tests.some((t) => t.id === test.id)) {\n            this.tests.find((t) => t.id === test.id).result = test.result;\n        }\n        else {\n            this.tests.push(test);\n        }\n    }\n}\nexports.RecordModel = RecordModel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestModel = void 0;\nconst util_1 = require(\"@app/common/util\");\nclass TestModel {\n    constructor(param) {\n        this.id = util_1.UrlUtil.generateUUID();\n        this.testRecordId = param.testRecordId;\n        this.subject = param.subject;\n        this.result = '';\n    }\n    assignId(id) {\n        this.id = id;\n    }\n    setResult(result) {\n        this.result = result;\n    }\n}\nexports.TestModel = TestModel;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestRecordSchema = exports.TestRecord = exports.TestResultSchema = exports.TestResult = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nlet TestResult = class TestResult {\n};\nexports.TestResult = TestResult;\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], TestResult.prototype, \"id\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], TestResult.prototype, \"testRecordId\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ required: true, maxlength: 128 }),\n    __metadata(\"design:type\", String)\n], TestResult.prototype, \"subject\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        type: String,\n        default: null,\n    }),\n    __metadata(\"design:type\", String)\n], TestResult.prototype, \"result\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        default: Date.now,\n    }),\n    __metadata(\"design:type\", typeof (_a = typeof Date !== \"undefined\" && Date) === \"function\" ? _a : Object)\n], TestResult.prototype, \"testAt\", void 0);\nexports.TestResult = TestResult = __decorate([\n    (0, mongoose_1.Schema)({\n        collection: 'test',\n    })\n], TestResult);\nexports.TestResultSchema = mongoose_1.SchemaFactory.createForClass(TestResult);\nlet TestRecord = class TestRecord {\n};\nexports.TestRecord = TestRecord;\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n    }),\n    __metadata(\"design:type\", String)\n], TestRecord.prototype, \"id\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        required: true,\n        maxlength: 128,\n    }),\n    __metadata(\"design:type\", String)\n], TestRecord.prototype, \"tester\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({ type: [exports.TestResultSchema], defulat: [] }),\n    __metadata(\"design:type\", Array)\n], TestRecord.prototype, \"tests\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        default: Date.now,\n    }),\n    __metadata(\"design:type\", typeof (_b = typeof Date !== \"undefined\" && Date) === \"function\" ? _b : Object)\n], TestRecord.prototype, \"createdAt\", void 0);\n__decorate([\n    (0, mongoose_1.Prop)({\n        default: Date.now,\n    }),\n    __metadata(\"design:type\", typeof (_c = typeof Date !== \"undefined\" && Date) === \"function\" ? _c : Object)\n], TestRecord.prototype, \"updatedAt\", void 0);\nexports.TestRecord = TestRecord = __decorate([\n    (0, mongoose_1.Schema)({\n        collection: 'test_record',\n    })\n], TestRecord);\nexports.TestRecordSchema = mongoose_1.SchemaFactory.createForClass(TestRecord);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestMongoAdapter = void 0;\nconst mongoose_1 = require(\"@nestjs/mongoose\");\nconst mongoose_2 = require(\"mongoose\");\nconst parse_util_1 = require(\"@app/common/util/parse.util\");\nconst test_entity_1 = require(\"../../entity/test.entity\");\nconst test_entity_2 = require(\"../../entity/test.entity\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst common_1 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nlet TestMongoAdapter = class TestMongoAdapter {\n    constructor(saveLogService, recordRepository, resultRepository, configService) {\n        this.saveLogService = saveLogService;\n        this.recordRepository = recordRepository;\n        this.resultRepository = resultRepository;\n        this.configService = configService;\n        this.logger = this.saveLogService.get('host');\n    }\n    async getRecordAll(dto) {\n        try {\n            const query = {};\n            const { pageNo = 1, pageSize = 10, searchText, searchType, sortOption = 'createdAt', sortDirection = 'desc', dateFrom, dateTo } = dto;\n            console.log('dto', dto);\n            this.logger?.debug(`[Test] getRecordAll request: ${JSON.stringify(dto)}`);\n            if (searchText && searchText.trim() !== '') {\n                if (searchType && searchType !== '') {\n                    switch (searchType) {\n                        case 'tester':\n                            query.tester = { $regex: searchText, $options: 'i' };\n                            break;\n                    }\n                }\n                else {\n                    query.tester = { $regex: searchText, $options: 'i' };\n                }\n            }\n            const sortDirectionValue = sortDirection === 'asc' ? 1 : -1;\n            const sortQuery = {};\n            sortQuery[sortOption] = sortDirectionValue;\n            const skip = (pageNo - 1) * pageSize;\n            console.log('query', query);\n            const totalCount = await this.recordRepository.countDocuments(query);\n            const data = await this.recordRepository.find(query).populate('tests').sort(sortQuery).skip(skip).limit(pageSize);\n            console.log('data', data);\n            const totalPage = Math.ceil(totalCount / pageSize);\n            return {\n                list: data.map((item) => ({\n                    id: item.id.toString(),\n                    tester: item.tester,\n                    tests: item.tests?.map((test) => ({\n                        id: test.id.toString(),\n                        testRecordId: test.testRecordId?.toString(),\n                        subject: test.subject,\n                        result: test.result,\n                        testAt: test.testAt?.toISOString(),\n                    })),\n                    createdAt: item.createdAt.toISOString(),\n                    updatedAt: item.updatedAt.toISOString(),\n                })),\n                pageSize,\n                totalCount,\n                totalPage,\n            };\n        }\n        catch (error) {\n            if (error instanceof microservices_1.RpcException) {\n                throw error;\n            }\n            this.logger?.error(`[Test] DB getRecordAll: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async getRecordbyId(id) {\n        try {\n            if ((await this.recordRepository.findOne({ id })) === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            return await this.recordRepository.findOne({ id });\n        }\n        catch (error) {\n            this.logger?.error(`[Test] DB getRecordbyId: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async getRecordRecent() {\n        try {\n            if ((await this.recordRepository.findOne().sort({ createdAt: -1 })) === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            return await this.recordRepository.findOne().sort({ createdAt: -1 });\n        }\n        catch (error) {\n            this.logger?.error(`[Test] DB getRecordRecent: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async getResultbyId(id) {\n        try {\n            if ((await this.resultRepository.findOne({ id })) === null) {\n                throw new rpc_code_exception_1.RpcCodeException('    .', constant_1.GrpcCode.NotFound);\n            }\n            return await this.resultRepository.findOne({ id });\n        }\n        catch (error) {\n            this.logger?.error(`[Test] DB getResultbyId: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async getResultbySubject(dto) {\n        try {\n            const query = {};\n            query.subject = dto.subject;\n            const data = await this.resultRepository.find(query);\n            return {\n                items: data.map((item) => ({\n                    id: item.id?.toString(),\n                    testRecordId: item.testRecordId?.toString(),\n                    subject: item.subject,\n                    result: item.result,\n                    testAt: item.testAt?.toISOString(),\n                })),\n            };\n        }\n        catch (error) {\n            this.logger?.error(`[Test] DB getResultbySubject: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n    async saveRecord(model) {\n        return await this.recordRepository.create(model);\n    }\n    async saveSubjects(model) {\n        return await this.resultRepository.create(model);\n    }\n    async updateRecord(record) {\n        console.log('record : ', record);\n        await this.recordRepository\n            .findOneAndUpdate({ id: record.id }, { ...record, updatedAt: new Date() }, {\n            upsert: true,\n        })\n            .exec();\n        return await this.recordRepository.findOne({ id: record.id }).lean();\n    }\n    async updateTestResult(result) {\n        try {\n            await this.resultRepository\n                .findOneAndUpdate({ id: result.id }, { ...result, updatedAt: new Date() }, {\n                upsert: true,\n            })\n                .exec();\n            return await this.resultRepository.findOne({ id: result.id }).lean();\n        }\n        catch (error) {\n            this.logger?.error(`[Test] DB updateTestResult: ${parse_util_1.ParseUtil.errorToJson(error)}`);\n            throw new rpc_code_exception_1.RpcCodeException('   .', constant_1.GrpcCode.DBError);\n        }\n    }\n};\nexports.TestMongoAdapter = TestMongoAdapter;\nexports.TestMongoAdapter = TestMongoAdapter = __decorate([\n    (0, common_1.Injectable)(),\n    __param(1, (0, mongoose_1.InjectModel)(test_entity_1.TestRecord.name)),\n    __param(2, (0, mongoose_1.InjectModel)(test_entity_2.TestResult.name)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _a : Object, typeof (_b = typeof mongoose_2.Model !== \"undefined\" && mongoose_2.Model) === \"function\" ? _b : Object, typeof (_c = typeof mongoose_2.Model !== \"undefined\" && mongoose_2.Model) === \"function\" ? _c : Object, typeof (_d = typeof config_1.ConfigService !== \"undefined\" && config_1.ConfigService) === \"function\" ? _d : Object])\n], TestMongoAdapter);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestGrpcInputController = void 0;\nconst common_1 = require(\"@app/common\");\nconst common_2 = require(\"@nestjs/common\");\nconst test_service_1 = require(\"../../application/test.service\");\nlet TestGrpcInputController = class TestGrpcInputController {\n    constructor(testService) {\n        this.testService = testService;\n    }\n    getTestRecordAll(request, metadata) {\n        return this.testService.getTestRecordAll(request);\n    }\n    getTestRecord(request, metadata) {\n        return this.testService.getTestRecord(request);\n    }\n    getTestResultRecent(request, metadata) {\n        return this.testService.getTestResultRecent(request);\n    }\n    getTestResultbySubject(request, metadata) {\n        return this.testService.getTestResultbySubject(request);\n    }\n    checkTestRunning(request, metadata) {\n        return this.testService.checkTestRunning(request);\n    }\n    startTest(request, metadata) {\n        return this.testService.startTest(request);\n    }\n    stopTest(request, metadata) {\n        return this.testService.stopTest(request);\n    }\n    createTestRecord(request, metadata) {\n        return this.testService.createTestRecord(request);\n    }\n    updateTestRecord(request, metadata) {\n        return this.testService.updateTestRecord(request);\n    }\n    updateTestResult(request, metadata) {\n        return this.testService.updateTestResult(request);\n    }\n};\nexports.TestGrpcInputController = TestGrpcInputController;\nexports.TestGrpcInputController = TestGrpcInputController = __decorate([\n    (0, common_2.Controller)(),\n    common_1.TestMicroservice.TestGrpcServiceControllerMethods(),\n    (0, common_2.UseInterceptors)(common_1.GrpcInterceptor),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof test_service_1.TestService !== \"undefined\" && test_service_1.TestService) === \"function\" ? _a : Object])\n], TestGrpcInputController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingMqttInputController = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst rpc_code_exception_1 = require(\"@app/common/exception/rpc-code.exception\");\nconst constant_1 = require(\"@app/common/grpc/constant\");\nconst common_2 = require(\"@app/common\");\nconst saveLog_service_1 = require(\"@app/common/log/saveLog.service\");\nconst setting_slamnav_service_1 = require(\"../../application/setting-slamnav.service\");\nconst setting_pending_service_1 = require(\"../../application/setting.pending.service\");\nconst cam_dto_1 = require(\"@app/common/model/dto/slamnav/cam.dto\");\nlet SettingMqttInputController = class SettingMqttInputController {\n    constructor(settingSlamnavService, pendingService, saveLogService) {\n        this.settingSlamnavService = settingSlamnavService;\n        this.pendingService = pendingService;\n        this.saveLogService = saveLogService;\n        this.logger = this.saveLogService.get('setting');\n    }\n    getConnect() {\n        this.logger?.info(`[Setting] Slamnav Connected`);\n        this.settingSlamnavService.slamConnect();\n    }\n    getDisconnect() {\n        this.logger?.warn(`[Setting] Slamnav Disconnected`);\n        this.settingSlamnavService.slamDisconnect();\n        this.pendingService.pendingResponses.forEach((resp) => {\n            resp.reject(new rpc_code_exception_1.RpcCodeException('SLAMNAV  ', constant_1.GrpcCode.InternalError));\n        });\n        this.pendingService.pendingResponses.clear();\n    }\n    getCameraResponse(data) {\n        try {\n            const { id } = data;\n            const listener = this.pendingService.pendingResponses.get(id);\n            if (listener) {\n                listener.received.push(data);\n                listener.resolve(data);\n                this.pendingService.pendingResponses.delete(id);\n            }\n            else {\n                this.settingSlamnavService.updateResponse(data);\n            }\n        }\n        catch (error) {\n            this.logger?.error(`[Setting] getCameraResponse : ${(0, common_2.errorToJson)(error)}`);\n        }\n    }\n};\nexports.SettingMqttInputController = SettingMqttInputController;\n__decorate([\n    (0, microservices_1.EventPattern)('con:slamnav'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], SettingMqttInputController.prototype, \"getConnect\", null);\n__decorate([\n    (0, microservices_1.EventPattern)('discon:slamanv'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], SettingMqttInputController.prototype, \"getDisconnect\", null);\n__decorate([\n    (0, microservices_1.EventPattern)('cameraResponse'),\n    __param(0, (0, microservices_1.Payload)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_d = typeof cam_dto_1.CameraResponseSlamnav !== \"undefined\" && cam_dto_1.CameraResponseSlamnav) === \"function\" ? _d : Object]),\n    __metadata(\"design:returntype\", void 0)\n], SettingMqttInputController.prototype, \"getCameraResponse\", null);\nexports.SettingMqttInputController = SettingMqttInputController = __decorate([\n    (0, common_1.Controller)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof setting_slamnav_service_1.SettingSlamnavService !== \"undefined\" && setting_slamnav_service_1.SettingSlamnavService) === \"function\" ? _a : Object, typeof (_b = typeof setting_pending_service_1.SettingPendingResponseService !== \"undefined\" && setting_pending_service_1.SettingPendingResponseService) === \"function\" ? _b : Object, typeof (_c = typeof saveLog_service_1.SaveLogService !== \"undefined\" && saveLog_service_1.SaveLogService) === \"function\" ? _c : Object])\n], SettingMqttInputController);\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CameraResponseSlamnav = exports.CameraRequestDto = exports.CameraResponseDto = void 0;\nconst swagger_1 = require(\"@nestjs/swagger\");\nconst class_validator_1 = require(\"class-validator\");\nclass CameraResponseDto {\n}\nexports.CameraResponseDto = CameraResponseDto;\n__decorate([\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsNotEmpty)(),\n    (0, swagger_1.ApiProperty)({\n        description: ' 1  ',\n        example: 'serial_number',\n    }),\n    __metadata(\"design:type\", String)\n], CameraResponseDto.prototype, \"cam1\", void 0);\n__decorate([\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsNotEmpty)(),\n    (0, swagger_1.ApiProperty)({\n        description: ' 2  ',\n        example: 'serial_number',\n    }),\n    __metadata(\"design:type\", String)\n], CameraResponseDto.prototype, \"cam2\", void 0);\nclass CameraRequestDto {\n}\nexports.CameraRequestDto = CameraRequestDto;\n__decorate([\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsNotEmpty)(),\n    (0, swagger_1.ApiProperty)({\n        description: ' 1  ',\n        example: 'serial_number',\n    }),\n    __metadata(\"design:type\", String)\n], CameraRequestDto.prototype, \"cam1\", void 0);\n__decorate([\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsNotEmpty)(),\n    (0, swagger_1.ApiProperty)({\n        description: ' 2  ',\n        example: 'serial_number',\n    }),\n    __metadata(\"design:type\", String)\n], CameraRequestDto.prototype, \"cam2\", void 0);\nclass CameraResponseSlamnav extends CameraResponseDto {\n}\nexports.CameraResponseSlamnav = CameraResponseSlamnav;\n__decorate([\n    (0, swagger_1.ApiProperty)({\n        description: '  ',\n        example: '1234567890',\n    }),\n    (0, class_validator_1.IsString)(),\n    (0, class_validator_1.IsNotEmpty)(),\n    __metadata(\"design:type\", String)\n], CameraResponseSlamnav.prototype, \"id\", void 0);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"@nestjs/core\");\nconst config_1 = require(\"@nestjs/config\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst common_1 = require(\"@app/common\");\nconst path_1 = require(\"path\");\nconst map_module_1 = require(\"./map/map.module\");\nconst setting_module_1 = require(\"./setting/setting.module\");\nconst sound_module_1 = require(\"./sound/sound.module\");\nconst update_module_1 = require(\"./update/update.module\");\nconst network_module_1 = require(\"./network/network.module\");\nconst onvif_module_1 = require(\"./onvif/src/onvif.module\");\nconst bodyParser = require(\"body-parser\");\nconst xmlParser = require(\"express-xml-bodyparser\");\nconst common_2 = require(\"@nestjs/common\");\nconst constant_1 = require(\"@app/common/constant\");\nconst test_module_1 = require(\"./test/test.module\");\nasync function bootstrap() {\n    console.log('   ...');\n    const mapModule = await core_1.NestFactory.create(map_module_1.MapModule);\n    const config = mapModule.get(config_1.ConfigService);\n    mapModule.connectMicroservice({\n        transport: microservices_1.Transport.GRPC,\n        options: {\n            package: common_1.MapMicroservice.protobufPackage,\n            protoPath: (0, path_1.join)(process.cwd(), 'proto/map.proto'),\n            url: config.getOrThrow('MAP_GRPC_URL'),\n            maxReceiveMessageLength: 100 * 1024 * 1024,\n            maxSendMessageLength: 100 * 1024 * 1024,\n        },\n    });\n    mapModule.connectMicroservice({\n        transport: microservices_1.Transport.MQTT,\n        options: {\n            url: config.getOrThrow('MQTT_URL'),\n            clientId: 'microservice-map',\n        },\n    });\n    await mapModule.init();\n    await mapModule.startAllMicroservices();\n    const settingModule = await core_1.NestFactory.create(setting_module_1.SettingModule);\n    settingModule.connectMicroservice({\n        transport: microservices_1.Transport.GRPC,\n        options: {\n            package: common_1.SettingMicroservice.protobufPackage,\n            protoPath: (0, path_1.join)(process.cwd(), 'proto/setting.proto'),\n            url: config.getOrThrow('SETTING_GRPC_URL'),\n        },\n    });\n    settingModule.connectMicroservice({\n        transport: microservices_1.Transport.MQTT,\n        options: {\n            url: config.getOrThrow('MQTT_URL'),\n            clientId: 'microservice-setting',\n        },\n    });\n    await settingModule.init();\n    await settingModule.startAllMicroservices();\n    const soundModule = await core_1.NestFactory.create(sound_module_1.SoundModule);\n    soundModule.connectMicroservice({\n        transport: microservices_1.Transport.GRPC,\n        options: {\n            package: common_1.SoundMicroservice.protobufPackage,\n            protoPath: (0, path_1.join)(process.cwd(), 'proto/sound.proto'),\n            url: config.getOrThrow('SOUND_GRPC_URL'),\n        },\n    });\n    soundModule.connectMicroservice({\n        transport: microservices_1.Transport.MQTT,\n        options: {\n            url: config.getOrThrow('MQTT_URL'),\n            clientId: 'microservice-sound',\n        },\n    });\n    await soundModule.init();\n    await soundModule.startAllMicroservices();\n    const updateModule = await core_1.NestFactory.create(update_module_1.UpdateModule);\n    updateModule.connectMicroservice({\n        transport: microservices_1.Transport.GRPC,\n        options: {\n            package: common_1.UpdateMicroservice.protobufPackage,\n            protoPath: (0, path_1.join)(process.cwd(), 'proto/update.proto'),\n            url: config.getOrThrow('UPDATE_GRPC_URL'),\n        },\n    });\n    updateModule.connectMicroservice({\n        transport: microservices_1.Transport.MQTT,\n        options: {\n            url: config.getOrThrow('MQTT_URL'),\n            clientId: 'microservice-update',\n        },\n    });\n    await updateModule.init();\n    await updateModule.startAllMicroservices();\n    const networkModule = await core_1.NestFactory.create(network_module_1.NetworkModule);\n    networkModule.connectMicroservice({\n        transport: microservices_1.Transport.GRPC,\n        options: {\n            package: common_1.NetworkMicroservice.protobufPackage,\n            protoPath: (0, path_1.join)(process.cwd(), 'proto/network.proto'),\n            url: config.getOrThrow('NETWORK_GRPC_URL'),\n        },\n    });\n    networkModule.connectMicroservice({\n        transport: microservices_1.Transport.MQTT,\n        options: {\n            url: config.getOrThrow('MQTT_URL'),\n            clientId: 'microservice-network',\n        },\n    });\n    await networkModule.init();\n    await networkModule.startAllMicroservices();\n    const onvifModule = await core_1.NestFactory.create(onvif_module_1.OnvifModule);\n    onvifModule.use(bodyParser.json({ limit: '50mb' }));\n    onvifModule.use(xmlParser());\n    onvifModule.use(bodyParser.urlencoded({ limit: '50mb', extended: true }));\n    onvifModule.useGlobalPipes(new common_2.ValidationPipe({\n        transform: true,\n        whitelist: true,\n        forbidNonWhitelisted: true,\n    }));\n    onvifModule.connectMicroservice({\n        transport: microservices_1.Transport.MQTT,\n        options: {\n            url: process.env.MQTT_URL,\n            clientId: 'gateway-rrs-onvif',\n        },\n    });\n    await onvifModule.init();\n    await onvifModule.startAllMicroservices();\n    await onvifModule.listen(process.env.RRS_ONVIF_PORT, '0.0.0.0');\n    const mqttClient = onvifModule.get(constant_1.MQTT_BROKER);\n    await mqttClient.connect();\n    mqttClient.emit('get:socket:connection', {});\n    const testModule = await core_1.NestFactory.create(test_module_1.TestModule);\n    testModule.connectMicroservice({\n        transport: microservices_1.Transport.GRPC,\n        options: {\n            package: common_1.TestMicroservice.protobufPackage,\n            protoPath: (0, path_1.join)(process.cwd(), 'proto/test.proto'),\n            url: config.getOrThrow('TEST_GRPC_URL'),\n        },\n    });\n    await testModule.init();\n    await testModule.startAllMicroservices();\n}\nbootstrap().catch((error) => {\n    console.error('    :', error);\n    process.exit(1);\n});\n"],"names":[],"sourceRoot":""}