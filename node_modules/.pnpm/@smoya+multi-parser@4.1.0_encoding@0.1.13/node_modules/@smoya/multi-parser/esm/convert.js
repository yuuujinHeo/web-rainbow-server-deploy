import { createAsyncAPIDocument as createAsyncAPIDocumentParserV2 } from 'parserv2';
import { createAsyncAPIDocument as createAsyncAPIDocumentParserV3 } from 'parserv3';
export function ConvertDocumentParserAPIVersion(doc, toParserAPIMajorVersion) {
    var _a;
    if (!doc || !doc.json)
        return doc;
    const docParserAPI = (_a = doc.extensions().get('x-parser-api-version')) === null || _a === void 0 ? void 0 : _a.value();
    const docParserAPIMajorVersion = docParserAPI || 0;
    if (docParserAPIMajorVersion === toParserAPIMajorVersion) {
        return doc; // Nothing to do
    }
    const detailedAsyncAPI = doc.meta().asyncapi;
    switch (toParserAPIMajorVersion) {
        case 1:
            return createAsyncAPIDocumentParserV2(detailedAsyncAPI);
        case 2:
            return createAsyncAPIDocumentParserV3(detailedAsyncAPI);
        default:
            return doc;
    }
}
