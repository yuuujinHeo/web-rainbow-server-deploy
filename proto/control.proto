syntax = "proto3";

package control;

//led, 
service ControlGrpcService {
    rpc OnOffControl(OnOffControlRequest) returns (OnOffControlResponse);
    rpc WorkControl(WorkControlRequest) returns (WorkControlResponse);
    rpc LEDControl(LEDControlRequest) returns (LEDControlResponse);
    rpc SetSafetyField(SafetyField) returns (SafetyField);
    rpc GetSafetyField(Empty) returns (SafetyField);
    rpc ResetSafetyFlag(ResetSafetyFlagRequest) returns (ResetSafetyFlagResponse);
    rpc ExAccessoryControl(ExAccessoryControlRequest) returns (ExAccessoryControlResponse);
    rpc SafetyIoControl(SafetyIoControlRequest) returns (SafetyIoControlResponse);
    rpc SetObsBox(SetObsBoxRequest) returns (SetObsBoxResponse);
    rpc GetObsBox(Empty) returns (GetObsBoxResponse);
    rpc Detect(DetectRequest) returns (DetectResponse);
}

message Empty {

}
message OnOffControlRequest {
    string command = 1;
    bool onoff = 2;
    optional int32 frequency = 3;
}

message OnOffControlResponse {
    string command = 1;
    bool onoff = 2;
    optional int32 frequency = 3;
    optional string result = 4;
    optional string message = 5;
}

message WorkControlRequest {
    string command = 1;
}

message WorkControlResponse {
    string command = 1;
    optional string result = 2;
    optional string message = 3;
}

message LEDControlRequest {
    string command = 1;
    bool onoff = 2;
    optional string color = 3;
}

message LEDControlResponse {
    string command = 1;
    bool onoff = 2;
    optional string color = 3;
    optional string result = 4;
    optional string message = 5;
}

message ExAccessoryControlRequest {
    string command = 1;
    optional string pose = 2;
}

message ExAccessoryControlResponse {
    string command = 1;
    optional string pose = 2;
    optional string result = 3;
    optional string message = 4;
}

message SafetyField {
    string safetyField = 1;
}

message McuDio {
    repeated int32 channel = 1;
}

message SafetyIoControlRequest {
    string command = 1;
    repeated McuDio mcuDio = 2;
}

message SafetyIoControlResponse {
    string command = 1;
    repeated McuDio mcuDio = 2;
    repeated McuDio mcuDin = 3;
    string result = 4;
    optional string message = 5;
}

message SetObsBoxRequest {
    optional double minX = 1;
    optional double maxX = 2;
    optional double minY = 3;
    optional double maxY = 4;
    optional double minZ = 5;
    optional double maxZ = 6;
    optional double mapRange = 7;
}

message SetObsBoxResponse {
    optional double minX = 1;
    optional double maxX = 2;
    optional double minY = 3;
    optional double maxY = 4;
    optional double minZ = 5;
    optional double maxZ = 6;
    optional double mapRange = 7;
    string result = 8;
    optional string message = 9;
}

message GetObsBoxResponse {
    optional double minX = 1;
    optional double maxX = 2;
    optional double minY = 3;
    optional double maxY = 4;
    optional double minZ = 5;
    optional double maxZ = 6;
    optional double mapRange = 7;
    string result = 8;
    optional string message = 9;
}

message DetectRequest {
    string command = 1;
    optional int32 cameraNumber = 2;
    optional string cameraSerial = 3;
    optional double size = 4;
}

message DetectResponse {
    string command = 1;
    optional int32 cameraNumber = 2;
    optional string cameraSerial = 3;
    optional double size = 4;
    repeated double pose = 5;
    repeated double tf = 6;
    string result = 7;
    optional string message = 8;
}

message ResetSafetyFlagRequest {
    string resetFlag = 1;
}

message ResetSafetyFlagResponse {
    string resetFlag = 1;
    optional string result = 2;
    optional string message = 3;
}